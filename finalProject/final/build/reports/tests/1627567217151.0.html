<html lang="ru" class="chrome no-js" dir="ltr"><!-- rendered at UTC: Thursday, July 29, 2021 2:00 PM --><!--<![endif]--><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#  place: http://ogp.me/ns/place#"><script src="https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ru.dbrwcvX8izw.O/m=auth2/rt=j/sv=1/d=1/ed=1/am=AQ/rs=AGLTcCNnJaemiN_7g13n365xf7-JLYI91A/cb=gapi.loaded_0?le=ili,ipu" async=""></script><script src="https://connect.facebook.net/ru_RU/sdk.js?hash=59bb029dfacbd32ad5b634f35fe713e5" async="" crossorigin="anonymous"></script><script type="text/javascript" async="" src="https://www.gstatic.com/recaptcha/releases/Iwg4ANhK7Iu8SHToSsE0E20K/recaptcha__ru.js" crossorigin="anonymous" integrity="sha384-8AZ4kxWgVgUZHxMRyYYWrYHBK3TFRR5rLfI/BjnYpzhJxPenFVbCeho9QOiVlsgn"></script>
    



<script>
    window.feMsgConfig = {"Environment":"production","Cluster":"4I","DC":"AM","PageTypeId":980,"Disable":false,"IsMoveToCronos":false};
</script>


<script type="text/javascript" id="messagingClientLite">
!function(n,t){var i,r;if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{i=t();for(r in i)("object"==typeof exports?exports:n)[r]=i[r]}}("undefined"!=typeof self?self:this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=163)}({1:function(n,t,i){"use strict";(function(n){i.d(t,"a",function(){return r});var r=function(){function t(){}return t.current=function(){var t="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==n?n:null;if(!t)throw new Error("Unsupported environment.");return t},t}()}).call(this,i(20))},12:function(n,t,i){"use strict";function r(n,t,i){for(var r,f,e=i.length,u=0;u<e;u++)if(r=i[u],r)for(f in r)r.hasOwnProperty(f)&&n(f,r[f])}i.d(t,"a",function(){return r})},163:function(n,t,i){"use strict";i.r(t);i.d(t,"MessagingClient",function(){return r});var u=i(1),f=i(31),e=i(19),o=function(){function n(){this.buffer={items:[]};this.contextData={}}return n.prototype.send=function(t){var r=this.buffer.items,i=n.MaxBufferSize-r.length;i>0&&(t instanceof Array?(i<t.length&&(t=t.slice(0,i)),this.buffer.items=t.concat(r)):this.buffer.items.push(t))},n.prototype.dispose=function(n){this.buffer.items.length=0;n&&n()},n.prototype.environment=function(){},n.prototype.context=function(n){var t=this.contextData;t.sessionId=n.sessionId||t.sessionId;t.userId=n.userId||t.userId},n.MaxBufferSize=15e3,n}(),s=i(40),r=function(){function n(n){this._test=n}return n.create=function(t){return n.instantiate(t)},n.instantiate=function(t){return(new n).instantiate(t)},n.environment=function(t){return new n(t)},n.prototype.instantiate=function(n){var t=e.a.get(),i,r;return(t.environment=t.environment||n,t.test=t.test||this._test,t.messagingClient)?t.messagingClient:(i=new o,r=new s.a(i,new f.a),t.buffer=i.buffer,t.context=i.contextData,t.messagingClient=r,r)},n}();u.a.current().MessagingClient=r},19:function(n,t,i){"use strict";i.d(t,"a",function(){return f});var u=i(1),r="MessagingClient-LiteData",f=function(){function n(){}return n.get=function(){var n=u.a.current();return n[r]||(n[r]={})},n.clear=function(){delete u.a.current()[r]},n}()},20:function(n){var t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"==typeof window&&(t=window)}n.exports=t},24:function(n,t,i){"use strict";i.d(t,"a",function(){return r});var r=function(){function n(){}return n.current=function(){return window&&window.__MCJS_EXTENSION_DATA__||{}},n}()},31:function(n,t,i){"use strict";i.d(t,"a",function(){return r});var r=function(){function n(){}return n.prototype.now=function(){return+new Date},n}()},40:function(n,t,i){"use strict";i.d(t,"a",function(){return f});var r=i(24),u=i(12),f=function(){function n(n,t){this.sender=n;this._time=t}return n.prototype.create=function(n,t,i){var r=Number(null==i?void 0:i.timestamp),f;return("number"!=typeof r||isNaN(r)||r<1e5)&&(r=this._time.now()),f={_meta:{timestamp:r,type:n}},t&&function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];n||(n={});Object(u.a)(function(t,i){void 0===n[t]&&(n[t]=i)},n,i)}(f,t),f},n.prototype.send=function(n,t){var i,u;if(!n||!n._meta)throw new Error("Message or message type is undefined");null!==(i=(u=(n=JSON.parse(JSON.stringify(n)))._meta).timestamp)&&void 0!==i||(u.timestamp=this._time.now());n._meta.tabId=r.a.current().tabId;this.sender.send(n,t)},n.prototype.debug=function(n,t){this.sender.environment({debug:n,logs:t})},n.prototype.context=function(n){this.sender.context(n)},n}()}})})
</script>







    <script>
        agoda = {};
            
                (function() {
                    var method;
                    var noop = function() { };
                    var methods = [
                        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',
                        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',
                        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',
                        'timeline', 'timelineEnd', 'timeStamp', 'trace', 'warn'
                    ];
                    var length = methods.length;
                    var console = (window.console = window.console || { });

                    while (length--)
                    {
                        method = methods[length];
                        // Only stub undefined methods.
                        if (!console[method])
                        {
                            console[method] = noop;
                        }
                    }

                }());
            

    </script>
<script>
    var agoda = window.agoda || {};
    agoda.userInfo = {"isNah":false};
</script>




<script type="text/javascript" id="RUMAgoda">
    agoda = agoda || {};
    agoda.rumpagetype = 'mmb-signin';
</script>

<script>
    var agoda = agoda || {};

    
    agoda.pageConfig = {
        pageTypeId: 980,
        origin: 'BY',
        cid: -1,
        tag: '',
        gclid: '',
        aid: 130243,
        userId: '49b1135a-99ce-4642-99aa-c18e0408225f',
        realLanguageId: 11,
        loginLvl: 0,
        languageId: 11,
        languageFlag: 'ru',
        sessionId: '2qn5bgqqmyf2m1xwyapjrgk1',
        storefrontId: '3',
        currencyId: 7,
        currencyCode: 'USD',
        htmlLanguage: 'ru-ru',
        cttp: 4,
        machineName: 'AM-AGWEB-4I04',
        cultureInfoName: 'ru-RU',
        trafficGroupId: 4,


        prid: 0,
        whitelabelid: 1,

        
            trafficSubGroupId: 4,
            isLive: true,
            isRealUser: true
        

    };

    agoda.userDevice = {
        mobileDeviceType: 'NOTMOBILE',
        devicePlatformId: 1,
        deviceType: 'desktop'
    };

    agoda.userAgentInfo = {
        isPrerender:'False'
    }

    agoda.topDestinations = {
        endPoint: '/api/cronos/home/GetTopDestinations',
        numberOfItems: 8,
        suggestionMaxItemNumber: 6,
        headerText: 'Самые популярные направления'
    };

    
    
    agoda.zenithClientConfig = {
        endpoint:
            '/api/ru-ru/Recommended/_action_',
        requestData: {
            searchObjectId: 0,
            searchType: 0,
            searchObjectIds: [0]
        },
        numberOfItems: 6
    };

    agoda.menu = {
        language: {
            get: '/api/cronos/layout/culture/getlanguages',
            set: '/api/ru-ru/Main/SetSelectedLanguage'
        },
        currency: {
            get: '/api/cronos/layout/currency/getlist',
            set: '/api/cronos/layout/currency/set',
            suggestedCurrencyLabel: 'Рекомендуемые валюты',
            topCurrencyLabel: 'Популярные валюты',
            allCurrencyLabel: 'Все валюты'
        },
    };

    




        
        agoda.reactHeader = {"menuViewModel":{"cms":{"signInText":"Войти","signUpText":"Создать аккаунт","signOutText":"Выход","loginHeader":"Войдите","settingsHeader":"Настройки","myBookingsText":"Мои бронирования","listYourPlaceText":"Сдать жилье","listingYourPlaceTitleText":"Сдача жилья на Agoda","listingYourPlaceDetailText":"Зарабатывайте на аренде и путешествуйте!","listingYourPlaceLinkText":"Сдать жилье сейчас","myBookingsPopUpIntentHeader":"Booked before 1 Jan 2020?","myBookingsPopUpHeader":"Booked on or after December 9, 2019?","myBookingsPopUpText":"Please check your booking confirmation email. You can easily access your booking from the link inside that email.","myBookingsPopUpButtonDividerText":"или","myBoookigsPopUpCloseButtonLabel":"Закрыть","myBookingsPopUpWarningContent":"\u003cp\u003e※ Regarding your booking on or before December 15, 2019, please contact JAPANiCAN Customer Support on and after Jun 23, 2020. Click \u003ca href=\u0022https://www.japanican.com/content/faq/?#6-1\u0022 target=\u0022_blank\u0022\u003ehere\u003c/a\u003e for details.\u003c/p\u003e\n","signInPopupHeaderText":"Добро пожаловать!","signInPopupContentText":"Войдите в аккаунт и сэкономьте до 30%","signInPopupWithEmailText":"Войти через электронную почту","termsOfUseAndPrivacySentence":"Входя в аккаунт, вы соглашаетесь с {0} и {1} Agoda.","termsOfUse":"Условиями использования","privacyPolicy":"Политикой конфиденциальности"},"links":null,"userMenuViewModel":null,"languageMenuViewModel":{"cms":{"suggestedLanguagesText":"Рекомендуемые языки","allLanguagesText":"Все языки"},"languageFlag":"ru","languageTranslation":"Русский"},"currencyMenuViewModel":{"cms":{"priceViewText":"ПОКАЗАТЬ ЦЕНЫ:","perNightBasePriceText":"Базовая цена за ночь","perNightWithTaxesAndFeesText":"Цена за ночь с налогами и сборами","suggestedCurrenciesText":"Рекомендуемые валюты","topCurrenciesText":"Популярные валюты","allCurrenciesText":"Все валюты"},"finalPriceView":0,"currency":{"id":7,"code":"USD","text":"Доллар США","isTopCurrency":true,"isSuggested":false,"noDecimal":2,"display":"$"}},"downloadWechatApp":null,"followWechat":null,"cegInfo":null,"wysiwyp":{"page":"","currentPriceView":0,"linkText":""},"isApplyGiftcard":false,"applyGiftcardMenuText":null},"culture":"ru-ru","logoAndLinksMenu":null,"experiments":{"isOWL177":false,"isPfe8248":true}};
        agoda.reactHeader.culture = 'ru-ru';
        agoda.reactHeader.menuViewModel.links = {"agodaHostnameWithLocale":"//www.agoda.com/ru-ru","myAgodaHostNameWithLocale":"https://my.agoda.com/ru-ru","customerSupportLink":"/ru-ru/info/agoda_faq.html","contactLink":"/ru-ru/info/contact.html","openSearchLink":"//www.agoda.com/ru-ru/opensearch.xml","forgetPasswordUrl":"/account/signin.html?option=reset-password","signupUrl":"/account/signin.html?option=signup","myProfileLink":"/ru-ru/account/profile.html","manageBookingsUrl":"/ru-ru/account/bookings.html","inboxUrl":"/ru-ru/account/inbox.html","myReviewsUrl":"/ru-ru/account/reviews.html","myBookingPage":"/ru-ru/account/bookings.html","myFlightsBookingPage":"/ru-ru/flights/account/bookings","myCreditCardPage":"/account/profile.html#mmb-profile-payment-section","giftCardUrl":"/ru-ru/account/giftcards.html?ckuid=49b1135a-99ce-4642-99aa-c18e0408225f","giftCardMigrationUrl":"https://my.agoda.com/ru-ru/mybookings.html?migration=2\u0026ckuid=49b1135a-99ce-4642-99aa-c18e0408225f","referAFriendUrl":"//www.agoda.com/ru-ru/account/refer-a-friend.html","aboutusAgodaLink":"/ru-ru/info/about-agoda.html","aboutusAgodaChinaLicense":"","aboutusAgodaInNewsLink":"/ru-ru/info/agoda-news.html","aboutusAgodaPrivacyLink":"/ru-ru/info/privacy.html","aboutusAgodaTermOfUseLink":"/ru-ru/info/termsofuse.html","aboutusTravelBlogLink":"//travelblog.agoda.com","aboutusMediaRoomLink":"//mediaroom.agoda.com","aboutusPressLink":"/press","aboutusWorldLink":"//www.agoda.com/ru-ru/world.html","aboutusBlogLink":"/ru-ru/blog","forYouPropertyPartnersLink":"//ycs.agoda.com/ru-ru","forYouPartnerSolutionsLink":"//connect.agoda.com/","forYouPartnerHubLink":"//partnerhub.agoda.com/","advertiseHubLink":"//partnerhub.agoda.com/hotel-solutions/ad-solutions/","forYouAffiliatePartnersLink":"//partners.agoda.com/ru-ru/index.html","forYouConnectivityPartnersLink":"//www.agodaconnectivity.com/home","forYouCareersLink":"//careersatagoda.com","forYouHelpLink":"/ru-ru/info/contact.html","forYouPriusLink":"//www.agoda.com/ru-ru/pointsmax.html","copyRightVeriSignLink":"//verisign.com/","mobileAppDownloadLink":"http://agoda.onelink.me/1640755593?pid=direct\u0026c=hotel_page_menu\u0026af_dp=agoda%3A%2F%2Fhome\u0026site_id=1716632\u0026af_siteid=1716632\u0026af_sub1=mobile_web","mobileAppsAppleLink":"//app.appsflyer.com/id440676901?pid=direct\u0026c=hotel_page_footer\u0026af_siteid=1716632\u0026site_id=1716632\u0026af_sub1=desktop","mobileAppsAndroidLink":"//app.appsflyer.com/com.agoda.mobile.consumer?pid=direct\u0026c=hotel_page_footer\u0026af_siteid=1716632\u0026site_id=1716632\u0026af_sub1=desktop","mobileAppsWindowsPhoneLink":"//www.windowsphone.com/en-us/store/app/agoda/2ddd154d-1b1a-4e50-bf12-481f0c2109a8","recommendedDestinationLink":"//www.agoda.com/ru-ru/cities.html","favoriteLink":"/ru-ru/favorite.html","listYourPlaceLink":"/homes/ru-ru/propertyWizard?cid=1828703","listYourPlaceBtnLink":"/homes/ru-ru/propertyWizard?cid=1828701","listYourPlaceOldLink":"/homes/ru-ru/propertyWizard?cid=1828702","agodaVipUrl":"/ru-ru/account/vip.html","faqsLink":"/ru-ru/content/faq","siteMaintenanceLink":"/ru-ru/content/maintenance","aboutusTermOfUseLink":"/ru-ru/content/terms-of-use/","aboutusPrivacyLink":"/ru-ru/content/privacy-policy/","japanicanCorporateLink":"//www.jtbcorp.jp/en/","japanicanFacebookLink":"//facebook.com/JAPANiCAN","japanicanWeiboLink":"//www.weibo.com/japanican","japanicanTwitterLink":"//twitter.com/jtbjapanican","japanicanYoutubeLink":"//youtube.com/user/JTBJAPANiCAN","travelAgencyClausesLink":"/content/yakkan","travelRequirementsLink":"/content/jyoken","rurubuCorporateLink":"//www.jtbcorp.jp/jp/","rurubuNewsReleaseLink":"//press.jtbcorp.jp/jp/","rurubuRegisterYourPropertyLink":"//info.rurubu.travel/n_question/entry/mailform.asp","rurubuFacebookLink":"//facebook.com/rurubu.travel/","rurubuTwitterLink":"//twitter.com/RurubuTravel","remainingPointsLink":null,"ccpaLink":"/ru-ru/ccpa.html"};
        agoda.reactHeader.verificationToken = "HGf-mUMGyJQtRcYonP9VdKTuJolP3JlfaLRoxJx94MAHKG1uTgsS4Q9NElTWYoNURbDyu4dpw1twectWzL-9UhI7c-41:CSxWKMqH94K8ktO6MdgbspYm_guZZkikCwQ19TQFelSCUtjG-oyB1IrImKyigSNuCi8RxrF5IEft-IICOzTBPqI8Tck1";
        agoda.reactHeader.experiments = {
            isShouldUpdateGCBalance: false,
            isJagermeister: true,
            isFixSecondaryLogo: false,
            fullFunnelBannerRefresh: false, // DEXP-158
            isLOY5832: false,
            isNewProfileMenu: false, // DEXP-253
            isLOY5878:false,
            isLOY5879:false,
            isDexp460: true, // DEXP-460
            isMigrateToKiteLogo:true,
        };
        agoda.featureList = {"RegulationShowExclusivePriceSetting":{},"SecuredTouch":{},"ShowGoogleLogin":{}};
        
        
        agoda.reactHeader.logoAndLinksMenu = {
            homeUrl: '/ru-ru/',
            agodaLogo: 'https://cdn6.agoda.net/images/MVC/default/agoda-logo-v2.png',
            agodaSecondaryLogoPath: 'https://cdn6.agoda.net/images/MVC/default/logo-{}.svg',
            isThemed: true,
            logoText: 'Agoda',


            links: [{"link":"/ru-ru/","target":"_blank","dataSelenium":"header-hotels","dataElementName":"header-hotels-links","selected":false,"linkItems":{"text":"Отели и жилье","icon":""},"className":"","showTag":false,"tagText":"","tagType":0,"productType":-1},{"link":"https://flights.agoda.com/in?lc=ru\u0026cc=ru\u0026url=%2fflights\u0026mc=%7bcurrency%7d\u0026p=header","target":"_blank","dataSelenium":"header-flights","dataElementName":"header-flights-links","selected":false,"linkItems":{"text":"Авиабилеты","icon":""},"className":"","showTag":false,"tagText":"Новинка!","tagType":0,"productType":10},{"link":"https://agoda.mozio.com/ru-ru?currency={currency}\u0026ref=agoda\u0026utm_campaign=1793794\u0026utm_source=1793794","target":"_blank","dataSelenium":"header-taxi","dataElementName":"header-taxi-links","selected":false,"linkItems":{"text":"Трансфер","icon":""},"className":"","showTag":false,"tagText":"","tagType":0,"productType":0},{"link":"/ru-ru/deals?option=signup\u0026amp;ottoken=eyJhbGciOiJBMjU2S1ciLCJlbmMiOiJBMjU2Q0JDLUhTNTEyIn0.cicfnJvJqFJZjLW0BEr0m3cUDXcpwdSrO8v1peR4mgCpV6KVZWr41QVR_zjzeUMPRPz5bASMkhmSOW_vwPRbSPpXo5g_vBYH.NWOr9laC3UKHjM9J5eqbtQ.H8OWWcikEpBRP1Tpy6OWVloxkvieJSEnbaZuP3V_gzO4LYT31S6Ghe8mjjIeNjEW.EmxUronTKTmSRSMAe2bjzuqX1VHw3bRghpCn9eYrBFM\u0026amp;returnurl=%2F","target":"_blank","dataSelenium":"header-deals","dataElementName":"header-deals-links","selected":false,"linkItems":{"text":"Текущие предложения","icon":""},"className":"","showTag":false,"tagText":"","tagType":0,"productType":0},{"link":"/ru-ru/apartments","target":"_blank","dataSelenium":"header-apartments","dataElementName":"header-apartments-links","selected":false,"linkItems":{"text":"Апартаменты","icon":"ficon ficon-18 ficon-agoda-homes"},"className":"","showTag":false,"tagText":"","tagType":0,"productType":0}],
            ellipsisLinks: [{"link":"https://www.rentalcars.com/?affiliateCode=agoda633\u0026prefcurrency={currency}\u0026preflang=ru\u0026adplat=web\u0026adcamp=1802440\u0026popularLoc=true\u0026utm_source=web\u0026utm_medium=whitelabel-linkout\u0026utm_campaign=home-header-cars-links","target":"_blank","dataSelenium":"header-rental-cars","dataElementName":"header-cars-links","selected":false,"linkItems":{"text":"Прокат машин","icon":""},"className":"","showTag":false,"tagText":"","tagType":0,"productType":0},{"link":"https://thingstodo-agoda.viator.com/?utm_source=web\u0026utm_medium=whitelabel-linkout\u0026utm_campaign=home-header-thingstodo-links\u0026SUBPUID=web\u0026PARTNERPARAM=home-header","target":"_blank","dataSelenium":"header-thingstodo","dataElementName":"header-thingstodo-links","selected":false,"linkItems":{"text":"Досуг","icon":""},"className":"","showTag":false,"tagText":"","tagType":0,"productType":0}]
        }
        
    
        agoda.features = {"agodaHomes":{},"flights":{},"pointsMax":{},"accommodation":{},"agodaCash":{},"comparePrices":{},"reviews":{"isOverheardHomeEnabled":true,"propertyRatingScale":10,"propertyDefaultProvider":-1,"isSubmissionEnabled":true,"isStarRatingPopupEnabled":true},"agodaVip":{},"currency":{"isCurrencySwitchRequired":true,"priceDisplay":true},"language":{"isLanguageSwitchRequired":true},"footerAncillaryLinks":{},"trendingDataContents":{},"branding":{"brands":["agoda","priceline","kayak","rental-cars","booking-com","open-table"]},"userManageBooking":{"isHotelEnabled":true,"isFlightEnabled":true},"userMessaging":{},"userProfile":{"isSocialEnabled":true,"isPaymentEnabled":true,"isEmailSubscriptionEnabled":true},"favorites":{},"facebookLogin":{},"featuredLuxuryHotel":{},"bestPriceGuarantee":{},"accountProviders":{"mobileNumber":true},"manageMyBookings":{"showContactProperty":true,"showQuickAnswers":true,"showAirportTransfer":true,"showExternalBookingId":false},"chinaMarket":{},"login":{"showBenefits":true,"resetPasswordRedirect":false},"tealium":{"account":"agoda"},"privateSale":{},"googleMaps":{"parameters":{"client":"gme-booking","channel":"agoda"}},"multiHotelPackages":{},"myBookingsButton":{"buttonBehavior":"link"},"occupancyOptions":{"showOccupancyOptions":true,"solo":true,"couple":true,"family":true,"group":true,"business":true},"themedDomestic":{},"flightCrossSellHotel":{},"coupons":{"pageVersion":1},"predefinedPackages":{}};
        agoda.isBrazeEnabled = true;
        agoda.BrazeSettings = {"isEnabled":true,"isEnabledLogin":true,"isWhiteLabelEnabled":true,"isAllowOrigin":true,"isNonLoginEnabled":true,"allowPages":["Home","SSR"],"excludeAids":[197604,160378,116766,166536,233806,187675,154227,185302,218537,152083,195095,225401,256082,250159,247754,160163,254213,184226,259021,194673,201578,149972,129344,253433,196067,270819,268227,231819,211354,171651,233993,257077,264663,248649,225729,220881,216230,180535,227786,197790,228475,235068,213722,231764,257074,218115,218584,184156,251290,255097,142903,214190,194480,197163,250148,174675,223151,232737,230340,247628,231034,234695,202654,182492,248850,203544,171846,169572,167773,228474,172267,180148,203035,148808,240782,190981,231008,261527,275115,248084,208149,217753,219501,242173,252904,173726,186170,189009,205293,167214,218755,206754,253871,229631,216596,186783,249414,237689,126260,200194,188624,170850,169315,172266,160655,227845,194663,179589,162452,124995,176173,232879,248372,174572,147330,264315,222324,225639,264661,250146,206547,201543,174584,252129,265381,250526,219861,241533,267160,159578,270657,265380,196354,131414,257797,249815,219674,209928,213396,216771,155499,217299,211922,210457,182266,253426,249700,129449,208369,213373,253707,210705,190753,238494,208098,196635,248927,197164,251085,190980,175398,217300,244491,196885,172515,262757,243154,253714,125311,230214,196720,158451,255437,160076,163064,252033,193924,194682,214191,254164,218582,154372,201612,179123,195930,191597,268177,157235,227628,217138,210015,201104,210580,240800,214745,182200,277015,252414,221260,184111,127095,256556,210700,264775,256873,218685,275323,209387,182322,185779,215379,206091,251114,226176,264662,175626,167406,196939,169701,263179,201582,194662,233880,209972,234583,197362,221812,201490,265975,238600,191300,225112,169271,244125,222744,228545,262037,168256,232114,125884,264776,250375,277808,194544,217298,244020,193543,240593,217092,263178,258502,224375,205562,219447,208496,157028,222447,212148,196346,208206,253999,232810,225434,160514,228262,214689,173322,182156,260216,182265,171820,171919,216790,165040,208796,218098,254232,264451,182138,206418,189244,150444,169392,198991,215652,228533,171026,185466,264664,258045,264660,159001,204137,183517,229417,169585,241077,183881,233796,169522,203414,238490,168516,216916,145581,205715,186272,210748,206108,214538,194683,210415,166794,240522,189924,144942,136862,186271,160859,149971,172913,125750,105953,155521,223564,148372,161072,229426,174682,209571,170920,244122,126626,175090,184097,150138,173210,154316,274500,189864,194896,184771,102878,187204,107901,98230,90462,154765,82145,212289,252785,265670,266301,212507,81752,276147,174865,85174,266322,189247,266324,268360,102968,196059,238057,272586,148735,143678,266742,179119,265140,254148,254961,256408,256679,260977,265311,273084,179640,95342,129790,128909,82260,154196,126530,197390,203031,131093,101896,106082,146583,136097,196073,202502,197360,185403,267426,113947,274500]};
        agoda.feSessionId = '2qn5bgqqmyf2m1xwyapjrgk1';
</script>
    <script>
        var whitelabel = whitelabel || {};
            whitelabel.theme = 'theme-agoda';
    </script>



<script type="text/javascript" id="iePolyFill">
    !function (e, n) { "object" == typeof exports && "undefined" != typeof module ? n() : "function" == typeof define && define.amd ? define(n) : n() }(0, function () { "use strict"; function e() { } function n(e) { if (!(this instanceof n)) throw new TypeError("Promises must be constructed via new"); if ("function" != typeof e) throw new TypeError("not a function"); this._state = 0, this._handled = !1, this._value = undefined, this._deferreds = [], f(e, this) } function t(e, t) { for (; 3 === e._state;)e = e._value; 0 !== e._state ? (e._handled = !0, n._immediateFn(function () { var n = 1 === e._state ? t.onFulfilled : t.onRejected; if (null !== n) { var i; try { i = n(e._value) } catch (f) { return void r(t.promise, f) } o(t.promise, i) } else (1 === e._state ? o : r)(t.promise, e._value) })) : e._deferreds.push(t) } function o(e, t) { try { if (t === e) throw new TypeError("A promise cannot be resolved with itself."); if (t && ("object" == typeof t || "function" == typeof t)) { var o = t.then; if (t instanceof n) return e._state = 3, e._value = t, void i(e); if ("function" == typeof o) return void f(function (e, n) { return function () { e.apply(n, arguments) } }(o, t), e) } e._state = 1, e._value = t, i(e) } catch (u) { r(e, u) } } function r(e, n) { e._state = 2, e._value = n, i(e) } function i(e) { 2 === e._state && 0 === e._deferreds.length && n._immediateFn(function () { e._handled || n._unhandledRejectionFn(e._value) }); for (var o = 0, r = e._deferreds.length; r > o; o++)t(e, e._deferreds[o]); e._deferreds = null } function f(e, n) { var t = !1; try { e(function (e) { t || (t = !0, o(n, e)) }, function (e) { t || (t = !0, r(n, e)) }) } catch (i) { if (t) return; t = !0, r(n, i) } } var u = function (e) { var n = this.constructor; return this.then(function (t) { return n.resolve(e()).then(function () { return t }) }, function (t) { return n.resolve(e()).then(function () { return n.reject(t) }) }) }, c = setTimeout; n.prototype["catch"] = function (e) { return this.then(null, e) }, n.prototype.then = function (n, o) { var r = new this.constructor(e); return t(this, new function (e, n, t) { this.onFulfilled = "function" == typeof e ? e : null, this.onRejected = "function" == typeof n ? n : null, this.promise = t }(n, o, r)), r }, n.prototype["finally"] = u, n.all = function (e) { return new n(function (n, t) { function o(e, f) { try { if (f && ("object" == typeof f || "function" == typeof f)) { var u = f.then; if ("function" == typeof u) return void u.call(f, function (n) { o(e, n) }, t) } r[e] = f, 0 == --i && n(r) } catch (c) { t(c) } } if (!e || "undefined" == typeof e.length) throw new TypeError("Promise.all accepts an array"); var r = Array.prototype.slice.call(e); if (0 === r.length) return n([]); for (var i = r.length, f = 0; r.length > f; f++)o(f, r[f]) }) }, n.resolve = function (e) { return e && "object" == typeof e && e.constructor === n ? e : new n(function (n) { n(e) }) }, n.reject = function (e) { return new n(function (n, t) { t(e) }) }, n.race = function (e) { return new n(function (n, t) { for (var o = 0, r = e.length; r > o; o++)e[o].then(n, t) }) }, n._immediateFn = "function" == typeof setImmediate && function (e) { setImmediate(e) } || function (e) { c(e, 0) }, n._unhandledRejectionFn = function (e) { void 0 !== console && console && console.warn("Possible Unhandled Promise Rejection:", e) }; var l = function () { if ("undefined" != typeof self) return self; if ("undefined" != typeof window) return window; if ("undefined" != typeof global) return global; throw Error("unable to locate global object") }(); l.Promise ? l.Promise.prototype["finally"] || (l.Promise.prototype["finally"] = u) : l.Promise = n });
</script>




<script>

</script>



<script type="text/javascript">
    (function(n){"use strict";var t=function(t,i,r){function l(n){if(f.body)return n();setTimeout(function(){l(n)})}function c(){u.addEventListener&&u.removeEventListener("load",c);u.media=r||"all"}var f=n.document,u=f.createElement("link"),e,s,h,o;return i?e=i:(s=(f.body||f.getElementsByTagName("head")[0]).childNodes,e=s[s.length-1]),h=f.styleSheets,u.rel="stylesheet",u.href=t,u.media="only x",l(function(){e.parentNode.insertBefore(u,i?e:e.nextSibling)}),o=function(n){for(var i=u.href,t=h.length;t--;)if(h[t].href===i)return n();setTimeout(function(){o(n)})},u.addEventListener&&u.addEventListener("load",c),u.onloadcssdefined=o,o(c),u};typeof exports!="undefined"?exports.loadCSS=t:n.loadCSS=t})(typeof global!="undefined"?global:this),function(n){var t,i;n.loadCSS&&(t=loadCSS.relpreload={},t.support=function(){try{return n.document.createElement("link").relList.supports("preload")}catch(t){return!1}},t.poly=function(){for(var r=n.document.getElementsByTagName("link"),t,i=0;i<r.length;i++)t=r[i],t.rel==="preload"&&t.getAttribute("as")==="style"&&(n.loadCSS(t.href,t),t.rel=null)},t.support()||(t.poly(),i=n.setInterval(t.poly,300),n.addEventListener&&n.addEventListener("load",function(){t.poly();n.clearInterval(i)}),n.attachEvent&&n.attachEvent("onload",function(){n.clearInterval(i)})))}(this)
</script>

<script></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">

    <meta name="referrer" content="origin-when-cross-origin">

<link rel="manifest" href="/manifest.json">







    <title>Agoda.com: Smarter Hotel Booking</title>
        <meta name="robots" content="noindex, nofollow">
        <meta name="description" content="Agoda.com: Smarter Hotel Booking" data-react-helmet="true">

    <link rel="search" type="application/opensearchdescription+xml" href="//www.agoda.com/ru-ru/opensearch.xml" title="Agoda.com: умное бронирование отелей">
    
        <script src="/Scripts/jquery-1.8.3.min.js" crossorigin="anonymous"></script>
    






    <link rel="stylesheet" href="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/mmb.signin-20b29f129509.css"><link rel="stylesheet" href="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/theme-agoda-dfb6b1f5ee72.css">



<link rel="icon" href="/favicon.ico">
<style data-styled="active" data-styled-version="5.2.1"></style><style type="text/css" data-fbcssmodules="css:fb.css.base css:fb.css.dialog css:fb.css.iframewidget css:fb.css.customer_chat_plugin_iframe">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_dialog_advanced{border-radius:8px;padding:10px}.fb_dialog_content{background:#fff;color:#373737}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{left:5px;right:auto;top:5px}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{height:100%;left:0;margin:0;overflow:visible;position:absolute;top:-10000px;transform:none;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{background:none;height:auto;min-height:initial;min-width:initial;width:auto}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{clear:both;color:#fff;display:block;font-size:18px;padding-top:20px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .4);bottom:0;left:0;min-height:100%;position:absolute;right:0;top:0;width:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_mobile .fb_dialog_iframe{position:sticky;top:0}.fb_dialog_content .dialog_header{background:linear-gradient(from(#738aba), to(#2c4987));border-bottom:1px solid;border-color:#043b87;box-shadow:white 0 1px 1px -1px inset;color:#fff;font:bold 14px Helvetica, sans-serif;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:linear-gradient(from(#4267B2), to(#2a4887));background-clip:padding-box;border:1px solid #29487d;border-radius:3px;display:inline-block;line-height:18px;margin-top:3px;max-width:85px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{background:none;border:none;color:#fff;font:bold 12px Helvetica, sans-serif;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #4a4a4a;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f5f6f7;border:1px solid #4a4a4a;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-position:50% 50%;background-repeat:no-repeat;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}
.fb_mpn_mobile_landing_page_slide_out{animation-duration:200ms;animation-name:fb_mpn_landing_page_slide_out;transition-timing-function:ease-in}.fb_mpn_mobile_landing_page_slide_out_from_left{animation-duration:200ms;animation-name:fb_mpn_landing_page_slide_out_from_left;transition-timing-function:ease-in}.fb_mpn_mobile_landing_page_slide_up{animation-duration:500ms;animation-name:fb_mpn_landing_page_slide_up;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_in{animation-duration:300ms;animation-name:fb_mpn_bounce_in;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_out{animation-duration:300ms;animation-name:fb_mpn_bounce_out;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_out_v2{animation-duration:300ms;animation-name:fb_mpn_fade_out;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_v2{animation-duration:300ms;animation-name:fb_bounce_in_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_from_left{animation-duration:300ms;animation-name:fb_bounce_in_from_left;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_v2{animation-duration:300ms;animation-name:fb_bounce_out_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_from_left{animation-duration:300ms;animation-name:fb_bounce_out_from_left;transition-timing-function:ease-in}.fb_customer_chat_bubble_animated_no_badge{box-shadow:0 3px 12px rgba(0, 0, 0, .15);transition:box-shadow 150ms linear}.fb_customer_chat_bubble_animated_no_badge:hover{box-shadow:0 5px 24px rgba(0, 0, 0, .3)}.fb_customer_chat_bubble_animated_with_badge{box-shadow:-5px 4px 14px rgba(0, 0, 0, .15);transition:box-shadow 150ms linear}.fb_customer_chat_bubble_animated_with_badge:hover{box-shadow:-5px 8px 24px rgba(0, 0, 0, .2)}.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}.fb_new_ui_mobile_overlay_active{overflow:hidden}@keyframes fb_mpn_landing_page_slide_in{0%{border-radius:50%;margin:0 24px;width:60px}40%{border-radius:18px}100%{margin:0 12px;width:100% - 24px}}@keyframes fb_mpn_landing_page_slide_in_from_left{0%{border-radius:50%;left:12px;margin:0 24px;width:60px}40%{border-radius:18px}100%{left:12px;margin:0 12px;width:100% - 24px}}@keyframes fb_mpn_landing_page_slide_out{0%{margin:0 12px;width:100% - 24px}60%{border-radius:18px}100%{border-radius:50%;margin:0 24px;width:60px}}@keyframes fb_mpn_landing_page_slide_out_from_left{0%{left:12px;width:100% - 24px}60%{border-radius:18px}100%{border-radius:50%;left:12px;width:60px}}@keyframes fb_mpn_landing_page_slide_up{0%{bottom:0;opacity:0}100%{bottom:24px;opacity:1}}@keyframes fb_mpn_bounce_in{0%{opacity:.5;top:100%}100%{opacity:1;top:0}}@keyframes fb_mpn_fade_out{0%{bottom:30px;opacity:1}100%{bottom:0;opacity:0}}@keyframes fb_mpn_bounce_out{0%{opacity:1;top:0}100%{opacity:.5;top:100%}}@keyframes fb_bounce_in_v2{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}50%{transform:scale(1.03, 1.03);transform-origin:bottom right}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}}@keyframes fb_bounce_in_from_left{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom left}50%{transform:scale(1.03, 1.03);transform-origin:bottom left}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom left}}@keyframes fb_bounce_out_v2{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}}@keyframes fb_bounce_out_from_left{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom left}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom left}}@keyframes fb_bounce_out_v2_mobile_chat_started{0%{opacity:1;top:0}100%{opacity:0;top:20px}}@keyframes fb_customer_chat_bubble_bounce_in_animation{0%{bottom:6pt;opacity:0;transform:scale(0, 0);transform-origin:center}70%{bottom:18pt;opacity:1;transform:scale(1.2, 1.2)}100%{transform:scale(1, 1)}}@keyframes slideInFromBottom{0%{opacity:.1;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes slideInFromBottomDelay{0%{opacity:0;transform:translateY(100%)}97%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}</style></head>



<body class="mmb-signin desktop DEXP-152 JGCW-163 NHAWEB-2252 PACKAGES-1253 themed theme-agoda ReactModal__Body--noscroll" style="position: fixed; top: 0px; width: 100%;">


<style>
    .CookieWarning {
        position: fixed;
        top: 0;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
    }
    
    .CookieWarning__center {
        text-align: center;
        display: table-cell;
        vertical-align: middle;
        height: 100vh;
        width: 100vw;
    }
    
    .CookieWarning__container {
        width: 400px;
        background: white;
        display: inline-block;
        border-radius: 8px;
        padding: 20px;
    }
    
    .CookieWarning__title {
        font-size: 30px;
        margin: 10px 0;
    }
</style>



<script type="text/javascript">
    function areCookiesEnabled() {
        try {
            document.cookie = 'test_cookie_enabled=1';
            var ret = document.cookie.indexOf('test_cookie_enabled=') !== -1;
            document.cookie = 'test_cookie_enabled=1; expires=Thu, 01-Jan-1970 00:00:01 GMT';
            return ret;
        }
        catch (e) {
            return false;
        }
    }

    if (!areCookiesEnabled()) {
        document.body.insertAdjacentHTML('beforeend', "\u003cdiv class=\"CookieWarning\"\u003e \u003cdiv class=\"CookieWarning__center\"\u003e \u003cdiv class=\"CookieWarning__container\"\u003e \u003cp class=\"CookieWarning__title\"\u003eТребуется использование файлов cookie\u003c/p\u003e \u003cp\u003eУ вас отключены файлы cookie. Чтобы продолжить, включите файлы cookie в настройках браузера.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e");
    }
</script>

    <div id="css-dummy"></div>

<script>
    window.agoda = window.agoda || {};
    
    window.agoda.bVariantsConfig = {
        expids: [],
        unseenExpids: {},
        endpoint: '/api/cronos/layout/unseenexperiments/send',
        expiry: 0
    };

            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-1437") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-1437");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-1624") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-1624");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-1672") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-1672");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-1520") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-1520");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-1520-CSS") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-1520-CSS");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-1693") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-1693");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-1743") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-1743");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("FEDATA-MCJS-SWITCH") === -1)
                    window.agoda.bVariantsConfig.expids.push("FEDATA-MCJS-SWITCH");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("FEDATA-AF-SWITCH") === -1)
                    window.agoda.bVariantsConfig.expids.push("FEDATA-AF-SWITCH");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("FEDATA-AF2") === -1)
                    window.agoda.bVariantsConfig.expids.push("FEDATA-AF2");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-211") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-211");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-877") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-877");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("ATP-843") === -1)
                    window.agoda.bVariantsConfig.expids.push("ATP-843");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("ATP-1193") === -1)
                    window.agoda.bVariantsConfig.expids.push("ATP-1193");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("UMRAH-B2C-REGIONAL") === -1)
                    window.agoda.bVariantsConfig.expids.push("UMRAH-B2C-REGIONAL");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("UMRAH-B2B") === -1)
                    window.agoda.bVariantsConfig.expids.push("UMRAH-B2B");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("WLSI-2055") === -1)
                    window.agoda.bVariantsConfig.expids.push("WLSI-2055");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("OPA-579") === -1)
                    window.agoda.bVariantsConfig.expids.push("OPA-579");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("OPA-620") === -1)
                    window.agoda.bVariantsConfig.expids.push("OPA-620");
            
            
                if (window.agoda.bVariantsConfig.expids.indexOf("OPA-630") === -1)
                    window.agoda.bVariantsConfig.expids.push("OPA-630");
            
                
                if (typeof(window.agoda.bVariantsConfig.unseenExpids["jgcw-web"]) === 'undefined')
                    window.agoda.bVariantsConfig.unseenExpids["jgcw-web"] = true;
            
            
                if (typeof(window.agoda.bVariantsConfig.unseenExpids["login-4217"]) === 'undefined')
                    window.agoda.bVariantsConfig.unseenExpids["login-4217"] = false;
            
            
                if (typeof(window.agoda.bVariantsConfig.unseenExpids["text-3995"]) === 'undefined')
                    window.agoda.bVariantsConfig.unseenExpids["text-3995"] = false;
            
            
                if (typeof(window.agoda.bVariantsConfig.unseenExpids["wfapi-1339"]) === 'undefined')
                    window.agoda.bVariantsConfig.unseenExpids["wfapi-1339"] = false;
            
            
                if (typeof(window.agoda.bVariantsConfig.unseenExpids["ual-354"]) === 'undefined')
                    window.agoda.bVariantsConfig.unseenExpids["ual-354"] = true;
            
</script>

    <input type="hidden" name="mockDataEnabled" id="mockDataEnabled" value="False">
    <div class="hide" id="page-identification" data-page="mmb-signin" data-device="desktop"></div>
    <div id="hidden-routeinfo" class="hide" data-language-id="11" data-real-language-id="11" data-origin="BY" data-culture="ru-ru" data-store-front-id="3" data-page-type-id="980" data-language-domain="" data-url-version=""></div>

    
    



<input id="requestVerificationToken" name="requestVerificationToken" type="hidden" value="LottaE2a6im9RW0zMniZCY--ifB4yqQRWeRdZtUYYK7u2PcTLdpGbPj_0978Sqsvy_dd5dxN5thAANe6CRhKIVAaGB01:PR6kdthKvBhcI4lT4jW901iVmR3ibNJsllc1vqk8fE8Cc4UuPOiXdyagSmSS94-KLwQrYRMFt7QYmhux-AK-akmg5vY1">    <header id="page-header" data-selenium="page-header" class="navbar-agoda main-header main-header-ie9 scrollTo    "><div><section class="header-container" data-selenium="header-container-section"><nav class="header-container__item header-container__item--left LogoAndLinksMenu"><div class="LogoAndLinksMenu__LogoContainer"><a href="/ru-ru/" class="LogoAndLinksMenu__Link" data-selenium="agoda-logo" data-element-name="agoda-logo"><div class="sc-bdfBwQ gyBPkc"><div class="sc-bdfBwQ bEndlp"><img src="https://cdn6.agoda.net/images/kite-js/logo/agoda/color-default.svg" width="100%" height="100%" alt=""></div></div><img src="https://cdn6.agoda.net/images/MVC/default/logo-ru.svg" class="LogoAndLinksMenu__SecondaryLogo LogoAndLinksMenu__SecondaryLogo--loaded" data-element-value="[NA]" data-provider-id="0" data-element-index="0"></a></div><ul class="LinkContainer"><li class="LinkContainer__LinkWrapper" data-selenium="header-link"><a href="/ru-ru/" target="_blank" class="LinkContainer__Link" data-selenium="header-hotels" data-element-name="header-hotels-links"><span class="LinkContainer__Link__text">Отели и жилье</span></a></li><li class="LinkContainer__LinkWrapper" data-selenium="header-link"><a href="https://flights.agoda.com/in?lc=ru&amp;cc=ru&amp;url=%2fflights&amp;mc=USD&amp;p=header" target="_blank" class="LinkContainer__Link" data-selenium="header-flights" data-element-name="header-flights-links"><span class="LinkContainer__Link__text">Авиабилеты</span></a></li><li class="LinkContainer__LinkWrapper" data-selenium="header-link"><a href="https://agoda.mozio.com/ru-ru?currency=USD&amp;ref=agoda&amp;utm_campaign=1793794&amp;utm_source=1793794" target="_blank" class="LinkContainer__Link" data-selenium="header-taxi" data-element-name="header-taxi-links"><span class="LinkContainer__Link__text">Трансфер</span></a></li><li class="LinkContainer__LinkWrapper" data-selenium="header-link"><a href="/ru-ru/deals?option=signup&amp;amp;ottoken=eyJhbGciOiJBMjU2S1ciLCJlbmMiOiJBMjU2Q0JDLUhTNTEyIn0.cicfnJvJqFJZjLW0BEr0m3cUDXcpwdSrO8v1peR4mgCpV6KVZWr41QVR_zjzeUMPRPz5bASMkhmSOW_vwPRbSPpXo5g_vBYH.NWOr9laC3UKHjM9J5eqbtQ.H8OWWcikEpBRP1Tpy6OWVloxkvieJSEnbaZuP3V_gzO4LYT31S6Ghe8mjjIeNjEW.EmxUronTKTmSRSMAe2bjzuqX1VHw3bRghpCn9eYrBFM&amp;amp;returnurl=%2F" target="_blank" class="LinkContainer__Link" data-selenium="header-deals" data-element-name="header-deals-links"><span class="LinkContainer__Link__text">Текущие предложения</span></a></li><li class="LinkContainer__LinkWrapper" data-selenium="header-link"><a href="/ru-ru/apartments" target="_blank" class="LinkContainer__Link" data-selenium="header-apartments" data-element-name="header-apartments-links"><i class="LinkContainer__Link__icon ficon ficon-18 ficon-agoda-homes"></i><span class="LinkContainer__Link__text">Апартаменты</span></a></li></ul><div class="EllipsisLinkContainer"><i class="EllipsisLinkContainer__Button ficon ficon-21 ficon-show-more" data-selenium="ellipsisLink-container"></i></div></nav><span class="header-container__space"></span><nav class="header-container__item header-container__item--right"><ul class="header-menu header-menu--reverse-order header-menu--master" data-selenium="navigation"><li class="header-menu__group"><div class="header-menu__subgroup-container header-menu__subgroup-container--login-group" data-selenium=""><span class="header-menu__group-header">Войдите</span><ul class="header-menu__subgroup"><li class="header-menu__item"><button id="sign-in-btn" data-popup="new-header" data-element-name="sign-in-button" data-selenium="sign-in" data-link="signin-popup" data-login-action="signin" data-login-id="2" class="sc-dQppl ccZdnd global-header-signin-button" color="primary"><div class="sc-crrsfI errNK"><div class="sc-bdfBwQ gNRfUM"><span class="sc-jSgupP vNlPk">Войти</span></div></div></button></li><li class="header-menu__item"><button id="sign-up-btn" data-popup="new-header-signup" data-element-name="sign-up-button" data-selenium="sign-up-btn" data-link="signin-popup" data-login-action="signup" data-login-id="3" class="sc-dQppl jYKOye global-header-signup-button" color="primary"><div class="sc-crrsfI errNK"><div class="sc-bdfBwQ gNRfUM"><span class="sc-jSgupP vNlPk">Создать аккаунт</span></div></div></button></li></ul></div></li><li class="header-menu__group"><div class="header-menu__subgroup-container header-menu__subgroup-container--lc-group" data-selenium="lc-group"><span class="header-menu__group-header">Настройки</span><ul class="header-menu__subgroup"><li class="header-menu__item"><div><a class="language-trigger" data-value="ru-ru" data-selenium="language-trigger" data-element-name="language-trigger"><i class="language-trigger__icon flag flag-18 flag-18-ru"></i><span class="language-trigger__text">Русский</span></a></div></li><li class="header-menu__item"><div><a class="currency-trigger" data-selenium="currency-trigger" data-element-name="currency-trigger"><span class="currency-trigger__text">$</span><span class="currency-trigger__secondary-text">Доллар США</span></a></div></li></ul></div></li><li class="header-menu__group"><div class="header-menu__subgroup-container header-menu__subgroup-container--lp-group" data-selenium="lp-group"><span class="header-menu__group-header">Сдача жилья на Agoda</span><ul class="header-menu__subgroup"><li class="header-menu__item"><button class="sc-dQppl jYKOye ListYourProperty__Btn" data-selenium="list-your-place-btn" data-element-name="header-list-your-place-button" color="primary"><div class="sc-crrsfI errNK"><div class="sc-bdfBwQ gNRfUM"><span class="sc-jSgupP vNlPk">Сдать жилье</span></div></div></button><span class="ListYourProperty__Detail">Зарабатывайте на аренде и путешествуйте!</span><a href="/homes/ru-ru/propertyWizard?cid=1828703" target="_blank" class="ListYourProperty__Link" data-selenium="list-your-property-menu" data-element-name="list-your-place-links"><span> Сдать жилье сейчас </span></a></li></ul></div></li></ul><span class="header-menu__slave header-menu__slave--hamburger hidden"><div><i class="header-dropdown__hamburger ficon ficon-20 ficon-hamburger-menu" data-element-name="header-hamburger-menu" data-selenium="header-hamburger-menu"></i><ul class="header-menu header-menu--slave hidden" data-selenium="nav-menu-slave"></ul></div></span></nav></section></div></header>




    <script type="text/javascript">
        var _ga = _ga || {};
        _ga.source = "Direct Access";
        _ga.medium = "Direct Access";
    </script> 
    


<div id="pointsmax-panel-react-root" data-hotel-id="" data-signin-landing=""></div>
<script type="text/javascript">
    window.pointsMaxParams = {
        cms: {
            title: "Выбор программы лояльности",
            subTitle: "Укажите вашу программу лояльности, чтобы получать мили или баллы за бронирования на Agoda.",
            searchPlaceHolder: "Найти программу лояльности",
            linkYourAccount: "Привязка аккаунта",
            rewardProgram: "Программа лояльности",
            change: "Изменить",
            membershipNumber: "Номер участника",
            formatSample: "например, {0}",
            cancel: "Указать позже",
            save : "Сохранить",
            edit : "Изменить",
            turnOff : "Отключить",
        },
        selectedPrograms: null,
        allActivePrograms: [{"programId":12,"programName":"AirAsia BIG ","translatedProgramName":"AirAsia BIG","partnerUrl":"/airasiabig","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/AirAsia/AirAsia-Big-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/AirAsia/AirAsia-Big-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/AirAsia/AirAsia-Big-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/AirAsia/AirAsia-Big-biglogo-desktop_v1@2x.png","memberIdPattern":"2142255091","regex":"^\\d{10,16}$"},{"programId":11,"programName":"American Airlines AAdvantage","translatedProgramName":"American Airlines Aadvantage","partnerUrl":"/aadvantage","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/AmericanAirlines/AmericanAirlines-AAdvantage-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/AmericanAirlines/AmericanAirlines-AAdvantage-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/AmericanAirlines/AmericanAirlines-AAdvantage-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/AmericanAirlines/AmericanAirlines-AAdvantage-biglogo-desktop_v1@2x.png","memberIdPattern":"3B66WL1","regex":"^\\w{7}$"},{"programId":13,"programName":"Asia Miles","translatedProgramName":"Asia Miles","partnerUrl":"/asiamiles","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/AsiaMiles/Asia-Miles-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/AsiaMiles/Asia-Miles-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/AsiaMiles_New/Asia-Miles-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/AsiaMiles_New/Asia-Miles-biglogo-desktop_v1@2x.png","memberIdPattern":"1550701119","regex":"^\\d{10}$"},{"programId":75,"programName":"Asiana Airlines Mileage","translatedProgramName":"Asiana Airlines Mileage","partnerUrl":"/asiana","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/Asiana/asiana-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/Asiana/asiana-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/Asiana/asiana-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/Asiana/asiana-biglogo-desktop_v1@2x.png","memberIdPattern":"123456789","regex":"^\\d{9}$"},{"programId":65,"programName":"BonusLink","translatedProgramName":"BonusLink","partnerUrl":"/bonuslink","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/BonusLink/BonusLink-Points-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/BonusLink/BonusLink-Points-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/BonusLink/BonusLink-Points-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/BonusLink/BonusLink-Points-biglogo-desktop_v1@2x.png","memberIdPattern":"6018XXXXXXXXXXXX","regex":"^6018\\d{12}$"},{"programId":41,"programName":"British Airways Executive Club","translatedProgramName":"British Airways Executive Club","partnerUrl":"/britishairways","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/BritishAirways/BritishAirways-ExecutiveClub-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/BritishAirways/BritishAirways-ExecutiveClub-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/BritishAirways/BritishAirways-ExecutiveClub-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/BritishAirways/BritishAirways-ExecutiveClub-biglogo-desktop_v1@2x.png","memberIdPattern":"XXXXXXXX","regex":"^\\d{8}$"},{"programId":38,"programName":"Etihad Guest","translatedProgramName":"Etihad Airways – Etihad Guest","partnerUrl":"/etihadguest","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/Etihad/Eithad-Guest-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/Etihad/Eithad-Guest-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/Etihad/Eithad-Guest-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/Etihad/Eithad-Guest-biglogo-desktop_v1@2x.png","memberIdPattern":"10XXXXXXXXXX","regex":"^10\\d{10}$"},{"programId":80,"programName":"Fly Buys NZ","translatedProgramName":"Fly Buys NZ","partnerUrl":"/Flybuysnz","imageUrl":"https://cdn6.agoda.net/images/blt2/SP/BLTMigration/FlyBuys_Small logo_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/blt2/SP/BLTMigration/FlyBuys_Small logo_v2.png","bigImageUrl":"/images/blt2/SP/BLTMigration/FlyBuys_Big Logo_v1.png","bigImageUrl2X":"/images/blt2/SP/BLTMigration/FlyBuys_Big Logo_v2.png","memberIdPattern":"1234567890123456","regex":"^\\d{16}$"},{"programId":77,"programName":"FlyerBonus","translatedProgramName":"FlyerBonus","partnerUrl":"/flyerbonus","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/FlyerBonus/default/FlyerBonus-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/FlyerBonus/default/FlyerBonus-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/FlyerBonus/default/FlyerBonus-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/FlyerBonus/default/FlyerBonus-biglogo-desktop_v1@2x.png","memberIdPattern":"12345678","regex":"^\\d{8}$"},{"programId":62,"programName":"FlyingBlue","translatedProgramName":"Flying Blue","partnerUrl":"/flyingblue","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/FlyingBlue/Flying-Blue-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/FlyingBlue/Flying-Blue-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/FlyingBlue/Flying-Blue-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/FlyingBlue/Flying-Blue-biglogo-desktop_v1@2x.png","memberIdPattern":"XXXXXXXXXX","regex":"^\\d{10}$"},{"programId":78,"programName":"Hongkong Airlines FWC","translatedProgramName":"HongKong Airlines FWC","partnerUrl":"/fwchk","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/HongKongAirlines/fwchk-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/HongKongAirlines/fwchk-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/HongKongAirlines/fwchk-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/HongKongAirlines/fwchk-biglogo-desktop_v1@2x.png","memberIdPattern":"1234567890","regex":"^\\d{10}$"},{"programId":42,"programName":"Iberia Plus","translatedProgramName":"Iberia Plus","partnerUrl":"/iberiaplus","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/IberiaPlus/Iberia-Plus-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/IberiaPlus/Iberia-Plus-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/IberiaPlus/Iberia-Plus-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/IberiaPlus/Iberia-Plus-biglogo-desktop_v1@2x.png","memberIdPattern":"XXXXXXXX","regex":"^\\d{8}$"},{"programId":76,"programName":"L.POINT","translatedProgramName":"L.POINT","partnerUrl":"/lpoint","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/L-Point/Lpoint-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/L-Point/Lpoint-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/L-Point/Lpoint-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/L-Point/Lpoint-biglogo-desktop_v1@2x.png","memberIdPattern":"123456789012345","regex":"^\\d{16}$"},{"programId":14,"programName":"Malaysia Airlines Enrich","translatedProgramName":"Malaysia Airlines Enrich","partnerUrl":"/malaysiaairlines","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/MalaysiaEnrich/MalaysiaAirlines-EnrichMiles-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/MalaysiaEnrich/MalaysiaAirlines-EnrichMiles-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/MalaysiaEnrich/MalaysiaAirlines-EnrichMiles-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/MalaysiaEnrich/MalaysiaAirlines-EnrichMiles-biglogo-desktop_v1@2x.png","memberIdPattern":"MHXXXXXXXXX","regex":"^MH\\d{9}$"},{"programId":33,"programName":"Philippine Airlines Mabuhay Miles","translatedProgramName":"Philippine Airlines Mabuhay Miles","partnerUrl":"/mabuhaymiles","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/PhilippineAirlines/PhilippineAirlines-MabuhayMiles-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/PhilippineAirlines/PhilippineAirlines-MabuhayMiles-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/PhilippineAirlines/PhilippineAirlines-MabuhayMiles-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/PhilippineAirlines/PhilippineAirlines-MabuhayMiles-biglogo-desktop_v1@2x.png","memberIdPattern":"500166088","regex":"^\\d{9}$"},{"programId":31,"programName":"KrisFlyer","translatedProgramName":"Singapore Airlines KrisFlyer","partnerUrl":"/krisflyer","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/SingaporeAirline/SingaporeAirline-KrisFlyer-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/SingaporeAirline/SingaporeAirline-KrisFlyer-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/SingaporeAirline/SingaporeAirline-KrisFlyer-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/SingaporeAirline/SingaporeAirline-KrisFlyer-biglogo-desktop_v1@2x.png","memberIdPattern":"8795518354","regex":"^\\d{10}$"},{"programId":37,"programName":"SM Advantage / BDO Rewards","translatedProgramName":"SM Advantage/ BDO Rewards","partnerUrl":"/smadvantage","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/SMAC/SMadvantage-BDOrewards-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/SMAC/SMadvantage-BDOrewards-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/SMAC/SMadvantage-BDOrewards-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/SMAC/SMadvantage-BDOrewards-biglogo-desktop_v1@2x.png","memberIdPattern":"8880877115540716","regex":"^\\d{16}$"},{"programId":86,"programName":"SM Advantage (SMAC Prestige)","translatedProgramName":"SMAC Prestige","partnerUrl":"/prestigeffpmax","imageUrl":"https://cdn6.agoda.net/images/blt2/SP/BLTMigration/SMAC_Small logo_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/blt2/SP/BLTMigration/SMAC_Small logo_v2.png","bigImageUrl":"/images/blt2/SP/BLTMigration/SMAC_Big Logo_v1.png","bigImageUrl2X":"/images/blt2/SP/BLTMigration/SMAC_Big Logo_v2.png","memberIdPattern":"","regex":""},{"programId":87,"programName":"SM Advantage (smacstart)","translatedProgramName":"SMAC Start","partnerUrl":"/smacstart","imageUrl":"https://cdn6.agoda.net/images/blt2/SP/BLTMigration/SMAC_Small logo_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/blt2/SP/BLTMigration/SMAC_Small logo_v2.png","bigImageUrl":"/images/blt2/SP/BLTMigration/SMAC_Big Logo_v1.png","bigImageUrl2X":"/images/blt2/SP/BLTMigration/SMAC_Big Logo_v2.png","memberIdPattern":"","regex":""},{"programId":32,"programName":"Thai Airways Royal Orchid Plus","translatedProgramName":"Thai Airways Royal Orchid Plus","partnerUrl":"/royalorchidplus","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/ROP/ThaiAirways-RoyalOrchidPlus-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/ROP/ThaiAirways-RoyalOrchidPlus-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/ROP/ThaiAirways-RoyalOrchidPlus-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/ROP/ThaiAirways-RoyalOrchidPlus-biglogo-desktop_v1@2x.png","memberIdPattern":"TG00995","regex":"^[a-zA-Z]{2}\\d{5}$"},{"programId":51,"programName":"The 1 Card","translatedProgramName":"The 1 Card Thailand","partnerUrl":"/the1","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/The1Card/The1Card-Points-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/The1Card/The1Card-Points-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/The1Card/The1Card-Points-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/The1Card/The1Card-Points-biglogo-desktop_v1@2x.png","memberIdPattern":"8700160622","regex":"^\\d{10}$"},{"programId":74,"programName":"WAON POINT","translatedProgramName":"WAON POINT","partnerUrl":"/aeonpmx","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/WaonPoint/WaonPoint-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/WaonPoint/WaonPoint-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/WaonPoint/WaonPoint-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/WaonPoint/WaonPoint-biglogo-desktop_v1@2x.png","memberIdPattern":"6900123456789012 / 1000123456789012","regex":"^WP\\d{14}$|^1000\\d{12}$|^69\\d{14}$"},{"programId":53,"programName":"GetGo","translatedProgramName":"Бонусные баллы GetGo от Cebu Pacific","partnerUrl":"/getgo","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/CebuPacificGetGo/CebuPacific-GetGo-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/CebuPacificGetGo/CebuPacific-GetGo-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/CebuPacificGetGo/CebuPacific-GetGo-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/CebuPacificGetGo/CebuPacific-GetGo-biglogo-desktop_v1@2x.png","memberIdPattern":"XXXXXXXXXX","regex":"^\\d{10}$"},{"programId":44,"programName":"Avios","translatedProgramName":"Программа вознаграждения путешественников Avios","partnerUrl":"/avios","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/Avios/Avios-Rewards-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/Avios/Avios-Rewards-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/Avios/Avios-Rewards-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/Avios/Avios-Rewards-biglogo-desktop_v1@2x.png","memberIdPattern":"308147XXXXXXXXXX","regex":"^\\d{16}$"},{"programId":39,"programName":"Velocity Frequent Flyer","translatedProgramName":"Часто летающий пассажир Velocity","partnerUrl":"/velocity","imageUrl":"https://cdn6.agoda.net/images/mvc/PointsMAX/Velocity/VirginAustralia-VelocityFrequentFlyer-smalllogo-desktop_v1.png","imageUrl2X":"https://cdn6.agoda.net/images/mvc/PointsMAX/Velocity/VirginAustralia-VelocityFrequentFlyer-smalllogo-desktop_v1@2x.png","bigImageUrl":"/images/mvc/PointsMAX/NewBigLogo/Velocity_New/VirginAustralia-VelocityFrequentFlyer-biglogo-desktop_v1.png","bigImageUrl2X":"/images/mvc/PointsMAX/NewBigLogo/Velocity_New/VirginAustralia-VelocityFrequentFlyer-biglogo-desktop_v1@2x.png","memberIdPattern":"2144847722","regex":"^\\d{10}$"}],
        isRenderPointsMaxPopupReact: true,
        shouldFetchCronos: false,
    };
</script>



<div id="signin-popup" class="LOGIN-CSS" role="dialog" data-selenium="signin-popup">
    <div class="modal modal-link-account-ask-password facebook-login" id="link-account-ask-password-panel">
    <div class="vertical-alignment-helper">
        <div class="modal-dialog vertical-alignment-center">
            <div id="link-account-ask-password-content" class="popup-login modal-content modal-content" data-selenium="link-account-ask-password-panel">
                <div class="modal-header" data-selenium="link-account-ask-password-panel-header">
                    <i class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="link-account-ask-password-close-icon"></i>
                    <dl>
                        <dd id="respond-technical-issue" class="respond-warning" data-selenium="link-account-ask-password-respond-technical-issue">Возникли технические неполадки.</dd>
                        <dd id="respond-password-issue" class="respond-warning" data-selenium="link-account-ask-password-respond-password-issue">
                            Указанный вами пароль является неправильным.
                            <a href="/account/signin.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" data-selenium="forget-password">Нажмите здесь, чтобы получить новый пароль</a>
                        </dd>
                        <dd>
                            Для <b id="link-account-email" data-selenium="link-account-email"></b> уже существует аккаунт Agoda.
                        </dd>
                        <br class="seperate-space">
                        <dd>
                            Введите ваш пароль Agoda для того, чтобы подключить аккаунт Facebook. Вам понадобиться сделать это только один раз.
                        </dd>
                    </dl>
                </div>
                <div class="modal-body" data-selenium="link-account-ask-password-panel-body">
                    <dl class="form-group">
                        <dt><label for="link-account-ask-password-input" id="link-account-ask-password-submit-label" data-selenium="link-account-ask-password-submit-label">Пароль</label></dt>
                        <dd>
                            <input type="password" class="form-control" id="link-account-ask-password-input" tabindex="115" data-selenium="link-account-ask-password-input" maxlength="64">
                            <p id="link-account-ask-password-submit-blank" class="feedback-warning" data-selenium="link-account-ask-password-submit-blank">
                                Необходимо ввести пароль.
                            </p>
                            <p id="link-account-ask-password-submit-break-rule" class="feedback-warning" data-selenium="link-account-ask-password-submit-too-short">
                                Пароль чувствителен к регистру и должен состоять как минимум из 8 знаков.
                            </p>
                            <p class="forgot-password-container-left"><a id="link-account-forget-password-link" class="forgot-password" href="#" data-selenium="link-account-forget-password-link">Забыли пароль?</a></p>
                        </dd>
                    </dl>
                    <ul class="form-group" data-selenium="link-account-ask-password-action-panel">
                        <li>
                            <i id="link-account-ask-password-loading-icon" class="link-account-ask-password-loading-icon" data-selenium="link-account-ask-password-loading-icon"></i>
                            <input type="submit" value="Продолжить" class="btn btn-primary btn-continue" id="link-account-ask-password-submit-button" data-selenium="link-account-ask-password-submit-button" tabindex="116">
                        </li>
                    </ul>
                </div>
                <div class="modal-footer ask-password-footer" data-selenium="link-account-ask-password-panel-footer">                 
                    <dl>
                        <dd>
                            Используете другой адрес электронной почты для вашего аккаунта Agoda? <a id="switch-account-action" class="toggle-link" data-selenium="link-account-switch-account-action">Нажмите здесь, чтобы сменить аккаунт.</a>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal modal-link-account-ask-password facebook-login" id="link-account-ask-email-panel">
    <div class="vertical-alignment-helper">
        <div class="link-account modal-dialog vertical-alignment-center">
            <div id="link-account-ask-email-content" class="popup-login modal-content modal-content" data-selenium="link-account-ask-email-content">
                <i class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="link-account-ask-email-close-icon"></i>
                <div class="modal-header" data-selenium="link-account-ask-email-panel-header">
                   <div class="red-box" data-selenium="link-account-ask-email-message">
                       Мы не можем найти адрес электронной почты, подключенный к вашему аккаунту Facebook. Пожалуйста, введите адрес электронной почты для создания аккаунта Agoda.
                   </div>
                    <div id="link-account-ask-email-technical-difficulties-issue" class="respond-warning" data-selenium="ask-signin-respond-technical-difficulties-issue" style="display: none;">
                        Возникли технические неполадки.
                    </div>
                </div>
                <div id="link-account-ask-email-panel-body" class="modal-body" data-selenium="link-account-ask-email-panel-body">
                    <dl class="form-group">
                        <dt><label for="link-account-ask-password-input" id="link-account-ask-email-submit-label" data-selenium="link-account-ask-email-submit-label">Используя адрес электронной почты</label></dt>
                        <dd>
                            <input type="text" class="form-control" id="link-account-ask-email-input" tabindex="110" data-selenium="link-account-ask-email-input" maxlength="64">
                            <div id="link-account-ask-email-submit-blank" class="feedback-warning" data-selenium="link-account-ask-email-blank">
                                Необходимо указать Email.
                            </div>
                            <div id="link-account-ask-email-submit-format" class="feedback-warning" data-selenium="link-account-ask-email-invalid">
                                Формат Адреса Электронной Почты недопустим
                            </div>
                        </dd>
                    </dl>
                </div>
                <div class="modal-footer ask-email-footer" data-selenium="link-account-ask-email-panel-footer">
                    <ul class="form-group text-center" data-selenium="link-account-ask-email-action-panel">
                        <li class="topmargin56">
                            <i id="link-account-ask-email-loading-icon" class="link-account-ask-email-loading-icon" data-selenium="link-account-ask-email-loading-icon"></i>
                            <input type="submit" value="Продолжить" class="btn btn-primary" id="link-account-ask-email-submit-button" data-selenium="link-account-ask-email-submit-button" tabindex="111">
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal modal-signin facebook-login" id="link-account-ask-name-panel">
    <div class="vertical-alignment-helper">
        <div class="link-account modal-dialog vertical-alignment-center">
            <div id="link-account-ask-name-content" class="popup-login modal-content modal-content" data-selenium="link-account-ask-name-content">
                <i class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="link-account-ask-name-close-icon"></i>
                <div class="modal-header" data-selenium="link-account-ask-name-panel-header">
                    <div id="link-account-ask-name-techincal-difficulties" class="respond-warning" data-selenium="link-account-ask-name-respond-technical-issue" style="display: none;">Возникли технические неполадки.</div>
                    <p data-selenium="link-account-ask-name-message">
                        Мы создадим для вас аккаунт и свяжем его с вашей учетной записью на Facebook. После этого вы сможете входить в свой аккаунт через Facebook или при помощи вновь созданных учетных данных.
                    </p>
                    
                    <p data-selenium="link-account-ask-name-email">
                        Адрес эл. почты : <b id="link-account-ask-name-email" data-selenium="link-account-ask-name-email"></b>
                    </p>
                </div>
                <div class="modal-body" data-selenium="link-account-ask-name-panel-body">
                    <dl class="form-group">
                        <dt><label for="link-account-ask-frstname-input" id="link-account-ask-name-firstname-submit-label" data-selenium="link-account-ask-name-firstname-submit-label">Имя</label></dt>
                        <dd>
                            <input type="text" class="form-control" id="link-account-ask-name-firstname-input" tabindex="120" data-selenium="link-account-ask-name-firstname-input" maxlength="64">
                            <div id="link-account-ask-name-firstname-blank" class="feedback-warning" data-selenium="link-account-ask-name-firstname-blank">
                                Необходимо ввести имя.
                            </div>
                            <div id="link-account-ask-name-firstname-in-english" class="feedback-warning" data-selenium="link-account-ask-name-firstname-in-english">
                                Пожалуйста, вводите текст только английскими буквами.
                            </div>
                        </dd>
                    </dl>
                    <dl class="form-group">
                        <dt>
                            <label for="link-account-ask-lastname-input" id="link-account-ask-name-lastname-submit-label" data-selenium="link-account-ask-name-lastname-submit-label">Фамилия</label>
                        </dt>
                        <dd>
                            <input type="text" class="form-control" id="link-account-ask-name-lastname-input" tabindex="121" data-selenium="link-account-ask-name-lastname-input" maxlength="64">
                            <div id="link-account-ask-name-lastname-blank" class="feedback-warning" data-selenium="link-account-ask-name-lastname-blank">
                                Необходимо ввести фамилию.
                            </div>
                            <div id="link-account-ask-name-lastname-in-english" class="feedback-warning" data-selenium="link-account-ask-name-lastname-in-english">
                                Пожалуйста, вводите текст только английскими буквами.
                            </div>
                        </dd>
                    </dl>
                    <ul class="form-group text-center" data-selenium="link-account-ask-name-action-panel">
                        <li>
                            <i id="link-account-ask-name-loading-icon" class="link-account-ask-name-loading-icon" data-selenium="link-account-ask-password-loading-icon"></i>
                            <input type="submit" value="Продолжить" class="btn btn-primary" id="link-account-ask-name-submit-button" data-selenium="link-account-ask-name-submit-button" tabindex="122">
                        </li>
                    </ul>
                </div>
                <div class="modal-footer ask-name-footer" data-selenium="link-account-ask-name-panel-footer">
                    <span>
                        У вас уже есть аккаунт? <a id="link-account-ask-name-signin" data-selenium="link-account-ask-name-signin" href="#"><b>Нажмите здесь, чтобы войти и подключить к Facebook.</b></a>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal modal-signin facebook-login" id="ask-signin-panel">
    <div class="vertical-alignment-helper">
        <div class="link-account modal-dialog vertical-alignment-center">
            <div id="ask-signin-content" class="popup-login modal-content" data-selenium="ask-signin-panel">
                <div class="modal-header" data-selenium="ask-signin-panel-header">
                    <i class="ficon ficon-16 ficon-x-icon close" data-selenium="ask-signin-close-icon" data-dismiss="modal" aria-label="Close"></i>
                    <h5 class="modal-title" data-selenium="ask-signin-header-text">Войдите для того, чтобы подключить ваш аккаунт Agoda к вашему аккаунту Facebook.</h5>
                </div>
                <div id="ask-signin-panel-body" class="modal-body" data-selenium="ask-signin-panel-body">
                    <div id="ask-signin-respond-technical-difficulties-issue" class="respond-warning" data-selenium="ask-signin-respond-technical-difficulties-issue">
                        Возникли технические неполадки.
                    </div>
                    <div id="ask-signin-respond-warning-email-password-incorrect" class="respond-warning" data-selenium="ask-signin-email-password-incorect">
                        Неправильный адрес эл. почты или пароль.
                        <a href="/account/signin.html?option=reset-password" data-selenium="forget-password-link">Нажмите здесь, чтобы получить новый пароль</a>
                    </div>
                    <div id="ask-sign-in-alert-info-before-contact-host" class="alert alert-info" data-selenium="ask-sign-in-alert-info-before-contact-host" style="display:none;">
                        Пожалуйста, войдите в систему, чтобы мы могли ответить вам.
                    </div>
                    <dl class="form-group">
                        <dt><label for="ask-signin-email-input" id="ask-signin-email-label" data-selenium="ask-signin-email-label">Эл. почта</label></dt>
                        <dd>
                            <input type="text" class="form-control" id="ask-signin-email-input" tabindex="101" data-selenium="ask-signin-email-input" maxlength="64">
                            <div id="ask-signin-email-blank" class="feedback-warning" data-selenium="ask-signin-email-blank">
                                Необходимо указать Email.
                            </div>
                            <div id="ask-signin-email-wrong-format" class="feedback-warning" data-selenium="ask-signin-email-wrong-format">
                                Формат Адреса Электронной Почты недопустим
                            </div>
                        </dd>
                    </dl>
                    <dl class="form-group">
                        <dt><label for="ask-signin-password-input" id="ask-signin-password-label" data-selenium="ask-signin-password-label">Пароль</label></dt>
                        <dd>
                            <input type="password" class="form-control" id="ask-signin-password-input" tabindex="102" data-selenium="ask-signin-password-input" maxlength="64">
                            <div id="ask-signin-password-blank" class="feedback-warning" data-selenium="ask-signin-password-blank">
                                Необходимо ввести пароль.
                            </div>
                        </dd>
                    </dl>
                    <ul class="form-group text-center" data-selenium="ask-signin-action-panel">
                        <li>
                            <i id="ask-signin-loading-icon" class="ask-signin-loading-icon" data-selenium="ask-signin-loading-icon"></i>
                            <input type="submit" value="Войти и связать мои аккаунты" class="btn btn-primary" id="ask-signin-submit-button" data-selenium="ask-signin-submit-button" tabindex="103">
                        </li>
                        <li>
                            <div class="forgot-password-container"><a id="ask-signin-forget-password-link" class="forgot-password" href="#" data-selenium="ask-signin-forget-password-link">Забыли пароль?</a></div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal modal-link-account-ask-password facebook-login" id="link-account-cannot-link-panel">
    <div class="vertical-alignment-helper">
        <div class="link-account modal-dialog vertical-alignment-center">
            <div id="link-account-cannot-link-content" class="popup-login modal-content modal-content" data-selenium="link-account-cannot-link-content">
                <i class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="link-account-ask-name-close-icon"></i>
                <div class="modal-header" data-selenium="link-account-cannot-link-panel-header">
                    <div class="respond-warning" data-selenium="link-account-cannot-link-message">
                        Ваш аккаунт Agoda уже подключен к другому аккаунту Facebook.
                    </div>
                </div>
                <div class="modal-body" data-selenium="link-account-cannot-link-panel-body">
                    <span>
                        Вы можете перейти на <a href="/ru-ru/account/profile.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" data-selenium="link-account-cannot-link-profile">ваш профиль</a> в любое время для того, чтобы изменить аккаунт Facebook, подключенный к аккаунту Agoda.
                    </span>
                </div>
                <div class="modal-footer ask-email-footer" data-selenium="link-account-cannot-link-panel-footer">
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal modal-link-account-ask-password facebook-login" id="link-account-require-email-panel">
    <div class="vertical-alignment-helper">
        <div class="link-account modal-dialog vertical-alignment-center">
            <div id="link-account-require-email-content" class="popup-login modal-content modal-content" data-selenium="link-account-require-email-content">
                <i class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="link-account-ask-name-close-icon"></i>
                <div class="modal-header" data-selenium="link-account-require-email-panel-header">
                </div>
                <div class="modal-body" data-selenium="link-account-require-email-panel-body">
                    <div class="respond-warning" data-selenium="link-account-require-email-message">
                        Пользователям Agoda требуется адрес электронной почты, но, к сожалению, мы не смогли найти его в вашей учетной записи Facebook. Добавьте адрес электронной почты к вашей учетной записи Facebook и попробуйте снова, или зарегистрируйтесь на Agoda с вашим адресом электронной почты.
                    </div>
                </div>
                <div class="modal-footer ask-email-footer" data-selenium="link-account-require-email-panel-footer">
                    <input type="submit" class="btn btn-primary" name="link-account-require-email-continue-button" id="link-account-require-email-continue-button" value="Назад" data-selenium="link-account-require-email-back-button">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal modal-link-account-ask-password facebook-login" id="link-account-email-sent-panel">
    <div class="vertical-alignment-helper">
        <div class="link-account modal-dialog vertical-alignment-center">
            <div id="link-account-email-sent-content" class="popup-login modal-content modal-content" data-selenium="link-account-email-sent-content">
                <i class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="link-account-email-sent-close-icon"></i>
                <div class="modal-header" data-selenium="link-account-email-sent-panel-header">
                </div>
                <div id="link-account-email-sent-body" class="modal-body" data-selenium="link-account-email-sent-body" data-cms="Мы отправили электронное письмо на {0}. Проверьте вашу электронную почту и перейдите по ссылке, чтобы войти и связать ваш аккаунт с Facebook.">
                    
                </div>
            </div>
        </div>
    </div>
</div>
</div>


<div id="resetpassword-popup" class="LOGIN-CSS" role="dialog" data-selenium="reset-password-popup">

<div class="modal" id="reset-password-get-new-panel">
    <div class="vertical-alignment-helper reset-password-facebook">
        <div class="link-account modal-dialog vertical-alignment-center">
            <div id="reset-password-get-new-content-facebook" class="popup-login modal-content modal-content" data-selenium="reset-password-get-new-content">
                <i id="reset-password-get-new-close-icon" class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="reset-password-get-new-close-icon"></i>
                    <div class="facebook-top">
                        <p class="margin24">
                            Все время забываете свой пароль на Agoda? Войдите через Facebook и вам больше никогда не придется его вспоминать!
                        </p>
                    </div>
                <div id="fb-signin-panel-resetpassword" class="fb-signin-panel facebook-top-2" data-selenium="fb-signin-panel-resetpassword">
                    <div id="fb-login-button-container-resetpassword" class="fb-login-button-container" style="" data-selenium="fb-login-button-container">

                        <div id="fb-login-button-resetpassword" class="fb-login-button fb_iframe_widget" data-max-rows="1" data-width="321" data-size="large" data-button-type="continue_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="true" data-scope="email" onlogin="agoda.login.checkLoginStateWithMetric('resetpassword-facebook', 'clicked')" auth_type="rerequest" data-selenium="fb-signin-button" data-element-name="fb-signin-button" login_text="" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=542369425788563&amp;auth_type=rerequest&amp;auto_logout_link=false&amp;button_type=continue_with&amp;container_width=0&amp;locale=ru_RU&amp;login_text=&amp;max_rows=1&amp;scope=email&amp;sdk=joey&amp;show_faces=false&amp;size=large&amp;use_continue_as=true&amp;width=321"><span style="vertical-align: bottom; width: 0px; height: 0px;"><iframe name="f32db2736e52678" width="321px" height="1000px" data-testid="fb:login_button Facebook Social Plugin" title="fb:login_button Facebook Social Plugin" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" src="https://www.facebook.com/v2.8/plugins/login_button.php?app_id=542369425788563&amp;auth_type=rerequest&amp;auto_logout_link=false&amp;button_type=continue_with&amp;channel=https%3A%2F%2Fstaticxx.facebook.com%2Fx%2Fconnect%2Fxd_arbiter%2F%3Fversion%3D46%23cb%3Df1f3cdaac8099b%26domain%3Dwww.agoda.com%26origin%3Dhttps%253A%252F%252Fwww.agoda.com%252Ff270aff579da1c4%26relation%3Dparent.parent&amp;container_width=0&amp;locale=ru_RU&amp;login_text=&amp;max_rows=1&amp;scope=email&amp;sdk=joey&amp;show_faces=false&amp;size=large&amp;use_continue_as=true&amp;width=321" class="" style="border: none; visibility: visible; width: 0px; height: 0px;"></iframe></span></div>
                    </div>
                    <div class="fb-separator-container facebook-top-2">
                        <div class="fb-separator-container-row">
                                <div class="fb-or-sides before-ortext">
                                    <hr>
                                </div>
                                <span id="fb-signin-or" class="fb-or" data-selenium="fb-signin-or">или</span>
                                <div class="fb-or-sides after-ortext">
                                    <hr>
                                </div>
                        </div>
                    </div>
                </div>
                <div class="facebook-bottom" data-selenium="reset-password-get-new-header">
                    <h5 class="modal-title" data-selenium="reset-password-get-new-header-text">Восстановить пароль</h5>
                </div>
                <div id="reset-password-get-new-body" class="modal-body" data-selenium="reset-password-get-new-body">

                    <div id="reset-password-get-new-technical-difficulties-issue" class="respond-warning" data-selenium="reset-password-get-new-technical-difficulties-issue">
                        Возникли технические неполадки.
                    </div>
                    <p class="margin24">Введите адрес вашей электронной почты, и мы отправим вам ссылку для восстановления пароля.</p>

                    <dl class="form-group">
                        <dt>
                            <label for="reset-password-get-new-emailfield-input" id="reset-password-get-new-emailfield-label" data-selenium="reset-password-get-new-emailfield-label">Эл. почта</label>
                        </dt>
                        <dd>
                            <input type="text" class="form-control" id="reset-password-get-new-emailfield-input" tabindex="&quot;1&quot;" data-selenium="reset-password-get-new-emailfield-input" maxlength="64">
                                        
                                            <div id="reset-password-get-new-emailfield-email-warning" class="feedback-warning" data-selenium="reset-password-get-new-emailfield-email-warning" data-type="reset-password-get-new-emailfield-error">
                                                Необходимо указать Email.
                                            </div>
                                        
                                        
                                            <div id="reset-password-get-new-emailfield-emailformat-warning" class="feedback-warning" data-selenium="reset-password-get-new-emailfield-emailformat-warning" data-type="reset-password-get-new-emailfield-error">
                                                Формат Адреса Электронной Почты недопустим
                                            </div>
                                        

                        </dd>
                    </dl>

                    <div class="form-group topmargin26 login-captcha-panel">


<div class="CAPTCHA-CSS">
    <div id="reset-password-get-new-captcha-panel" class="captcha-container" data-selenium="reset-password-get-new-captcha-panel">

    </div>
    <div id="reset-password-get-new-captcha-panel-loading" class="captcha-loading" data-selenium="reset-password-get-new-captcha-panel-loading">
        <input type="button" value="" class="btn-loading" disabled="">
    </div>
    <div id="reset-password-get-new-captcha-panel-error" class="captcha-error" data-selenium="reset-password-get-new-captcha-panel-error">
        <p>
            Не удалось загрузить код captcha для заполнения формы.
        </p>
        <a>
            Нажмите здесь, чтобы заново загрузить код captcha.
        </a>
    </div>
    <div id="reset-password-get-new-captcha-validator-error" class="captcha-feedback-warning" data-selenium="reset-password-get-new-captcha-validator-error">
        Пожалуйста, выполните проверку CAPTCHA (выше).
    </div>
</div>
                    </div>
                    <div id="reset-password-get-new-container" class="form-group">
                        <i id="reset-password-get-new-loading-icon" class="reset-password-get-new-loading-icon" data-selenium="reset-password-get-new-loading-icon"></i>
                        <input tabindex="&quot;2&quot;" type="submit" name="reset-password-get-new-submit-button" value="Отправить" id="reset-password-get-new-submit-button" class="btn btn-primary" data-selenium="reset-password-get-new-submit-button" data-element-name="forgot-password-submit-button">
                    </div>
                </div>
                <div class="modal-footer" data-selenium="reset-password-get-new-panel-footer">
                </div>
            </div>
        </div>
    </div>
</div>	
	<div class="modal" id="reset-password-email-sent">
		<div class="vertical-alignment-helper">
			<div class=" modal-dialog vertical-alignment-center">
				<div id="reset-password-email-sent-content" class="popup-login modal-content modal-content" data-selenium="reset-password-email-sent-content">
					<div class="modal-header" data-selenium="reset-password-email-sent-header">
						<i id="reset-password-email-sent-close-icon" class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="reset-password-email-sent-close-icon"></i>
						<h3 class="modal-title" data-selenium="reset-password-email-sent-header-text">Письмо отправлено</h3>
					</div>
					<div id="reset-password-email-sent-body" class="modal-body" data-selenium="reset-password-email-sent-body">
						<div id="reset-password-email-sent-message" class="modal-message margin24">
							Ссылка для восстановления пароля отправлена. Пожалуйста, проверьте вашу почту.
						</div>

						<div id="reset-password-email-sent-container" class="form-group">
							<i id="reset-password-email-sent-loading-icon" class="reset-password-email-sent-loading-icon" data-selenium="reset-password-email-sent-loading-icon"></i>
							<input tabindex="&quot;1&quot;" type="submit" name="reset-password-email-sent-submit-button" value="Назад" id="reset-password-email-sent-submit-button" class="btn btn-primary" data-selenium="reset-password-email-sent-submit-button">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal" id="reset-password-retreive-password">
		<div class="vertical-alignment-helper">
			<div class=" modal-dialog vertical-alignment-center">
				<div id="reset-password-retreive-password-content" class="popup-login modal-content modal-content" data-selenium="reset-password-retreive-password-content">
					<div class="modal-header" data-selenium="reset-password-retreive-password-header">
						<i id="reset-password-retreive-password-close-icon" class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="reset-password-retreive-password-close-icon"></i>
						<h3 class="modal-title" data-selenium="reset-password-retreive-password-header-text">Восстановить пароль</h3>
					</div>
					<div id="reset-password-retreive-password-body" class="modal-body" data-selenium="reset-password-retreive-password-body">
						<div id="reset-password-retreive-password-message" class="modal-message">
							Пароль успешно изменен.
						</div>

						<div id="reset-password-retreive-password-container" class="form-group">
							<i id="reset-password-retreive-password-loading-icon" class="reset-password-retreive-password-loading-icon" data-selenium="reset-password-retreive-password-loading-icon"></i>
							<input tabindex="&quot;1&quot;" type="submit" name="reset-password-retreive-password-submit-button" value="Назад" id="reset-password-retreive-password-submit-button" class="btn btn-primary" data-selenium="reset-password-retreive-password-submit-button">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal" id="reset-password-token-expired">
		<div class="vertical-alignment-helper">
			<div class=" modal-dialog vertical-alignment-center">
				<div id="reset-password-token-expired-content" class="popup-login modal-content modal-content" data-selenium="reset-password-token-expired-content">
					<div class="modal-header" data-selenium="reset-password-token-expired-header">
						<i id="reset-password-token-expired-close-icon" class="ficon ficon-16 ficon-x-icon close" data-dismiss="modal" aria-label="Close" data-selenium="reset-password-token-expired-close-icon"></i>
						<h3 class="modal-title" data-selenium="reset-password-token-expired-header-text"></h3>
					</div>
					<div id="reset-password-token-expired-body" class="modal-body" data-selenium="reset-password-token-expired-body">
						<div id="reset-password-token-expired-message" class="modal-message">
							Эта ссылка истекла.
						</div>

						<div id="reset-password-token-expired-container" class="form-group">
							<i id="reset-password-token-expired-loading-icon" class="reset-password-token-expired-loading-icon" data-selenium="reset-password-token-expired-loading-icon"></i>
							<input tabindex="&quot;1&quot;" type="submit" name="reset-password-token-expired-submit-button" value="Назад" id="reset-password-token-expired-submit-button" class="btn btn-primary" data-selenium="reset-password-token-expired-submit-button">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div id="resetpassword-cms" data-cannot-reuse="В целях вашей безопасности вы не можете использовать предыдущий пароль." hidden="hidden"></div>

<div id="login-cms-resetpassword-for" hidden="hidden">Введите новый пароль для</div>
<div id="login-cms-token-expired" hidden="hidden">Эта ссылка истекла.</div>
<div id="login-cms-email-notexist" hidden="hidden">Аккаунта Agoda с таким адресом электронной почты не существует.</div>
<div id="login-cms-password-cannot-reuse" hidden="hidden">В целях вашей безопасности вы не можете использовать предыдущий пароль.</div>
        <div id="login-react-popup"></div>
        <div id="login-react-root"></div>
        <div id="cookie-react-popup"></div>






<div id="mmb-signin-root" class="mmb-signin-root"><div id="mmb-signin-background" data-selenium="mmb-signin-background"><div class="container-agoda"><div class="mmb-login-form-panel mmb-panel-form-gap"><div class="sc-bdfBwQ dRUInJ"><div data-section="UniversalLoginComponent" class="sc-bdfBwQ gNRfUM" id="universal-login-app-451"><iframe src="/ru-ru/ul/login?appId=dictator&amp;rpcId=dictator-%23universal-login-app-451&amp;initialPath=signin&amp;sdkVersion=4.2.0" title="Universal login" data-cy="ul-app-frame" frameborder="0" seamless="seamless" scrolling="yes" style="min-width: 500px; min-height: 400px; height: 706px; width: 500px;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox"></iframe></div></div></div></div></div></div>

<script>
        window.mmbSignInPageParam = {"isFacebookSignInAvailable":true,"usernameRegex":"^(([^<>\\(\\)\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>\\(\\)\\[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$","passwordRegex":"^.{8,}$","isAppleSignInAvailable":true,"isGoogleSignInAvailable":true,"isWeChatSignInAvailable":false,"isL1LoggedIn":false,"isL2LoggedIn":false,"requiresCaptcha":false,"accountDisplayName":null,"defaultLanding":"/","autoFillLastLogInEmail":null,"signedInDisplayName":" ","showTechnicalDifficultyWhenLanding":false,"cmsValues":{"67372":"Войти","67373":"В целях безопасности, пожалуйста, войдите, чтобы получить доступ к вашей информации","71075":"Чтобы лучше защитить ваш аккаунт, пожалуйста, заново введите ваш пароль и пройдите проверку Captcha.","48754":"Возникли технические неполадки.","69577":"Пожалуйста, подтвердите, что вы не робот","67548":"Неправильный адрес эл. почты или пароль.","67549":"Нажмите здесь, чтобы получить новый пароль.","67374":"Эл. почта","67545":"Необходимо указать Email.","67546":"Недопустимый формат адреса электронной почты.","67375":"Пароль","67376":"Забыли пароль?","67547":"Необходимо ввести пароль.","67377":"Войти","67380":"Не {1}?","67381":"Выход","67378":"У вас еще нет аккаунта? {0}","67379":"Создать аккаунт","67538":"Пожалуйста, выполните проверку CAPTCHA (выше).","73927":"Условиями использования","73928":"Политикой конфиденциальности","73926":"Входя в аккаунт, вы соглашаетесь с {0} и {1} Agoda.","63536":"или","62856":"Пароль чувствителен к регистру и должен состоять как минимум из 8 знаков.","79405":"Номер телефона","81685":"Выберите страну","81481":"Необходимо указать номер мобильного телефона.","81399":"Укажите правильный номер телефона.","81386":"Неправильный номер телефона или пароль.","79403":"ТЕЛЕФОН","79404":"ЭЛ. ПОЧТА","71328":"Войти через WeChat","71329":"Зарегистрироваться через WeChat","104027":"Возникла ошибка при входе через Apple","114867":"Возникла ошибка при входе через Google","72057":"Войти через Facebook","106070":"Не удалось войти через Facebook","43042":"Эл. почта","52672":"Пароль","109026":"Apple","114866":"Google","109025":"Facebook","109058":"WeChat","109024":"или войдите через"},"lastLogInUsername":null,"isPhoneNumberLogin":false,"displaySignup":true,"displayResetPassword":false,"displayL1LoginInfo":false,"displayPasswordInputForm":true,"displayMobileLogIn":true};
</script>
<!-- clientside -->
<script defer="" src="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/7a9e7b275ctheme-agoda-dfb6b1f5ee72.js"></script><script defer="" src="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/7a9e7b275ctheme-japanican-118e21536a60.js"></script><script defer="" src="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/7a9e7b275ctheme-jtb-6db92c733b0b.js"></script><script defer="" src="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/7a9e7b275ctheme-priceline-98eb703527f0.js"></script><script defer="" src="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/7a9e7b275ctheme-rmtmobiletravel-aa56bbd29ea2.js"></script><script defer="" src="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/7a9e7b275ctheme-rurubu-14489a148904.js"></script><script defer="" src="https://cdn6.agoda.net/js/assets/CRONOS-CAP-B/LEGACY-BROWSERS/7a9e7b275cmmb.signin-20b29f129509.js"></script>





    
        <script>
        var footerProps = {
        seoLinksGroups:  [],
        linksGroups: [
        {
            title: "Помощь",
            dataSelenium: 'footer-help-column',
            className: '',
                list: [
                        
                            {
                                text: "Справочный центр",
                                link: '/ru-ru/info/contact.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                                id: 'footer-contact-us',
                                rel: 'nofollow',
                                data: {
                                    selenium: 'footer-contact-us',
                                    elementName: 'contact-us-footer',
                                }
                            },
                                
                                {
                                    text: "Часто задаваемые вопросы",
                                    link: '/ru-ru/info/contact.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                                    id: 'footer-faqs',
                                    rel: 'nofollow',
                                    data: {
                                        selenium: 'footer-faqs'
                                    }
                                }
                                
,
                            {
                                text: "Политика конфиденциальности",
                                link: '/ru-ru/info/privacy.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                                id: 'footer-privacy-policy',
                                rel: 'nofollow',
                                target: '_blank',
                                data: {
                                    selenium: 'footer-privacy-policy'
                                }
                            },
,
                            {
                                text: "Политика использования файлов cookie",
                                link: '/ru-ru/info/privacy.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f#cookies',
                                id: 'footer-cookie-policy',
                                rel: 'nofollow',
                                target: '_blank',
                                data: {
                                      selenium: 'footer-cookie-policy'
                                }
                            },
                            {
                                text: "Условия использования",
                                link: '/ru-ru/info/termsofuse.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                                id: 'footer-terms-of-service',
                                rel: 'nofollow',
                                data: {
                                    selenium: 'footer-terms-of-service'
                                },
                                target: '_blank'
                            },
                        
                ]
        },
            
                {
                    title: "О нас",
                    dataSelenium: 'footer-about-us-column',
                    list: [
                            
                                    
                                    {
                                        text: "PointsMAX",
                                            link: '//www.agoda.com/ru-ru/pointsmax.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                                            id: 'footer-points-max',
                                            rel: 'nofollow',
                                            data: {
                                            selenium: 'footer-pointsmax'
                                            }
                                    },
                                    
                                {
                                    text: "Вакансии",
                                    link: '//careersatagoda.com',
                                    id: 'footer-careers',
                                    rel: 'nofollow',
                                    target: '_blank',
                                    data: {
                                        selenium: 'footer-careers'
                                    }
                                },

                                    
                                        {
                                            text: "Пресс-служба",
                                            link: '/press',
                                            id: 'footer-media',
                                            rel: 'follow',
                                            target: '_blank',
                                            data: {
                                                selenium: 'footer-media'
                                            }
                                        },
                                    
                                                                        
                                        {
                                            text: "Блог",
                                            link: '/ru-ru/blog',
                                            id: 'footer-blog',
                                            rel: 'follow',
                                            target: '_blank',
                                            data: {
                                                selenium: 'footer-blog'
                                            }
                                        },
                                    
                                                            
                    ]
                },
            

            
                {
                    title: "Направления",
                    dataSelenium: 'footer-destinations-column',
                    list: [
                        {
                            text: "Страны",
                            link: '//www.agoda.com/ru-ru/world.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                            data: {
                                selenium: 'footer-destination-countries'
                            }
                        }, {
                            text: "Города",
                            link: '//www.agoda.com/ru-ru/cities.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                            data: {
                                selenium: 'footer-destination-cities'
                            }
                        }
                    ]
                },
            

            
                {
                    title: "Сотрудничество",
                    dataSelenium: 'footer-partner-with-us-column',
                    list: [
                        {
                            text: "Портал YCS",
                            link: '//ycs.agoda.com/ru-ru/?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                            target: '_blank',
                            rel: 'nofollow',
                            data: {
                                selenium: 'footer-partner-hotels'
                            }
                        },
                        {
                        text: "Partner Hub",
                            link: '//partnerhub.agoda.com/?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                            target: '_blank',
                            rel: 'nofollow',
                            data: {
                            selenium: 'footer-partner-hub'
                            }
                        },
                        {
                        text: "Рекламируйте на Agoda",
                            link: '//partnerhub.agoda.com/hotel-solutions/ad-solutions/?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                            target: '_blank',
                            rel: 'nofollow',
                            data: {
                            selenium: 'footer-advertise'
                            }
                        },
                        {
                        text: "Аффилиаты",
                            link: '//partners.agoda.com/ru-ru/index.html?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                            target: '_blank',
                            rel: 'nofollow',
                            data: {
                            selenium: 'footer-partner-affiliates'
                            }
                        },
                        {
                        text: "Портал для партнеров",
                            link: '//www.agodaconnectivity.com/home?migration=2&amp;option=reset-password&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                            target: '_blank',
                            rel: 'nofollow',
                            data: {
                            selenium: 'footer-connectivity-partners'
                            }
                        }
                    ]
                },
            
                    
                {
                title: "Скачать приложение",
                dataSelenium: 'footer-mobile-app-column',
                list: [
                    {
                        text: "Для iOS",
                        link: '//app.appsflyer.com/id440676901?migration=2&amp;option=reset-password&amp;pid=direct&amp;c=hotel_page_footer&amp;af_siteid=1716632&amp;site_id=1716632&amp;af_sub1=desktop&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                        rel: 'nofollow',
                        data: {
                            selenium: 'footer-mobile-app-ios'
                        }
                    }, {
                        text: "Для Android",
                        link: '//app.appsflyer.com/com.agoda.mobile.consumer?migration=2&amp;option=reset-password&amp;pid=direct&amp;c=hotel_page_footer&amp;af_siteid=1716632&amp;site_id=1716632&amp;af_sub1=desktop&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f',
                        rel: 'nofollow',
                        data: {
                            selenium: 'footer-mobile-app-andriod'
                        }
                    }
                ]
            }
            
    ],


    copyrights: {
        material: "Все материалы сайта защищены © 2005–2021 Agoda Company Pte. Ltd. Все права защищены.",
            
            priceline: "Agoda.com входит в состав холдинга Booking Holdings Inc, мирового лидера в сфере онлайн-туризма и сопутствующих услуг.",
            
                    
            travel: " ",
            
        machineName: "AM-AGWEB-4I04",
        showMachineNameBelow: true,
        // icon classNames
        brands:  JSON.parse('["agoda","priceline","kayak","rental-cars","booking-com","open-table"]')
    }
        };
        </script>
        <div id="react-footer"><footer class="Footer" data-selenium="footer" data-element-name="footer"><section class="Footer-links" data-selenium="footer-links-section"><div class="LinksList l-container"><div class="LinksListGroup LinksListGroup--vertical" data-selenium="footer-help-column"><h5 class="LinksListGroup-title LinksListGroup-title--vertical">Помощь</h5><ul class="LinksListGroup-list"><li class="LinksListLink"><a id="footer-contact-us" href="/ru-ru/info/contact.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" class="LinksListLink-link" data-selenium="footer-contact-us" data-element-name="contact-us-footer">Справочный центр</a></li><li class="LinksListLink"><a id="footer-faqs" href="/ru-ru/info/contact.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" class="LinksListLink-link" data-selenium="footer-faqs">Часто задаваемые вопросы</a></li><li class="LinksListLink"><a id="footer-privacy-policy" href="/ru-ru/info/privacy.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-privacy-policy">Политика конфиденциальности</a></li><li class="LinksListLink"><a id="footer-cookie-policy" href="/ru-ru/info/privacy.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f#cookies" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-cookie-policy">Политика использования файлов cookie</a></li><li class="LinksListLink"><a id="footer-terms-of-service" href="/ru-ru/info/termsofuse.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-terms-of-service">Условия использования</a></li></ul></div><div class="LinksListGroup LinksListGroup--vertical" data-selenium="footer-about-us-column"><h5 class="LinksListGroup-title LinksListGroup-title--vertical">О нас</h5><ul class="LinksListGroup-list"><li class="LinksListLink"><a id="footer-points-max" href="//www.agoda.com/ru-ru/pointsmax.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" class="LinksListLink-link" data-selenium="footer-pointsmax">PointsMAX</a></li><li class="LinksListLink"><a id="footer-careers" href="//careersatagoda.com" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-careers">Вакансии</a></li><li class="LinksListLink"><a id="footer-media" href="/press" rel="follow" target="_blank" class="LinksListLink-link" data-selenium="footer-media">Пресс-служба</a></li><li class="LinksListLink"><a id="footer-blog" href="/ru-ru/blog" rel="follow" target="_blank" class="LinksListLink-link" data-selenium="footer-blog">Блог</a></li></ul></div><div class="LinksListGroup LinksListGroup--vertical" data-selenium="footer-destinations-column"><h5 class="LinksListGroup-title LinksListGroup-title--vertical">Направления</h5><ul class="LinksListGroup-list"><li class="LinksListLink"><a id="footer-destination-countries" href="//www.agoda.com/ru-ru/world.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" class="LinksListLink-link" data-selenium="footer-destination-countries">Страны</a></li><li class="LinksListLink"><a id="footer-destination-cities" href="//www.agoda.com/ru-ru/cities.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" class="LinksListLink-link" data-selenium="footer-destination-cities">Города</a></li></ul></div><div class="LinksListGroup LinksListGroup--vertical" data-selenium="footer-partner-with-us-column"><h5 class="LinksListGroup-title LinksListGroup-title--vertical">Сотрудничество</h5><ul class="LinksListGroup-list"><li class="LinksListLink"><a id="footer-partner-hotels" href="//ycs.agoda.com/ru-ru/?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-partner-hotels">Портал YCS</a></li><li class="LinksListLink"><a id="footer-partner-hub" href="//partnerhub.agoda.com/?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-partner-hub">Partner Hub</a></li><li class="LinksListLink"><a id="footer-advertise" href="//partnerhub.agoda.com/hotel-solutions/ad-solutions/?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-advertise">Рекламируйте на Agoda</a></li><li class="LinksListLink"><a id="footer-partner-affiliates" href="//partners.agoda.com/ru-ru/index.html?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-partner-affiliates">Аффилиаты</a></li><li class="LinksListLink"><a id="footer-connectivity-partners" href="//www.agodaconnectivity.com/home?migration=2&amp;amp;option=reset-password&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" target="_blank" class="LinksListLink-link" data-selenium="footer-connectivity-partners">Портал для партнеров</a></li></ul></div><div class="LinksListGroup LinksListGroup--vertical" data-selenium="footer-mobile-app-column"><h5 class="LinksListGroup-title LinksListGroup-title--vertical">Скачать приложение</h5><ul class="LinksListGroup-list"><li class="LinksListLink"><a id="footer-mobile-app-ios" href="//app.appsflyer.com/id440676901?migration=2&amp;amp;option=reset-password&amp;amp;pid=direct&amp;amp;c=hotel_page_footer&amp;amp;af_siteid=1716632&amp;amp;site_id=1716632&amp;amp;af_sub1=desktop&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" class="LinksListLink-link" data-selenium="footer-mobile-app-ios">Для iOS</a></li><li class="LinksListLink"><a id="footer-mobile-app-andriod" href="//app.appsflyer.com/com.agoda.mobile.consumer?migration=2&amp;amp;option=reset-password&amp;amp;pid=direct&amp;amp;c=hotel_page_footer&amp;amp;af_siteid=1716632&amp;amp;site_id=1716632&amp;amp;af_sub1=desktop&amp;amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f" rel="nofollow" class="LinksListLink-link" data-selenium="footer-mobile-app-andriod">Для Android</a></li></ul></div></div></section><section class="Footer-copyrights" data-selenium="footer-copyright-section"><div class="Copyrights l-container"><p class="Copyrights--info">Все материалы сайта защищены © 2005–2021 Agoda Company Pte. Ltd. Все права защищены.</p><p class="Copyrights--info">Agoda.com входит в состав холдинга Booking Holdings Inc, мирового лидера в сфере онлайн-туризма и сопутствующих услуг.</p><ul class="Copyrights-brands"><li class="Copyrights-brandsItem"><i class="Copyrights-brandsIcon icon agoda"></i></li><li class="Copyrights-brandsItem"><i class="Copyrights-brandsIcon icon priceline"></i></li><li class="Copyrights-brandsItem"><i class="Copyrights-brandsIcon icon kayak"></i></li><li class="Copyrights-brandsItem"><i class="Copyrights-brandsIcon icon rental-cars"></i></li><li class="Copyrights-brandsItem"><i class="Copyrights-brandsIcon icon booking-com"></i></li><li class="Copyrights-brandsItem"><i class="Copyrights-brandsIcon icon open-table"></i></li></ul><small class="Copyrights-machine" id="server-name">AM-AGWEB-4I04</small></div></section></footer></div>
    




<script>
    window.linkAccountService =
    {
        facebookConnectUrl: '/NewSite/ru-ru/LinkAccount/FacebookConnect',
        wechatAuthUrl: '/NewSite/ru-ru/LinkAccount/WeChatAuth',
        appleAuthUrl: '/api/ru-ru/Apple/RedirectToAppleAuth',
        googleSignIn: '/api/ru-ru/Google/Sigin',
        linkAccountUrl: '/newsite/ru-ru/host/LinkAccount',
        associateAccountUrl: '/api/ru-ru/Login/FacebookAssociate',
        sendEmailToSignUp: '/api/ru-ru/Login/SendEmailToSignUpDesktop',
        registerAndFacebookAssociate: '/api/ru-ru/Login/RegisterAndFacebookAssociate',
        validateEmailToLinkWeChat: '/NewSite/ru-ru/LinkAccount/ValidateEmailToLinkWeChat',
        linkWeChatOnLogin: '/NewSite/ru-ru/LinkAccount/LinkWeChatOnLogin',
        linkWeChatOnSignUp: '/NewSite/ru-ru/LinkAccount/LinkWeChatOnSignUp',
    };
</script>



<div id="page-backdrop" class="hide"></div>

    

<script type="text/javascript">
    var rtag_hotelid = 0;
    var rtag_allhotelids = [];
    var rtag_hotelid1 = 0;
    var rtag_countryid = 0;
    var rtag_cityid = 0;
    var rtag_cityname = "";
    var rtag_country_origin = "BY";
    var rtag_city_origin = "Minsk";
    var rtag_state_origin = "HM";

    var rtag_checkin = "";
    var rtag_checkout = "";
    var rtag_cid = -1;
    var rtag_pagetypeid = 980;
    var productId = 1;
    var productType = "hotels";
    var rtag_langid = 11;
    var rtag_adult = 0;
    var rtag_child = 0;
    var rtag_star_rating = 0;
    var rtag_devicetype = "d";
    var rtag_ue_sh = "";
    var rtag_user_vip_level = "-1";

    var rtag_cid_traffic_group = 0 ;
    var rtag_cid_sub_traffic_group = 0 ;
    var rtag_exp_rmkt_1 = "Z";
    var rtag_exp_rmkt_2 = "Z";
    var rtag_exp_rmkt_3 = "Z";
    var rtag_exp_rmkt_4 = "Z";


    var rtag_hotelid_wl = "";

        
            var rtag_displaycurrency = "USD";
        
        
            var rtag_exp_rmkt_5 = "Z";
        
        
            var rtag_cid_userdata = -1;
            var rtag_tag_userdata = "";
        

    </script>

<script type="text/javascript" id="tealium">
    var isCCPAEnable = false;
    var appSettingsPreferences = JSON.parse(localStorage.getItem("AppSettings.preferences"));
    var cookieBanner = JSON.parse(localStorage.getItem("cookie-setting"));
    var shouldTealiumEnable = (!isCCPAEnable || appSettingsPreferences == null || appSettingsPreferences.ccpa_status === "opt-in") 
                                      && (cookieBanner == null || cookieBanner === true || cookieBanner.isMarketingSelected === true);
    function setCookie(cname, cvalue) {
      var date = new Date();
      date.setTime(date.getTime() + 86400000);
      var expires = "expires=" + date.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + "; path=/; domain=.agoda.com;";
    }
    
        
        setCookie("tealiumEnable", shouldTealiumEnable, 1);
        

    if(shouldTealiumEnable){


    }
</script>



<script type="text/javascript">
    


    window.currencyUrl =
    {
        get: '/api/cronos/layout/currency/getlist?hotel=0&amp;countryId=0',
        set: '/api/cronos/layout/currency/set'
    };
    if (window.currencyUrl.get.indexOf("&amp;") > -1)
        window.currencyUrl.get = window.currencyUrl.get.replace("&amp;", "&");

        if (true) {
            window.currencyUrl.get = window.currencyUrl.get.replace("countryId=0", "countryId=" + (window.countryId || null));
    }
    window.languageUrl =
    {
        get: '/api/cronos/layout/culture/getlanguages',
        set: '/api/ru-ru/Main/SetSelectedLanguage'
    };

    window.loginParamsUrl = '/api/ru-ru/Login/Params';

    
    agoda.phoneCodes = [{"countryCode":"AU","title":"Австралия (+61)","callingCode":"61"},{"countryCode":"AT","title":"Австрия (+43)","callingCode":"43"},{"countryCode":"AZ","title":"Азербайджан (+994)","callingCode":"994"},{"countryCode":"AX","title":"Аландские острова (+358)","callingCode":"358"},{"countryCode":"AL","title":"Албания (+355)","callingCode":"355"},{"countryCode":"DZ","title":"Алжир (+213)","callingCode":"213"},{"countryCode":"AS","title":"Американское Самоа (+1684)","callingCode":"1684"},{"countryCode":"AI","title":"Ангилья (+1264)","callingCode":"1264"},{"countryCode":"AO","title":"Ангола (+244)","callingCode":"244"},{"countryCode":"AD","title":"Андорра (+376)","callingCode":"376"},{"countryCode":"AG","title":"Антигуа и Барбуда (+1268)","callingCode":"1268"},{"countryCode":"AR","title":"Аргентина (+54)","callingCode":"54"},{"countryCode":"AM","title":"Армения (+374)","callingCode":"374"},{"countryCode":"AW","title":"Аруба (+297)","callingCode":"297"},{"countryCode":"AF","title":"Афганистан (+93)","callingCode":"93"},{"countryCode":"BS","title":"Багамские острова (+1242)","callingCode":"1242"},{"countryCode":"BD","title":"Бангладеш (+880)","callingCode":"880"},{"countryCode":"BB","title":"Барбадос (+1246)","callingCode":"1246"},{"countryCode":"BH","title":"Бахрейн (+973)","callingCode":"973"},{"countryCode":"BY","title":"Беларусь (+375)","callingCode":"375"},{"countryCode":"BZ","title":"Белиз (+501)","callingCode":"501"},{"countryCode":"BE","title":"Бельгия (+32)","callingCode":"32"},{"countryCode":"BJ","title":"Бенин (+229)","callingCode":"229"},{"countryCode":"BM","title":"Бермудские Острова (+1441)","callingCode":"1441"},{"countryCode":"BG","title":"Болгария (+359)","callingCode":"359"},{"countryCode":"BO","title":"Боливия (+591)","callingCode":"591"},{"countryCode":"BQ","title":"Бонэйр (+5997)","callingCode":"5997"},{"countryCode":"BA","title":"Босния и Герцеговина (+387)","callingCode":"387"},{"countryCode":"BW","title":"Ботсвана (+267)","callingCode":"267"},{"countryCode":"BR","title":"Бразилия (+55)","callingCode":"55"},{"countryCode":"IO","title":"Британская Территория в Индийском Океане (+246)","callingCode":"246"},{"countryCode":"BN","title":"Бруней (+673)","callingCode":"673"},{"countryCode":"BF","title":"Буркина-Фасо (+226)","callingCode":"226"},{"countryCode":"BI","title":"Бурунди (+257)","callingCode":"257"},{"countryCode":"BT","title":"Бутан (+975)","callingCode":"975"},{"countryCode":"VU","title":"Вануату (+678)","callingCode":"678"},{"countryCode":"GB","title":"Великобритания (+44)","callingCode":"44"},{"countryCode":"HU","title":"Венгрия (+36)","callingCode":"36"},{"countryCode":"VE","title":"Венесуэла (+58)","callingCode":"58"},{"countryCode":"VG","title":"Виргинские Острова (Великобритания) (+1284)","callingCode":"1284"},{"countryCode":"VI","title":"Виргинские острова (США) (+1340)","callingCode":"1340"},{"countryCode":"TL","title":"Восточный Тимор (+670)","callingCode":"670"},{"countryCode":"VN","title":"Вьетнам (+84)","callingCode":"84"},{"countryCode":"GA","title":"Габон (+241)","callingCode":"241"},{"countryCode":"GY","title":"Гайана (+592)","callingCode":"592"},{"countryCode":"HT","title":"Гаити (+509)","callingCode":"509"},{"countryCode":"GM","title":"Гамбия (+220)","callingCode":"220"},{"countryCode":"GH","title":"Гана (+233)","callingCode":"233"},{"countryCode":"GP","title":"Гваделупа (+590)","callingCode":"590"},{"countryCode":"GT","title":"Гватемала (+502)","callingCode":"502"},{"countryCode":"GF","title":"Гвиана (+594)","callingCode":"594"},{"countryCode":"GN","title":"Гвинея (+224)","callingCode":"224"},{"countryCode":"GW","title":"Гвинея-Бисау (+245)","callingCode":"245"},{"countryCode":"DE","title":"Германия (+49)","callingCode":"49"},{"countryCode":"GG","title":"Гернси (+441481)","callingCode":"44"},{"countryCode":"GI","title":"Гибралтар (+350)","callingCode":"350"},{"countryCode":"HN","title":"Гондурас (+504)","callingCode":"504"},{"countryCode":"HK","title":"Гонконг (+852)","callingCode":"852"},{"countryCode":"GD","title":"Гренада (+1473)","callingCode":"1473"},{"countryCode":"GL","title":"Гренландия (+299)","callingCode":"299"},{"countryCode":"GR","title":"Греция (+30)","callingCode":"30"},{"countryCode":"GE","title":"Грузия (+995)","callingCode":"995"},{"countryCode":"GU","title":"Гуам (+1671)","callingCode":"1671"},{"countryCode":"DK","title":"Дания (+45)","callingCode":"45"},{"countryCode":"CD","title":"Демократическая Республика Конго (+243)","callingCode":"243"},{"countryCode":"JE","title":"Джерси (+441534)","callingCode":"44"},{"countryCode":"DJ","title":"Джибути (+253)","callingCode":"253"},{"countryCode":"DM","title":"Доминика (+1767)","callingCode":"1767"},{"countryCode":"DO","title":"Доминиканская Республика (+1809)","callingCode":"1809"},{"countryCode":"EG","title":"Египет (+20)","callingCode":"20"},{"countryCode":"ZM","title":"Замбия (+260)","callingCode":"260"},{"countryCode":"EH","title":"Западная Сахара (+212)","callingCode":"212"},{"countryCode":"ZW","title":"Зимбабве (+263)","callingCode":"263"},{"countryCode":"YE","title":"Йемен (+967)","callingCode":"967"},{"countryCode":"IL","title":"Израиль (+972)","callingCode":"972"},{"countryCode":"IN","title":"Индия (+91)","callingCode":"91"},{"countryCode":"ID","title":"Индонезия (+62)","callingCode":"62"},{"countryCode":"JO","title":"Иордания (+962)","callingCode":"962"},{"countryCode":"IQ","title":"Ирак (+964)","callingCode":"964"},{"countryCode":"IR","title":"Иран (+98)","callingCode":"98"},{"countryCode":"IE","title":"Ирландия (+353)","callingCode":"353"},{"countryCode":"IS","title":"Исландия (+354)","callingCode":"354"},{"countryCode":"ES","title":"Испания (+34)","callingCode":"34"},{"countryCode":"IT","title":"Италия (+39)","callingCode":"39"},{"countryCode":"CV","title":"Кабо-Верде (+238)","callingCode":"238"},{"countryCode":"KZ","title":"Казахстан (+7)","callingCode":"76"},{"countryCode":"KY","title":"Каймановы острова (+1345)","callingCode":"1345"},{"countryCode":"KH","title":"Камбоджа (+855)","callingCode":"855"},{"countryCode":"CM","title":"Камерун (+237)","callingCode":"237"},{"countryCode":"CA","title":"Канада (+1)","callingCode":"1"},{"countryCode":"QA","title":"Катар (+974)","callingCode":"974"},{"countryCode":"KE","title":"Кения (+254)","callingCode":"254"},{"countryCode":"CY","title":"Кипр (+357)","callingCode":"357"},{"countryCode":"KI","title":"Кирибати (+686)","callingCode":"686"},{"countryCode":"CN","title":"Китай (+86)","callingCode":"86"},{"countryCode":"CC","title":"Кокосовые острова (Килинг) (+61)","callingCode":"61"},{"countryCode":"CO","title":"Колумбия (+57)","callingCode":"57"},{"countryCode":"KM","title":"Коморы (+269)","callingCode":"269"},{"countryCode":"CR","title":"Коста-Рика (+506)","callingCode":"506"},{"countryCode":"CI","title":"Кот-д’Ивуар (+225)","callingCode":"225"},{"countryCode":"CU","title":"Куба (+53)","callingCode":"53"},{"countryCode":"KW","title":"Кувейт (+965)","callingCode":"965"},{"countryCode":"KG","title":"Кыргызстан (+996)","callingCode":"996"},{"countryCode":"CW","title":"Кюрасао (+599)","callingCode":"599"},{"countryCode":"LA","title":"Лаос (+856)","callingCode":"856"},{"countryCode":"LV","title":"Латвия (+371)","callingCode":"371"},{"countryCode":"LS","title":"Лесото (+266)","callingCode":"266"},{"countryCode":"LR","title":"Либерия (+231)","callingCode":"231"},{"countryCode":"LB","title":"Ливан (+961)","callingCode":"961"},{"countryCode":"LY","title":"Ливия (+218)","callingCode":"218"},{"countryCode":"LT","title":"Литва (+370)","callingCode":"370"},{"countryCode":"LI","title":"Лихтенштейн (+423)","callingCode":"423"},{"countryCode":"LU","title":"Люксембург (+352)","callingCode":"352"},{"countryCode":"MU","title":"Маврикий (+230)","callingCode":"230"},{"countryCode":"MR","title":"Мавритания (+222)","callingCode":"222"},{"countryCode":"MG","title":"Мадагаскар (+261)","callingCode":"261"},{"countryCode":"YT","title":"Майотта (+262)","callingCode":"262"},{"countryCode":"MO","title":"Макао (+853)","callingCode":"853"},{"countryCode":"MK","title":"Македония (+389)","callingCode":"389"},{"countryCode":"MW","title":"Малави (+265)","callingCode":"265"},{"countryCode":"MY","title":"Малайзия (+60)","callingCode":"60"},{"countryCode":"ML","title":"Мали (+223)","callingCode":"223"},{"countryCode":"MV","title":"Мальдивы (+960)","callingCode":"960"},{"countryCode":"MT","title":"Мальта (+356)","callingCode":"356"},{"countryCode":"MA","title":"Марокко (+212)","callingCode":"212"},{"countryCode":"MQ","title":"Мартиника (+596)","callingCode":"596"},{"countryCode":"MH","title":"Маршалловы Острова (+692)","callingCode":"692"},{"countryCode":"MX","title":"Мексика (+52)","callingCode":"52"},{"countryCode":"MZ","title":"Мозамбик (+258)","callingCode":"258"},{"countryCode":"MD","title":"Молдова (+373)","callingCode":"373"},{"countryCode":"MC","title":"Монако (+377)","callingCode":"377"},{"countryCode":"MN","title":"Монголия (+976)","callingCode":"976"},{"countryCode":"MS","title":"Монтсеррат (+1664)","callingCode":"1664"},{"countryCode":"MM","title":"Мьянма (+95)","callingCode":"95"},{"countryCode":"NA","title":"Намибия (+264)","callingCode":"264"},{"countryCode":"NR","title":"Науру (+674)","callingCode":"674"},{"countryCode":"NP","title":"Непал (+977)","callingCode":"977"},{"countryCode":"NE","title":"Нигер (+227)","callingCode":"227"},{"countryCode":"NG","title":"Нигерия (+234)","callingCode":"234"},{"countryCode":"NL","title":"Нидерланды (+31)","callingCode":"31"},{"countryCode":"NI","title":"Никарагуа (+505)","callingCode":"505"},{"countryCode":"NU","title":"Ниуэ (+683)","callingCode":"683"},{"countryCode":"NZ","title":"Новая Зеландия (+64)","callingCode":"64"},{"countryCode":"NC","title":"Новая Каледония (+687)","callingCode":"687"},{"countryCode":"NO","title":"Норвегия (+47)","callingCode":"47"},{"countryCode":"NF","title":"Норфолк (+672)","callingCode":"672"},{"countryCode":"AE","title":"Объединенные Арабские Эмираты (+971)","callingCode":"971"},{"countryCode":"OM","title":"Оман (+968)","callingCode":"968"},{"countryCode":"IM","title":"Остров Мэн (+441624)","callingCode":"44"},{"countryCode":"CX","title":"Остров Рождества (+61)","callingCode":"61"},{"countryCode":"SH","title":"Остров Святой Елены (+290)","callingCode":"290"},{"countryCode":"CK","title":"Острова Кука (+682)","callingCode":"682"},{"countryCode":"PN","title":"Острова Питкэрн (+64)","callingCode":"64"},{"countryCode":"TC","title":"Острова Теркс и Кайкос (+1649)","callingCode":"1649"},{"countryCode":"PK","title":"Пакистан (+92)","callingCode":"92"},{"countryCode":"PW","title":"Палау (+680)","callingCode":"680"},{"countryCode":"PS","title":"Палестина (+970)","callingCode":"970"},{"countryCode":"PA","title":"Панама (+507)","callingCode":"507"},{"countryCode":"PG","title":"Папуа — Новая Гвинея (+675)","callingCode":"675"},{"countryCode":"PY","title":"Парагвай (+595)","callingCode":"595"},{"countryCode":"PE","title":"Перу (+51)","callingCode":"51"},{"countryCode":"PL","title":"Польша (+48)","callingCode":"48"},{"countryCode":"PT","title":"Португалия (+351)","callingCode":"351"},{"countryCode":"PR","title":"Пуэрто-Рико (+1787)","callingCode":"1787"},{"countryCode":"CG","title":"Республика Конго (+242)","callingCode":"242"},{"countryCode":"XK","title":"Республика Косово (+383)","callingCode":"383"},{"countryCode":"RE","title":"Реюньон (+262)","callingCode":"262"},{"countryCode":"RU","title":"Россия (+7)","callingCode":"7"},{"countryCode":"RW","title":"Руанда (+250)","callingCode":"250"},{"countryCode":"RO","title":"Румыния (+40)","callingCode":"40"},{"countryCode":"SV","title":"Сальвадор (+503)","callingCode":"503"},{"countryCode":"WS","title":"Самоа (+685)","callingCode":"685"},{"countryCode":"SM","title":"Сан-Марино (+378)","callingCode":"378"},{"countryCode":"ST","title":"Сан-Томе и Принсипи (+239)","callingCode":"239"},{"countryCode":"SA","title":"Саудовская Аравия (+966)","callingCode":"966"},{"countryCode":"SZ","title":"Свазиленд (+268)","callingCode":"268"},{"countryCode":"VA","title":"Святой Престол (+379)","callingCode":"379"},{"countryCode":"KP","title":"Северная Корея (+850)","callingCode":"850"},{"countryCode":"MP","title":"Северные Марианские Острова (+1670)","callingCode":"1670"},{"countryCode":"SC","title":"Сейшельские Острова (+248)","callingCode":"248"},{"countryCode":"BL","title":"Сен-Бартелеми (+590)","callingCode":"590"},{"countryCode":"SN","title":"Сенегал (+221)","callingCode":"221"},{"countryCode":"MF","title":"Сен-Мартен (+590)","callingCode":"590"},{"countryCode":"PM","title":"Сен-Пьер и Микелон (+508)","callingCode":"508"},{"countryCode":"VC","title":"Сент-Винсент и Гренадины (+1784)","callingCode":"1784"},{"countryCode":"KN","title":"Сент-Китс и Невис (+1869)","callingCode":"1869"},{"countryCode":"LC","title":"Сент-Люсия (+1758)","callingCode":"1758"},{"countryCode":"RS","title":"Сербия (+381)","callingCode":"381"},{"countryCode":"SG","title":"Сингапур (+65)","callingCode":"65"},{"countryCode":"SX","title":"Синт-Мартен (+1721)","callingCode":"1721"},{"countryCode":"SY","title":"Сирия (+963)","callingCode":"963"},{"countryCode":"SK","title":"Словакия (+421)","callingCode":"421"},{"countryCode":"SI","title":"Словения (+386)","callingCode":"386"},{"countryCode":"US","title":"Соединенные Штаты Америки (+1)","callingCode":"1"},{"countryCode":"SB","title":"Соломоновы Острова (+677)","callingCode":"677"},{"countryCode":"SO","title":"Сомали (+252)","callingCode":"252"},{"countryCode":"SD","title":"Судан (+249)","callingCode":"249"},{"countryCode":"SR","title":"Суринам (+597)","callingCode":"597"},{"countryCode":"SL","title":"Сьерра-Леоне (+232)","callingCode":"232"},{"countryCode":"TJ","title":"Таджикистан (+992)","callingCode":"992"},{"countryCode":"TW","title":"Тайвань (+886)","callingCode":"886"},{"countryCode":"TH","title":"Таиланд (+66)","callingCode":"66"},{"countryCode":"TZ","title":"Танзания (+255)","callingCode":"255"},{"countryCode":"TG","title":"Того (+228)","callingCode":"228"},{"countryCode":"TK","title":"Токелау (+690)","callingCode":"690"},{"countryCode":"TO","title":"Тонга (+676)","callingCode":"676"},{"countryCode":"TT","title":"Тринидад и Тобаго (+1868)","callingCode":"1868"},{"countryCode":"TV","title":"Тувалу (+688)","callingCode":"688"},{"countryCode":"TN","title":"Тунис (+216)","callingCode":"216"},{"countryCode":"TM","title":"Туркменистан (+993)","callingCode":"993"},{"countryCode":"TR","title":"Турция (+90)","callingCode":"90"},{"countryCode":"UG","title":"Уганда (+256)","callingCode":"256"},{"countryCode":"UZ","title":"Узбекистан (+998)","callingCode":"998"},{"countryCode":"UA","title":"Украина (+380)","callingCode":"380"},{"countryCode":"WF","title":"Уоллис и Футуна (+681)","callingCode":"681"},{"countryCode":"UY","title":"Уругвай (+598)","callingCode":"598"},{"countryCode":"FO","title":"Фарерские острова (+298)","callingCode":"298"},{"countryCode":"FM","title":"Федеративные Штаты Микронезии (+691)","callingCode":"691"},{"countryCode":"FJ","title":"Фиджи (+679)","callingCode":"679"},{"countryCode":"PH","title":"Филиппины (+63)","callingCode":"63"},{"countryCode":"FI","title":"Финляндия (+358)","callingCode":"358"},{"countryCode":"FK","title":"Фолклендские острова (+500)","callingCode":"500"},{"countryCode":"FR","title":"Франция (+33)","callingCode":"33"},{"countryCode":"PF","title":"Французская Полинезия (+689)","callingCode":"689"},{"countryCode":"HR","title":"Хорватия (+385)","callingCode":"385"},{"countryCode":"CF","title":"Центральноафриканская Республика (+236)","callingCode":"236"},{"countryCode":"TD","title":"Чад (+235)","callingCode":"235"},{"countryCode":"ME","title":"Черногория (+382)","callingCode":"382"},{"countryCode":"CZ","title":"Чехия (+420)","callingCode":"420"},{"countryCode":"CL","title":"Чили (+56)","callingCode":"56"},{"countryCode":"CH","title":"Швейцария (+41)","callingCode":"41"},{"countryCode":"SE","title":"Швеция (+46)","callingCode":"46"},{"countryCode":"SJ","title":"Шпицберген и Ян-Майен (+4779)","callingCode":"4779"},{"countryCode":"LK","title":"Шри-Ланка (+94)","callingCode":"94"},{"countryCode":"EC","title":"Эквадор (+593)","callingCode":"593"},{"countryCode":"GQ","title":"Экваториальная Гвинея (+240)","callingCode":"240"},{"countryCode":"ER","title":"Эритрея (+291)","callingCode":"291"},{"countryCode":"EE","title":"Эстония (+372)","callingCode":"372"},{"countryCode":"ET","title":"Эфиопия (+251)","callingCode":"251"},{"countryCode":"ZA","title":"Южная Африка (+27)","callingCode":"27"},{"countryCode":"GS","title":"Южная Георгия (+500)","callingCode":"500"},{"countryCode":"KR","title":"Южная Корея (+82)","callingCode":"82"},{"countryCode":"SS","title":"Южный Судан (+211)","callingCode":"211"},{"countryCode":"JM","title":"Ямайка (+1876)","callingCode":"1876"},{"countryCode":"JP","title":"Япония (+81)","callingCode":"81"}];

    
    window.eventLogURL = '/api/ru-ru/Main/LogEventMessage';
    var agoda = agoda || {};
    agoda.RewardsMember = {
        IsLogin: false,
        IsL1LoggedIn: false,
        IsProfilePicture: false,
        userIconIndex: 5
    };
    agoda.IsCaptcha = ("True" == "True");
    agoda.IsWhiteList = ("False" == "True");
    agoda.isNeededSignInCaptcha =
        false;
    agoda.isAlwaysShowCaptcha =
        false;
    agoda.IsBLTPageFix = "False" == "True";
    agoda.PageType = 'AccountSignIn';
    agoda.ForgotPasswordLink = "/account/signin.html?migration=2&amp;option=reset-password&amp;pid=direct&amp;c=hotel_page_footer&amp;af_siteid=1716632&amp;site_id=1716632&amp;af_sub1=desktop&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f";
    agoda.IsDisplayMobileSignInCaptcha = "False" == "True";
    agoda.IsMobile = "False" == "True";
    agoda.IsTablet = "False" == "True";
    agoda.IsTONumberEnabled = "False" == "True";
    agoda.IsMigrateNotificationBadge = "True" == "True"
    agoda.insiderDealBannerPropertyReact = "False" == "True";
    agoda.isWeChatLogin = "False" == "True";
    agoda.isFacebookLogin = "True" == "True";
    agoda.isDelayDownloadingSdk = false;
    agoda.isGoogleLogin = "True" == "True";
    agoda.shouldFetchCronos = "False"  == "True";

    agoda.isReferralSignup = "False" == "True";

    agoda.termOfUserLink = "/ru-ru/info/termsofuse.html?migration=2&amp;option=reset-password&amp;pid=direct&amp;c=hotel_page_footer&amp;af_siteid=1716632&amp;site_id=1716632&amp;af_sub1=desktop&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f",
    agoda.privacyLink = "/ru-ru/info/privacy.html?migration=2&amp;option=reset-password&amp;pid=direct&amp;c=hotel_page_footer&amp;af_siteid=1716632&amp;site_id=1716632&amp;af_sub1=desktop&amp;ckuid=49b1135a-99ce-4642-99aa-c18e0408225f",

    agoda.UseFacebookSDKGlobalMob = "False" == "True";
    window.fbAppId = '542369425788563';

    agoda.login = agoda.login || {}
    agoda.login.FBSignInCallbacks = [];
    agoda.login.loginResponseCallback = undefined;
    agoda.login.isReact = true;
    agoda.login.isMock = false;
    agoda.login.phoneNumberSignInNeedCaptcha = false;
    agoda.login.requireCaptchaSolved = true;

        
            agoda.isAppleLogin = true;
        


    agoda.expSwat = ("False" == "True");

    var onDocumentReady = function() {
        if (agoda) {
            if (agoda.event && typeof (agoda.event.setup) === "function")
                agoda.event.setup(eventLogURL);

            if (agoda.page && typeof (agoda.page.initApplyGiftcard) === "function")
                $(agoda.page.initApplyGiftcard());

            if (agoda.password && typeof(agoda.password.init) === "function")
                agoda.password.init("#sign-up-password");

            if (agoda.desktop) {
                if (agoda.desktop.footer && typeof(agoda.desktop.footer.init) === "function")
                    agoda.desktop.footer.init($('#footer'));

                if (agoda.desktop.copyright && typeof(agoda.desktop.copyright.init) === "function")
                    agoda.desktop.copyright.init($('#footer'));

                if (agoda.desktop.pata && typeof(agoda.desktop.pata.init) === "function")
                    agoda.desktop.pata.init("#copyright-pata", "pata-template");

                if (agoda.desktop.subscribe && typeof(agoda.desktop.subscribe.init) === "function")
                    agoda.desktop.subscribe.init("#save_money_signup", "save-money-now-template", "ru-ru");
            }
        }
    }

              
                $(document).ready(function() {
                
                    onDocumentReady();
                });
             


</script>




<!--prefetch bundles-->

<!--end of prefetch bundles-->
    




    



<script type="text/javascript">function securedTouchInit(){var e;e=window,e._securedTouchDependencies||(e._securedTouchDependencies={}),window._securedTouchDependencies.StPromiseQueue=function(){var e=function(){};function t(e,t,n){this.options=n=n||{},this.pendingPromises=0,this.maxPendingPromises=void 0!==e?e:1/0,this.maxQueuedPromises=void 0!==t?t:1/0,this.queue=[]}return t.prototype.add=function(t){var n=this;return new Promise((function(i,o,a){n.queue.length>=n.maxQueuedPromises?o(new Error("Queue limit reached")):(n.queue.push({promiseGenerator:t,resolve:i,reject:o,notify:a||e}),n._dequeue())}))},t.prototype.getPendingLength=function(){return this.pendingPromises},t.prototype.getQueueLength=function(){return this.queue.length},t.prototype._dequeue=function(){var e=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var t,n=this.queue.shift();if(!n)return this.options.onEmpty&&this.options.onEmpty(),!1;try{this.pendingPromises++,(t=n.promiseGenerator(),t&&"function"==typeof t.then?t:new Promise((function(e){e(t)}))).then((function(t){e.pendingPromises--,n.resolve(t),e._dequeue()}),(function(t){e.pendingPromises--,n.reject(t),e._dequeue()}),(function(e){n.notify(e)}))}catch(t){e.pendingPromises--,n.reject(t),e._dequeue()}return!0},t}(),function(root){var ERROR="input is invalid type",NODE_JS=!1,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(n){return new Sha256(t,!0).update(n)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];t[i]=createOutputMethod(i,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(n,i){return new HmacSha256(n,t,!0).update(i)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];t[i]=createHmacOutputMethod(i,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,n){var i,o=typeof e;if("string"===o){var a,r=[],s=e.length,c=0;for(i=0;i<s;++i)(a=e.charCodeAt(i))<128?r[c++]=a:a<2048?(r[c++]=192|a>>6,r[c++]=128|63&a):a<55296||a>=57344?(r[c++]=224|a>>12,r[c++]=128|a>>6&63,r[c++]=128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++i)),r[c++]=240|a>>18,r[c++]=128|a>>12&63,r[c++]=128|a>>6&63,r[c++]=128|63&a);e=r}else{if("object"!==o)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var l=[],d=[];for(i=0;i<64;++i){var p=e[i]||0;l[i]=92^p,d[i]=54^p}Sha256.call(this,t,n),this.update(d),this.oKeyPad=l,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var i,o,a=0,r=e.length,s=this.blocks;a<r;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(o=this.start;a<r&&o<64;++a)s[o>>2]|=e[a]<<SHIFT[3&o++];else for(o=this.start;a<r&&o<64;++a)(i=e.charCodeAt(a))<128?s[o>>2]|=i<<SHIFT[3&o++]:i<2048?(s[o>>2]|=(192|i>>6)<<SHIFT[3&o++],s[o>>2]|=(128|63&i)<<SHIFT[3&o++]):i<55296||i>=57344?(s[o>>2]|=(224|i>>12)<<SHIFT[3&o++],s[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++],s[o>>2]|=(128|63&i)<<SHIFT[3&o++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++a)),s[o>>2]|=(240|i>>18)<<SHIFT[3&o++],s[o>>2]|=(128|i>>12&63)<<SHIFT[3&o++],s[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++],s[o>>2]|=(128|63&i)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=s[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,n,i,o,a,r,s,c,l=this.h0,d=this.h1,p=this.h2,u=this.h3,v=this.h4,m=this.h5,f=this.h6,_=this.h7,h=this.blocks;for(e=16;e<64;++e)t=((o=h[e-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,n=((o=h[e-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,h[e]=h[e-16]+t+h[e-7]+n<<0;for(c=d&p,e=0;e<64;e+=4)this.first?(this.is224?(a=300032,_=(o=h[0]-1413257819)-150054599<<0,u=o+24177077<<0):(a=704751109,_=(o=h[0]-210244248)-1521486534<<0,u=o+143694565<<0),this.first=!1):(t=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),i=(a=l&d)^l&p^c,_=u+(o=_+(n=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&m^~v&f)+K[e]+h[e])<<0,u=o+(t+i)<<0),t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),i=(r=u&l)^u&d^a,f=p+(o=f+(n=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7))+(_&v^~_&m)+K[e+1]+h[e+1])<<0,t=((p=o+(t+i)<<0)>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),i=(s=p&u)^p&l^r,m=d+(o=m+(n=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&_^~f&v)+K[e+2]+h[e+2])<<0,t=((d=o+(t+i)<<0)>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),i=(c=d&p)^d&u^s,v=l+(o=v+(n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&f^~m&_)+K[e+3]+h[e+3])<<0,l=o+(t+i)<<0;this.h0=this.h0+l<<0,this.h1=this.h1+d<<0,this.h2=this.h2+p<<0,this.h3=this.h3+u<<0,this.h4=this.h4+v<<0,this.h5=this.h5+m<<0,this.h6=this.h6+f<<0,this.h7=this.h7+_<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,o=this.h4,a=this.h5,r=this.h6,s=this.h7,c=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r];return this.is224||(c+=HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]),c},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,o=this.h4,a=this.h5,r=this.h6,s=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,o>>24&255,o>>16&255,o>>8&255,255&o,a>>24&255,a>>16&255,a>>8&255,255&a,r>>24&255,r>>16&255,r>>8&255,255&r];return this.is224||c.push(s>>24&255,s>>16&255,s>>8&255,255&s),c},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),root.sha256=exports.sha256,root.sha224=exports.sha224}(window._securedTouchDependencies),window._securedTouchDependencies.Fingerprint2=function(){var e=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},t=function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},n=function(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},i=function(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},o=function(e,t){return[e[0]^t[0],e[1]^t[1]]},a=function(e){return e=o(e,[0,e[0]>>>1]),e=t(e,[4283543511,3981806797]),e=o(e,[0,e[0]>>>1]),e=t(e,[3301882366,444984403]),o(e,[0,e[0]>>>1])},r=function(r,s){s=s||0;for(var c=(r=r||"").length%16,l=r.length-c,d=[0,s],p=[0,s],u=[0,0],v=[0,0],m=[2277735313,289559509],f=[1291169091,658871167],_=0;_<l;_+=16)u=[255&r.charCodeAt(_+4)|(255&r.charCodeAt(_+5))<<8|(255&r.charCodeAt(_+6))<<16|(255&r.charCodeAt(_+7))<<24,255&r.charCodeAt(_)|(255&r.charCodeAt(_+1))<<8|(255&r.charCodeAt(_+2))<<16|(255&r.charCodeAt(_+3))<<24],v=[255&r.charCodeAt(_+12)|(255&r.charCodeAt(_+13))<<8|(255&r.charCodeAt(_+14))<<16|(255&r.charCodeAt(_+15))<<24,255&r.charCodeAt(_+8)|(255&r.charCodeAt(_+9))<<8|(255&r.charCodeAt(_+10))<<16|(255&r.charCodeAt(_+11))<<24],u=t(u,m),u=n(u,31),u=t(u,f),d=o(d,u),d=n(d,27),d=e(d,p),d=e(t(d,[0,5]),[0,1390208809]),v=t(v,f),v=n(v,33),v=t(v,m),p=o(p,v),p=n(p,31),p=e(p,d),p=e(t(p,[0,5]),[0,944331445]);switch(u=[0,0],v=[0,0],c){case 15:v=o(v,i([0,r.charCodeAt(_+14)],48));case 14:v=o(v,i([0,r.charCodeAt(_+13)],40));case 13:v=o(v,i([0,r.charCodeAt(_+12)],32));case 12:v=o(v,i([0,r.charCodeAt(_+11)],24));case 11:v=o(v,i([0,r.charCodeAt(_+10)],16));case 10:v=o(v,i([0,r.charCodeAt(_+9)],8));case 9:v=o(v,[0,r.charCodeAt(_+8)]),v=t(v,f),v=n(v,33),v=t(v,m),p=o(p,v);case 8:u=o(u,i([0,r.charCodeAt(_+7)],56));case 7:u=o(u,i([0,r.charCodeAt(_+6)],48));case 6:u=o(u,i([0,r.charCodeAt(_+5)],40));case 5:u=o(u,i([0,r.charCodeAt(_+4)],32));case 4:u=o(u,i([0,r.charCodeAt(_+3)],24));case 3:u=o(u,i([0,r.charCodeAt(_+2)],16));case 2:u=o(u,i([0,r.charCodeAt(_+1)],8));case 1:u=o(u,[0,r.charCodeAt(_)]),u=t(u,m),u=n(u,31),u=t(u,f),d=o(d,u)}return d=o(d,[0,r.length]),p=o(p,[0,r.length]),d=e(d,p),p=e(p,d),d=a(d),p=a(p),d=e(d,p),p=e(p,d),("00000000"+(d[0]>>>0).toString(16)).slice(-8)+("00000000"+(d[1]>>>0).toString(16)).slice(-8)+("00000000"+(p[0]>>>0).toString(16)).slice(-8)+("00000000"+(p[1]>>>0).toString(16)).slice(-8)},s={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},c=function(e,t){if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t(e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t(e[o],o,e)},l=function(e,t){var n=[];return null==e?n:Array.prototype.map&&e.map===Array.prototype.map?e.map(t):(c(e,(function(e,i,o){n.push(t(e,i,o))})),n)},d=function(e){if(null==navigator.plugins)return e.NOT_AVAILABLE;for(var t=[],n=0,i=navigator.plugins.length;n<i;n++)navigator.plugins[n]&&t.push(navigator.plugins[n]);return p(e)&&(t=t.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))),l(t,(function(e){var t=l(e,(function(e){return[e.type,e.suffixes]}));return[e.name,e.description,t]}))},p=function(e){for(var t=!1,n=0,i=e.plugins.sortPluginsFor.length;n<i;n++){var o=e.plugins.sortPluginsFor[n];if(navigator.userAgent.match(o)){t=!0;break}}return t},u=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},v=function(){if(!u())return!1;var e=m();return!!window.WebGLRenderingContext&&!!e},m=function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t},f=[{key:"userAgent",getData:function(e){e(navigator.userAgent)}},{key:"webdriver",getData:function(e,t){e(null==navigator.webdriver?t.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(e,t){e(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||t.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(e,t){e(window.screen.colorDepth||t.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(e,t){e(navigator.deviceMemory||t.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(e,t){e(window.devicePixelRatio||t.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(e,t){e(function(e){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:e.NOT_AVAILABLE}(t))}},{key:"screenResolution",getData:function(e,t){e(function(e){var t=[window.screen.width,window.screen.height];return e.screen.detectScreenOrientation&&t.sort().reverse(),t}(t))}},{key:"availableScreenResolution",getData:function(e,t){e(function(e){if(window.screen.availWidth&&window.screen.availHeight){var t=[window.screen.availHeight,window.screen.availWidth];return e.screen.detectScreenOrientation&&t.sort().reverse(),t}return e.NOT_AVAILABLE}(t))}},{key:"timezoneOffset",getData:function(e){e((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(e,t){window.Intl&&window.Intl.DateTimeFormat?e((new window.Intl.DateTimeFormat).resolvedOptions().timeZone):e(t.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(e,t){e(function(e){try{return!!window.sessionStorage}catch(t){return e.ERROR}}(t))}},{key:"localStorage",getData:function(e,t){e(function(e){try{return!!window.localStorage}catch(t){return e.ERROR}}(t))}},{key:"indexedDb",getData:function(e,t){e(function(e){try{return!!window.indexedDB}catch(t){return e.ERROR}}(t))}},{key:"addBehavior",getData:function(e){e(!(!document.body||!document.body.addBehavior))}},{key:"openDatabase",getData:function(e){e(!!window.openDatabase)}},{key:"cpuClass",getData:function(e,t){e(function(e){return navigator.cpuClass||e.NOT_AVAILABLE}(t))}},{key:"platform",getData:function(e,t){e(function(e){return navigator.platform?navigator.platform:e.NOT_AVAILABLE}(t))}},{key:"doNotTrack",getData:function(e,t){e(function(e){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:e.NOT_AVAILABLE}(t))}},{key:"plugins",getData:function(e,t){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?t.plugins.excludeIE?e(t.EXCLUDED):e(function(e){var t=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?t=l(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],(function(t){try{return new window.ActiveXObject(t),t}catch(t){return e.ERROR}})):t.push(e.NOT_AVAILABLE),navigator.plugins&&(t=t.concat(d(e))),t}(t)):e(d(t))}},{key:"canvas",getData:function(e,t){u()?e(function(e){var t=[],n=document.createElement("canvas");n.width=2e3,n.height=200,n.style.display="inline";var i=n.getContext("2d");return i.rect(0,0,10,10),i.rect(2,2,6,6),t.push("canvas winding:"+(!1===i.isPointInPath(5,5,"evenodd")?"yes":"no")),i.textBaseline="alphabetic",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",e.dontUseFakeFontInCanvas?i.font="11pt Arial":i.font="11pt no-real-font-123",i.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),i.fillStyle="rgba(102, 204, 0, 0.2)",i.font="18pt Arial",i.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),n.toDataURL&&t.push("canvas fp:"+n.toDataURL()),t}(t)):e(t.NOT_AVAILABLE)}},{key:"webgl",getData:function(e,t){v()?e(function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"};if(!(e=m()))return null;var n=[],i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i);var o=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);e.bufferData(e.ARRAY_BUFFER,o,e.STATIC_DRAW),i.itemSize=3,i.numItems=3;var a=e.createProgram(),r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),e.compileShader(r);var s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),e.compileShader(s),e.attachShader(a,r),e.attachShader(a,s),e.linkProgram(a),e.useProgram(a),a.vertexPosAttrib=e.getAttribLocation(a,"attrVertex"),a.offsetUniform=e.getUniformLocation(a,"uniformOffset"),e.enableVertexAttribArray(a.vertexPosArray),e.vertexAttribPointer(a.vertexPosAttrib,i.itemSize,e.FLOAT,!1,0,0),e.uniform2f(a.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,i.numItems);try{n.push(e.canvas.toDataURL())}catch(e){}n.push("extensions:"+(e.getSupportedExtensions()||[]).join(";")),n.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),n.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),n.push("webgl alpha bits:"+e.getParameter(e.ALPHA_BITS)),n.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),n.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),n.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),n.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),n.push("webgl max anisotropy:"+function(e){var t=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");if(t){var n=e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===n&&(n=2),n}return null}(e)),n.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),n.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),n.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),n.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),n.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),n.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),n.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),n.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),n.push("webgl max vertex texture image units:"+e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),n.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),n.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),n.push("webgl red bits:"+e.getParameter(e.RED_BITS)),n.push("webgl renderer:"+e.getParameter(e.RENDERER)),n.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),n.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),n.push("webgl vendor:"+e.getParameter(e.VENDOR)),n.push("webgl version:"+e.getParameter(e.VERSION));try{var l=e.getExtension("WEBGL_debug_renderer_info");l&&(n.push("webgl unmasked vendor:"+e.getParameter(l.UNMASKED_VENDOR_WEBGL)),n.push("webgl unmasked renderer:"+e.getParameter(l.UNMASKED_RENDERER_WEBGL)))}catch(e){}return e.getShaderPrecisionFormat?(c(["FLOAT","INT"],(function(t){c(["VERTEX","FRAGMENT"],(function(i){c(["HIGH","MEDIUM","LOW"],(function(o){c(["precision","rangeMin","rangeMax"],(function(a){var r=e.getShaderPrecisionFormat(e[i+"_SHADER"],e[o+"_"+t])[a];"precision"!==a&&(a="precision "+a);var s=["webgl ",i.toLowerCase()," shader ",o.toLowerCase()," ",t.toLowerCase()," ",a,":",r].join("");n.push(s)}))}))}))})),n):n}()):e(t.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(e){v()?e(function(){try{var e=m(),t=e.getExtension("WEBGL_debug_renderer_info");return e.getParameter(t.UNMASKED_VENDOR_WEBGL)+"~"+e.getParameter(t.UNMASKED_RENDERER_WEBGL)}catch(e){return null}}()):e()}},{key:"adBlock",getData:function(e){e(function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var t=!1;try{document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(e){t=!1}return t}())}},{key:"hasLiedLanguages",getData:function(e){e(function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(e){return!0}return!1}())}},{key:"hasLiedResolution",getData:function(e){e(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(e){e(function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.oscpu,i=navigator.platform.toLowerCase();if(e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0||t.indexOf("cros")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if(void 0!==n){if((n=n.toLowerCase()).indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(n.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(n.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if((-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!=("Other"===e))return!0}return i.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||(i.indexOf("linux")>=0||i.indexOf("android")>=0||i.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||(i.indexOf("mac")>=0||i.indexOf("ipad")>=0||i.indexOf("ipod")>=0||i.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||(i.indexOf("win")<0&&i.indexOf("linux")<0&&i.indexOf("mac")<0&&i.indexOf("iphone")<0&&i.indexOf("ipad")<0)!=("Other"===e)||void 0===navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e}())}},{key:"hasLiedBrowser",getData:function(e){e(function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.productSub;if(("Chrome"==(e=t.indexOf("firefox")>=0?"Firefox":t.indexOf("opera")>=0||t.indexOf("opr")>=0?"Opera":t.indexOf("chrome")>=0?"Chrome":t.indexOf("safari")>=0?"Safari":t.indexOf("trident")>=0?"Internet Explorer":"Other")||"Safari"===e||"Opera"===e)&&"20030107"!==n)return!0;var i,o=eval.toString().length;if(37===o&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===o&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===o&&"Chrome"!==e&&"Opera"!==e&&"Other"!==e)return!0;try{throw"a"}catch(e){try{e.toSource(),i=!0}catch(e){i=!1}}return i&&"Firefox"!==e&&"Other"!==e}())}},{key:"touchSupport",getData:function(e){e(function(){var e,t=0;void 0!==navigator.maxTouchPoints?t=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(t=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return[t,e,"ontouchstart"in window]}())}},{key:"fonts",getData:function(e,t){var n=["monospace","sans-serif","serif"],i=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];t.fonts.extendedJsFonts&&(i=i.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),i=(i=i.concat(t.fonts.userDefinedFonts)).filter((function(e,t){return i.indexOf(e)===t}));var o=document.getElementsByTagName("body")[0],a=document.createElement("div"),r=document.createElement("div"),s={},c={},l=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="72px",e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="normal",e.style.lineBreak="auto",e.style.lineHeight="normal",e.style.textTransform="none",e.style.textAlign="left",e.style.textDecoration="none",e.style.textShadow="none",e.style.whiteSpace="normal",e.style.wordBreak="normal",e.style.wordSpacing="normal",e.innerHTML="mmmmmmmmmmlli",e},d=function(e,t){var n=l();return n.style.fontFamily="'"+e+"',"+t,n},p=function(e){for(var t=!1,i=0;i<n.length;i++)if(t=e[i].offsetWidth!==s[n[i]]||e[i].offsetHeight!==c[n[i]])return t;return t},u=function(){for(var e=[],t=0,i=n.length;t<i;t++){var o=l();o.style.fontFamily=n[t],a.appendChild(o),e.push(o)}return e}();o.appendChild(a);for(var v=0,m=n.length;v<m;v++)s[n[v]]=u[v].offsetWidth,c[n[v]]=u[v].offsetHeight;var f=function(){for(var e={},t=0,o=i.length;t<o;t++){for(var a=[],s=0,c=n.length;s<c;s++){var l=d(i[t],n[s]);r.appendChild(l),a.push(l)}e[i[t]]=a}return e}();o.appendChild(r);for(var _=[],h=0,g=i.length;h<g;h++)p(f[i[h]])&&_.push(i[h]);o.removeChild(r),o.removeChild(a),e(_)},pauseBefore:!0},{key:"fontsFlash",getData:function(e,t){return void 0===window.swfobject?e("swf object not loaded"):window.swfobject.hasFlashPlayerVersion("9.0.0")?t.fonts.swfPath?void function(e,t){window.___fp_swf_loaded=function(t){e(t)};var n=t.fonts.swfContainerId;!function(e){var t=document.createElement("div");t.setAttribute("id",(void 0).fonts.swfContainerId),document.body.appendChild(t)}(),window.swfobject.embedSWF(t.fonts.swfPath,n,"1","1","9.0.0",!1,{onReady:"___fp_swf_loaded"},{allowScriptAccess:"always",menu:"false"},{})}((function(t){e(t)}),t):e("missing options.fonts.swfPath"):e("flash not installed")},pauseBefore:!0},{key:"audio",getData:function(e,t){var n=t.audio;if(n.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return e(t.EXCLUDED);var i=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==i)return e(t.NOT_AVAILABLE);var o=new i(1,44100,44100),a=o.createOscillator();a.type="triangle",a.frequency.setValueAtTime(1e4,o.currentTime);var r=o.createDynamicsCompressor();c([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],(function(e){void 0!==r[e[0]]&&"function"==typeof r[e[0]].setValueAtTime&&r[e[0]].setValueAtTime(e[1],o.currentTime)})),a.connect(r),r.connect(o.destination),a.start(0),o.startRendering();var s=setTimeout((function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: "'+navigator.userAgent+'".'),o.oncomplete=function(){},o=null,e("audioTimeout")}),n.timeout);o.oncomplete=function(t){var n;try{clearTimeout(s),n=t.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce((function(e,t){return e+Math.abs(t)}),0).toString(),a.disconnect(),r.disconnect()}catch(t){return void e(t)}e(n)}}},{key:"enumerateDevices",getData:function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return e(t.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then((function(t){e(t.map((function(e){return"id="+e.deviceId+";gid="+e.groupId+";"+e.kind+";"+e.label})))})).catch((function(t){e(t)}))}}],_=function(e){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/Valve/fingerprintjs2#upgrade-guide-from-182-to-200")};return _.get=function(e,t){t?e||(e={}):(t=e,e={}),function(e,t){if(null==t)return e;var n,i;for(i in t)null==(n=t[i])||Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n)}(e,s),e.components=e.extraComponents.concat(f);var n={data:[],addPreprocessedComponent:function(t,i){"function"==typeof e.preprocessor&&(i=e.preprocessor(t,i)),n.data.push({key:t,value:i})}},i=-1,o=function(a){if((i+=1)>=e.components.length)t(n.data);else{var r=e.components[i];if(e.excludes[r.key])o(!1);else{if(!a&&r.pauseBefore)return i-=1,void setTimeout((function(){o(!0)}),1);try{r.getData((function(e){n.addPreprocessedComponent(r.key,e),o(!1)}),e)}catch(e){n.addPreprocessedComponent(r.key,String(e)),o(!1)}}}};o(!1)},_.getPromise=function(e){return new Promise((function(t,n){_.get(e,t)}))},_.getV18=function(e,t){return null==t&&(t=e,e={}),_.get(e,(function(n){for(var i=[],o=0;o<n.length;o++){var a=n[o];if(a.value===(e.NOT_AVAILABLE||"not available"))i.push({key:a.key,value:"unknown"});else if("plugins"===a.key)i.push({key:"plugins",value:l(a.value,(function(e){var t=l(e[2],(function(e){return e.join?e.join("~"):e})).join(",");return[e[0],e[1],t].join("::")}))});else if(-1!==["canvas","webgl"].indexOf(a.key))i.push({key:a.key,value:a.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(a.key)){if(!a.value)continue;i.push({key:a.key,value:1})}else a.value?i.push(a.value.join?{key:a.key,value:a.value.join(";")}:a):i.push({key:a.key,value:a.value})}var s=r(l(i,(function(e){return e.value})).join("~~~"),31);t(s,i)}))},_.x64hash128=r,_.VERSION="2.1.0",_}(),function(e){function t(e,n){var i;n=n||{},this._id=t._generateUUID(),this._promise=n.promise||Promise,this._frameId=n.frameId||"CrossStorageClient-"+this._id,this._origin=t._getOrigin(e),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=n.timeout||5e3,this._listener=null,this._installListener(),n.frameId&&(i=document.getElementById(n.frameId)),i&&this._poll(),i=i||this._createFrame(e),this._hub=i.contentWindow}t.frameStyle={width:0,height:0,border:"none",display:"none",position:"absolute",top:"-999px",left:"-999px"},t._getOrigin=function(e){var t;return(t=document.createElement("a")).href=e,t.host||(t=window.location),((t.protocol&&":"!==t.protocol?t.protocol:window.location.protocol)+"//"+t.host).replace(/:80$|:443$/,"")},t._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},t.prototype.onConnect=function(){var e=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise((function(t,n){var i=setTimeout((function(){n(new Error("CrossStorageClient could not connect"))}),e._timeout);e._requests.connect.push((function(e){if(clearTimeout(i),e)return n(e);t()}))})))},t.prototype.set=function(e,t){return this._request("set",{key:e,value:t})},t.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return this._request("get",{keys:t})},t.prototype.del=function(){var e=Array.prototype.slice.call(arguments);return this._request("del",{keys:e})},t.prototype.clear=function(){return this._request("clear")},t.prototype.getKeys=function(){return this._request("getKeys")},t.prototype.close=function(){var e=document.getElementById(this._frameId);e&&e.parentNode.removeChild(e),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},t.prototype._installListener=function(){var e=this;this._listener=function(t){var n,i,o;if(!e._closed&&t.data&&"string"==typeof t.data&&("null"===t.origin?"file://":t.origin)===e._origin)if("cross-storage:unavailable"!==t.data){if(-1!==t.data.indexOf("cross-storage:")&&!e._connected){if(e._connected=!0,!e._requests.connect)return;for(n=0;n<e._requests.connect.length;n++)e._requests.connect[n](i);delete e._requests.connect}if("cross-storage:ready"!==t.data){try{o=JSON.parse(t.data)}catch(e){return}o.id&&e._requests[o.id]&&e._requests[o.id](o.error,o.result)}}else{if(e._closed||e.close(),!e._requests.connect)return;for(i=new Error("Closing client. Could not access localStorage in hub."),n=0;n<e._requests.connect.length;n++)e._requests.connect[n](i)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},t.prototype._poll=function(){var e,t,n;n="file://"===(e=this)._origin?"*":e._origin,t=setInterval((function(){if(e._connected)return clearInterval(t);e._hub&&e._hub.postMessage("cross-storage:poll",n)}),1e3)},t.prototype._createFrame=function(e){var n,i;for(i in(n=window.document.createElement("iframe")).id=this._frameId,t.frameStyle)t.frameStyle.hasOwnProperty(i)&&(n.style[i]=t.frameStyle[i]);return window.document.body.appendChild(n),n.src=e,n},t.prototype._request=function(e,t){var n,i;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):((i=this)._count++,n={id:this._id+":"+i._count,method:"cross-storage:"+e,params:t},new this._promise((function(e,t){var o,a,r;o=setTimeout((function(){i._requests[n.id]&&(delete i._requests[n.id],t(new Error("Timeout: could not perform "+n.method)))}),i._timeout),i._requests[n.id]=function(a,r){if(clearTimeout(o),delete i._requests[n.id],a)return t(new Error(a));e(r)},Array.prototype.toJSON&&(a=Array.prototype.toJSON,Array.prototype.toJSON=null),r="file://"===i._origin?"*":i._origin,i._hub.postMessage(JSON.stringify(n),r),a&&(Array.prototype.toJSON=a)})))},e.CrossStorageClient=t}(window),function(e,t){"function"!=typeof e.CustomEvent&&(e.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n})}(window),function(e){var t=e.history;if(t){var n=t.pushState;n&&(t.pushState=function(i){"function"==typeof t.onpushstate&&t.onpushstate({state:i});var o=n.apply(t,arguments);return e.dispatchEvent(new CustomEvent("_onlocationchange")),o})}}(window),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,i=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)};return function(e){var n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var r,s=i(n.length),c=t(this)?Object(new this(s)):new Array(s),l=0;l<s;)r=n[l],c[l]=a?void 0===o?a(r,l):a.call(o,r,l):r,l+=1;return c.length=s,c}}()),function(e,t){var n="model",i="name",o="type",a="vendor",r="version",s="mobile",c="tablet",l="smarttv",d={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var n,i,o,a,r,s,c=0;c<t.length&&!r;){var l=t[c],d=t[c+1];for(n=i=0;n<l.length&&!r;)if(r=l[n++].exec(e))for(o=0;o<d.length;o++)s=r[++i],"object"==typeof(a=d[o])&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):void 0:this[a[0]]=s?a[1].call(this,s,a[2]):void 0:4==a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):void 0):this[a]=s||void 0;c+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(d.has(t[n][i],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},u={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,r],[/(opios)[\/\s]+([\w\.]+)/i],[[i,"Opera Mini"],r],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],r],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[i,r],[/(konqueror)\/([\w\.]+)/i],[[i,"Konqueror"],r],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],r],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[i,"Edge"],r],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],r],[/(Avast)\/([\w\.]+)/i],[[i,"Avast Secure Browser"],r],[/(AVG)\/([\w\.]+)/i],[[i,"AVG Secure Browser"],r],[/(puffin)\/([\w\.]+)/i],[[i,"Puffin"],r],[/(focus)\/([\w\.]+)/i],[[i,"Firefox Focus"],r],[/(opt)\/([\w\.]+)/i],[[i,"Opera Touch"],r],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],r],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],r],[/(windowswechat qbcore)\/([\w\.]+)/i],[[i,"WeChat(Win) Desktop"],r],[/(micromessenger)\/([\w\.]+)/i],[[i,"WeChat"],r],[/(brave)\/([\w\.]+)/i],[[i,"Brave"],r],[/(qqbrowserlite)\/([\w\.]+)/i],[i,r],[/(QQ)\/([\d\.]+)/i],[i,r],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[i,r],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[i,r],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[i,r],[/(MetaSr)[\/\s]?([\w\.]+)/i],[i],[/(LBBROWSER)/i],[i],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[r,[i,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[r,[i,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[i,r],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[r,[i,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[i,/(.+)/,"$1 WebView"],r],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[i,/(.+(?:g|us))(.+)/,"$1 $2"],r],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[r,[i,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[i,"Sailfish Browser"],r],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[i,r],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],r],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[i,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[i,"Chrome"],r],[/(coast)\/([\w\.]+)/i],[[i,"Opera Coast"],r],[/fxios\/([\w\.-]+)/i],[r,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[r,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[r,i],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[i,"GSA"],r],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[r,p.str,u.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[i,r],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],r],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,r]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[n,a,[o,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[n,[a,"Apple"],[o,c]],[/(apple\s{0,1}tv)/i],[[n,"Apple TV"],[a,"Apple"],[o,l]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,n,[o,c]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[n,[a,"Amazon"],[o,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[n,p.str,u.device.amazon.model],[a,"Amazon"],[o,s]],[/android.+aft([bms])\sbuild/i],[n,[a,"Amazon"],[o,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[n,a,[o,s]],[/\((ip[honed|\s\w*]+);/i],[n,[a,"Apple"],[o,s]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,n,[o,s]],[/\(bb10;\s(\w+)/i],[n,[a,"BlackBerry"],[o,s]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[n,[a,"Asus"],[o,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[a,"Sony"],[n,"Xperia Tablet"],[o,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[n,[a,"Sony"],[o,s]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,n,[o,"console"]],[/android.+;\s(shield)\sbuild/i],[n,[a,"Nvidia"],[o,"console"]],[/(playstation\s[34portablevi]+)/i],[n,[a,"Sony"],[o,"console"]],[/(sprint\s(\w+))/i],[[a,p.str,u.device.sprint.vendor],[n,p.str,u.device.sprint.model],[o,s]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[a,[n,/_/g," "],[o,s]],[/(nexus\s9)/i],[n,[a,"HTC"],[o,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[n,[a,"Huawei"],[o,s]],[/android.+(bah2?-a?[lw]\d{2})/i],[n,[a,"Huawei"],[o,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[a,n,[o,s]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[n,[a,"Microsoft"],[o,"console"]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[a,"Microsoft"],[o,s]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[n,[a,"Motorola"],[o,s]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[n,[a,"Motorola"],[o,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,d.trim],[n,d.trim],[o,l]],[/hbbtv.+maple;(\d+)/i],[[n,/^/,"SmartTV"],[a,"Samsung"],[o,l]],[/\(dtv[\);].+(aquos)/i],[n,[a,"Sharp"],[o,l]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],n,[o,c]],[/smart-tv.+(samsung)/i],[a,[o,l],n],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[a,"Samsung"],n,[o,s]],[/sie-(\w*)/i],[n,[a,"Siemens"],[o,s]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[a,"Nokia"],n,[o,s]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[n,[a,"Acer"],[o,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[n,[a,"LG"],[o,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],n,[o,c]],[/(lg) netcast\.tv/i],[a,n,[o,l]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[n,[a,"LG"],[o,s]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[a,n,[o,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[n,[a,"Lenovo"],[o,c]],[/(lenovo)[_\s-]?([\w-]+)/i],[a,n,[o,s]],[/linux;.+((jolla));/i],[a,n,[o,s]],[/((pebble))app\/[\d\.]+\s/i],[a,n,[o,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[a,n,[o,s]],[/crkey/i],[[n,"Chromecast"],[a,"Google"],[o,l]],[/android.+;\s(glass)\s\d/i],[n,[a,"Google"],[o,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[n,[a,"Google"],[o,c]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[n,[a,"Google"],[o,s]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[n,/_/g," "],[a,"Xiaomi"],[o,s]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[n,/_/g," "],[a,"Xiaomi"],[o,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[n,[a,"Meizu"],[o,s]],[/(mz)-([\w-]{2,})/i],[[a,"Meizu"],n,[o,s]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[n,[a,"OnePlus"],[o,s]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[n,[a,"RCA"],[o,c]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[n,[a,"Dell"],[o,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[n,[a,"Verizon"],[o,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[a,"Barnes & Noble"],n,[o,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[n,[a,"NuVision"],[o,c]],[/android.+;\s(k88)\sbuild/i],[n,[a,"ZTE"],[o,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[n,[a,"Swiss"],[o,s]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[n,[a,"Swiss"],[o,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[n,[a,"Zeki"],[o,c]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[a,"Dragon Touch"],n,[o,c]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[n,[a,"Insignia"],[o,c]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[n,[a,"NextBook"],[o,c]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[a,"Voice"],n,[o,s]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[a,"LvTel"],n,[o,s]],[/android.+;\s(PH-1)\s/i],[n,[a,"Essential"],[o,s]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[n,[a,"Envizen"],[o,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[a,n,[o,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[n,[a,"MachSpeed"],[o,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[a,n,[o,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[n,[a,"Rotor"],[o,c]],[/android.+(KS(.+))\s+build/i],[n,[a,"Amazon"],[o,c]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[a,n,[o,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[o,d.lowerize],a,n],[/[\s\/\(](smart-?tv)[;\)]/i],[[o,l]],[/(android[\w\.\s\-]{0,9});.+build/i],[n,[a,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[r,[i,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[r,[i,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,r],[/rv\:([\w\.]{1,9}).+(gecko)/i],[r,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,r],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[r,p.str,u.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[r,p.str,u.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],r],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[i,r],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[i,"Symbian"],r],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],r],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[i,r],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],r],[/(sunos)\s?([\w\.\d]*)/i],[[i,"Solaris"],r],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[i,r],[/(haiku)\s(\w+)/i],[i,r],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[r,/_/g,"."],[i,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac OS"],[r,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[i,r]]},m=function(t,n){if("object"==typeof t&&(n=t,t=void 0),!(this instanceof m))return new m(t,n).getResult();var i=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=n?d.extend(v,n):v;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,i,o.browser),e.major=d.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,i,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,i,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,i,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,i,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};m.VERSION="0.7.21",m.BROWSER={NAME:i,MAJOR:"major",VERSION:r},m.CPU={ARCHITECTURE:"architecture"},m.DEVICE={MODEL:n,VENDOR:a,TYPE:o,CONSOLE:"console",MOBILE:s,SMARTTV:l,TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},m.ENGINE={NAME:i,VERSION:r},m.OS={NAME:i,VERSION:r},e._securedTouchDependencies.UAParser=m}(window),window._securedTouchDependencies.pako=function e(t,n,i){function o(r,s){if(!n[r]){if(!t[r]){if(!s&&"function"==typeof require&&require)return require(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[r]={exports:{}};t[r][0].call(l.exports,(function(e){return o(t[r][1][e]||e)}),l,l.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var o in n)i(n,o)&&(e[o]=n[o])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,i,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),o);else for(var a=0;a<i;a++)e[o+a]=t[n+a]},flattenChunks:function(e){var t,n,i,o,a,r;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(r=new Uint8Array(i),o=0,t=0,n=e.length;t<n;t++)a=e[t],r.set(a,o),o+=a.length;return r}},r={arraySet:function(e,t,n,i,o){for(var a=0;a<i;a++)e[o+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,a)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(o)},{}],2:[function(e,t,n){function i(e,t){if(t<65537&&(e.subarray&&r||!e.subarray&&a))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}var o=e("./common"),a=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){r=!1}for(var s=new o.Buf8(256),c=0;c<256;c++)s[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,a,r,s=e.length,c=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new o.Buf8(c),r=0,a=0;r<c;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[r++]=n:n<2048?(t[r++]=192|n>>>6,t[r++]=128|63&n):n<65536?(t[r++]=224|n>>>12,t[r++]=128|n>>>6&63,t[r++]=128|63&n):(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63,t[r++]=128|n>>>6&63,t[r++]=128|63&n);return t},n.buf2binstring=function(e){return i(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o,a,r,c=t||e.length,l=new Array(2*c);for(o=0,n=0;n<c;)if((a=e[n++])<128)l[o++]=a;else if((r=s[a])>4)l[o++]=65533,n+=r-1;else{for(a&=2===r?31:3===r?15:7;r>1&&n<c;)a=a<<6|63&e[n++],r--;r>1?l[o++]=65533:a<65536?l[o++]=a:(a-=65536,l[o++]=55296|a>>10&1023,l[o++]=56320|1023&a)}return i(l,o)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":1}],3:[function(e,t,n){t.exports=function(e,t,n,i){for(var o=65535&e|0,a=e>>>16&65535|0,r=0;0!==n;){n-=r=n>2e3?2e3:n;do{a=a+(o=o+t[i++]|0)|0}while(--r);o%=65521,a%=65521}return o|a<<16|0}},{}],4:[function(e,t,n){var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,o){var a=i,r=o+n;e^=-1;for(var s=o;s<r;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},{}],5:[function(e,t,n){function i(e,t){return e.msg=w[t],t}function o(e){return(e<<1)-(e>4?9:0)}function a(e){for(var t=e.length;--t>=0;)e[t]=0}function r(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(k.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){S._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,r(e.strm)}function c(e,t){e.pending_buf[e.pending++]=t}function l(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function d(e,t,n,i){var o=e.avail_in;return o>i&&(o=i),0===o?0:(e.avail_in-=o,k.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=C(e.adler,t,o,n):2===e.state.wrap&&(e.adler=V(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}function p(e,t){var n,i,o=e.max_chain_length,a=e.strstart,r=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-W?e.strstart-(e.w_size-W):0,l=e.window,d=e.w_mask,p=e.prev,u=e.strstart+z,v=l[a+r-1],m=l[a+r];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+r]===m&&l[n+r-1]===v&&l[n]===l[a]&&l[++n]===l[a+1]){a+=2,n++;do{}while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&a<u);if(i=z-(u-a),a=u-z,i>r){if(e.match_start=t,r=i,i>=s)break;v=l[a+r-1],m=l[a+r]}}}while((t=p[t&d])>c&&0!=--o);return r<=e.lookahead?r:e.lookahead}function u(e){var t,n,i,o,a,r=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-W)){k.arraySet(e.window,e.window,r,r,0),e.match_start-=r,e.strstart-=r,e.block_start-=r,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=r?i-r:0}while(--n);t=n=r;do{i=e.prev[--t],e.prev[t]=i>=r?i-r:0}while(--n);o+=r}if(0===e.strm.avail_in)break;if(n=d(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=G)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+G-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<G)););}while(e.lookahead<W&&0!==e.strm.avail_in)}function v(e,t){for(var n,i;;){if(e.lookahead<W){if(u(e),e.lookahead<W&&t===P)return K;if(0===e.lookahead)break}if(n=0,e.lookahead>=G&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-W&&(e.match_length=p(e,n)),e.match_length>=G)if(i=S._tr_tally(e,e.strstart-e.match_start,e.match_length-G),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=G){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(s(e,!1),0===e.strm.avail_out))return K}return e.insert=e.strstart<G-1?e.strstart:G-1,t===T?(s(e,!0),0===e.strm.avail_out?$:Q):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?K:X}function m(e,t){for(var n,i,o;;){if(e.lookahead<W){if(u(e),e.lookahead<W&&t===P)return K;if(0===e.lookahead)break}if(n=0,e.lookahead>=G&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=G-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-W&&(e.match_length=p(e,n),e.match_length<=5&&(e.strategy===B||e.match_length===G&&e.strstart-e.match_start>4096)&&(e.match_length=G-1)),e.prev_length>=G&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-G,i=S._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-G),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=G-1,e.strstart++,i&&(s(e,!1),0===e.strm.avail_out))return K}else if(e.match_available){if((i=S._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return K}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=S._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<G-1?e.strstart:G-1,t===T?(s(e,!0),0===e.strm.avail_out?$:Q):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?K:X}function f(e,t){for(var n,i,o,a,r=e.window;;){if(e.lookahead<=z){if(u(e),e.lookahead<=z&&t===P)return K;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=G&&e.strstart>0&&(i=r[o=e.strstart-1])===r[++o]&&i===r[++o]&&i===r[++o]){a=e.strstart+z;do{}while(i===r[++o]&&i===r[++o]&&i===r[++o]&&i===r[++o]&&i===r[++o]&&i===r[++o]&&i===r[++o]&&i===r[++o]&&o<a);e.match_length=z-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=G?(n=S._tr_tally(e,1,e.match_length-G),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===T?(s(e,!0),0===e.strm.avail_out?$:Q):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?K:X}function _(e,t){for(var n;;){if(0===e.lookahead&&(u(e),0===e.lookahead)){if(t===P)return K;break}if(e.match_length=0,n=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===T?(s(e,!0),0===e.strm.avail_out?$:Q):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?K:X}function h(e,t,n,i,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=o}function g(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new k.Buf16(2*j),this.dyn_dtree=new k.Buf16(2*(2*H+1)),this.bl_tree=new k.Buf16(2*(2*N+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new k.Buf16(U+1),this.heap=new k.Buf16(2*D+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new k.Buf16(2*D+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=L,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Y:q,e.adler=2===t.wrap?0:1,t.last_flush=P,S._tr_init(t),A):i(e,x)}function b(e){var t=y(e);return t===A&&function(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=M[e.level].max_lazy,e.good_match=M[e.level].good_length,e.nice_match=M[e.level].nice_length,e.max_chain_length=M[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=G-1,e.match_available=0,e.ins_h=0}(e.state),t}function E(e,t,n,o,a,r){if(!e)return x;var s=1;if(t===R&&(t=6),o<0?(s=0,o=-o):o>15&&(s=2,o-=16),a<1||a>I||n!==F||o<8||o>15||t<0||t>9||r<0||r>O)return i(e,x);8===o&&(o=9);var c=new g;return e.state=c,c.strm=e,c.wrap=s,c.gzhead=null,c.w_bits=o,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+G-1)/G),c.window=new k.Buf8(2*c.w_size),c.head=new k.Buf16(c.hash_size),c.prev=new k.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new k.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=r,c.method=n,b(e)}var M,k=e("../utils/common"),S=e("./trees"),C=e("./adler32"),V=e("./crc32"),w=e("./messages"),P=0,T=4,A=0,x=-2,R=-1,B=1,O=4,L=2,F=8,I=9,D=286,H=30,N=19,j=2*D+1,U=15,G=3,z=258,W=z+G+1,Y=42,q=113,K=1,X=2,$=3,Q=4;M=[new h(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(u(e),0===e.lookahead&&t===P)return K;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,s(e,!1),0===e.strm.avail_out))return K;if(e.strstart-e.block_start>=e.w_size-W&&(s(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===T?(s(e,!0),0===e.strm.avail_out?$:Q):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),K)})),new h(4,4,8,4,v),new h(4,5,16,8,v),new h(4,6,32,32,v),new h(4,4,16,16,m),new h(8,16,32,32,m),new h(8,16,128,128,m),new h(8,32,128,256,m),new h(32,128,258,1024,m),new h(32,258,258,4096,m)],n.deflateInit=function(e,t){return E(e,t,F,15,8,0)},n.deflateInit2=E,n.deflateReset=b,n.deflateResetKeep=y,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?x:(e.state.gzhead=t,A):x},n.deflate=function(e,t){var n,s,d,p;if(!e||!e.state||t>5||t<0)return e?i(e,x):x;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||666===s.status&&t!==T)return i(e,0===e.avail_out?-5:x);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===Y)if(2===s.wrap)e.adler=0,c(s,31),c(s,139),c(s,8),s.gzhead?(c(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),c(s,255&s.gzhead.time),c(s,s.gzhead.time>>8&255),c(s,s.gzhead.time>>16&255),c(s,s.gzhead.time>>24&255),c(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),c(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(c(s,255&s.gzhead.extra.length),c(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=V(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(c(s,0),c(s,0),c(s,0),c(s,0),c(s,0),c(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),c(s,3),s.status=q);else{var u=F+(s.w_bits-8<<4)<<8;u|=(s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=q,l(s,u),0!==s.strstart&&(l(s,e.adler>>>16),l(s,65535&e.adler)),e.adler=1}if(69===s.status)if(s.gzhead.extra){for(d=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>d&&(e.adler=V(e.adler,s.pending_buf,s.pending-d,d)),r(e),d=s.pending,s.pending!==s.pending_buf_size));)c(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>d&&(e.adler=V(e.adler,s.pending_buf,s.pending-d,d)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){d=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>d&&(e.adler=V(e.adler,s.pending_buf,s.pending-d,d)),r(e),d=s.pending,s.pending===s.pending_buf_size)){p=1;break}p=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,c(s,p)}while(0!==p);s.gzhead.hcrc&&s.pending>d&&(e.adler=V(e.adler,s.pending_buf,s.pending-d,d)),0===p&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){d=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>d&&(e.adler=V(e.adler,s.pending_buf,s.pending-d,d)),r(e),d=s.pending,s.pending===s.pending_buf_size)){p=1;break}p=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,c(s,p)}while(0!==p);s.gzhead.hcrc&&s.pending>d&&(e.adler=V(e.adler,s.pending_buf,s.pending-d,d)),0===p&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&r(e),s.pending+2<=s.pending_buf_size&&(c(s,255&e.adler),c(s,e.adler>>8&255),e.adler=0,s.status=q)):s.status=q),0!==s.pending){if(r(e),0===e.avail_out)return s.last_flush=-1,A}else if(0===e.avail_in&&o(t)<=o(n)&&t!==T)return i(e,-5);if(666===s.status&&0!==e.avail_in)return i(e,-5);if(0!==e.avail_in||0!==s.lookahead||t!==P&&666!==s.status){var v=2===s.strategy?_(s,t):3===s.strategy?f(s,t):M[s.level].func(s,t);if(v!==$&&v!==Q||(s.status=666),v===K||v===$)return 0===e.avail_out&&(s.last_flush=-1),A;if(v===X&&(1===t?S._tr_align(s):5!==t&&(S._tr_stored_block(s,0,0,!1),3===t&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),r(e),0===e.avail_out))return s.last_flush=-1,A}return t!==T?A:s.wrap<=0?1:(2===s.wrap?(c(s,255&e.adler),c(s,e.adler>>8&255),c(s,e.adler>>16&255),c(s,e.adler>>24&255),c(s,255&e.total_in),c(s,e.total_in>>8&255),c(s,e.total_in>>16&255),c(s,e.total_in>>24&255)):(l(s,e.adler>>>16),l(s,65535&e.adler)),r(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?A:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==Y&&69!==t&&73!==t&&91!==t&&103!==t&&t!==q&&666!==t?i(e,x):(e.state=null,t===q?i(e,-3):A):x},n.deflateSetDictionary=function(e,t){var n,i,o,r,s,c,l,d,p=t.length;if(!e||!e.state)return x;if(2===(r=(n=e.state).wrap)||1===r&&n.status!==Y||n.lookahead)return x;for(1===r&&(e.adler=C(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===r&&(a(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new k.Buf8(n.w_size),k.arraySet(d,t,p-n.w_size,n.w_size,0),t=d,p=n.w_size),s=e.avail_in,c=e.next_in,l=e.input,e.avail_in=p,e.next_in=0,e.input=t,u(n);n.lookahead>=G;){i=n.strstart,o=n.lookahead-(G-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+G-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=G-1,u(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=G-1,n.match_available=0,e.next_in=c,e.input=l,e.avail_in=s,n.wrap=r,A},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(e,t,n){function i(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e,t,n,i,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=o,this.has_stree=e&&e.length}function a(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function r(e){return e<256?N[e]:N[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function c(e,t,n){e.bi_valid>T-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>T-e.bi_valid,e.bi_valid+=n-T):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function l(e,t,n){c(e,n[2*t],n[2*t+1])}function d(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function p(e,t,n){var i,o,a=new Array(P+1),r=0;for(i=1;i<=P;i++)a[i]=r=r+n[i-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=d(a[s]++,s))}}function u(e){var t;for(t=0;t<S;t++)e.dyn_ltree[2*t]=0;for(t=0;t<C;t++)e.dyn_dtree[2*t]=0;for(t=0;t<V;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*A]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function v(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,n,i){var o=2*t,a=2*n;return e[o]<e[a]||e[o]===e[a]&&i[t]<=i[n]}function f(e,t,n){for(var i=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&m(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!m(t,i,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=i}function _(e,t,n){var i,o,a,s,d=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],o=e.pending_buf[e.l_buf+d],d++,0===i?l(e,o,t):(l(e,(a=j[o])+k+1,t),0!==(s=O[a])&&c(e,o-=U[a],s),l(e,a=r(--i),n),0!==(s=L[a])&&c(e,i-=G[a],s))}while(d<e.last_lit);l(e,A,t)}function h(e,t){var n,i,o,a=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=w,n=0;n<c;n++)0!==a[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(o=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=r[2*o+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)f(e,a,n);o=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],f(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,a[2*o]=a[2*n]+a[2*i],e.depth[o]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,a[2*n+1]=a[2*i+1]=o,e.heap[1]=o++,f(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,o,a,r,s,c=t.dyn_tree,l=t.max_code,d=t.stat_desc.static_tree,p=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,v=t.stat_desc.extra_base,m=t.stat_desc.max_length,f=0;for(a=0;a<=P;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<w;n++)(a=c[2*c[2*(i=e.heap[n])+1]+1]+1)>m&&(a=m,f++),c[2*i+1]=a,i>l||(e.bl_count[a]++,r=0,i>=v&&(r=u[i-v]),s=c[2*i],e.opt_len+=s*(a+r),p&&(e.static_len+=s*(d[2*i+1]+r)));if(0!==f){do{for(a=m-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[m]--,f-=2}while(f>0);for(a=m;0!==a;a--)for(i=e.bl_count[a];0!==i;)(o=e.heap[--n])>l||(c[2*o+1]!==a&&(e.opt_len+=(a-c[2*o+1])*c[2*o],c[2*o+1]=a),i--)}}(e,t),p(a,l,e.bl_count)}function g(e,t,n){var i,o,a=-1,r=t[1],s=0,c=7,l=4;for(0===r&&(c=138,l=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)o=r,r=t[2*(i+1)+1],++s<c&&o===r||(s<l?e.bl_tree[2*o]+=s:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[2*x]++):s<=10?e.bl_tree[2*R]++:e.bl_tree[2*B]++,s=0,a=o,0===r?(c=138,l=3):o===r?(c=6,l=3):(c=7,l=4))}function y(e,t,n){var i,o,a=-1,r=t[1],s=0,d=7,p=4;for(0===r&&(d=138,p=3),i=0;i<=n;i++)if(o=r,r=t[2*(i+1)+1],!(++s<d&&o===r)){if(s<p)do{l(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==a&&(l(e,o,e.bl_tree),s--),l(e,x,e.bl_tree),c(e,s-3,2)):s<=10?(l(e,R,e.bl_tree),c(e,s-3,3)):(l(e,B,e.bl_tree),c(e,s-11,7));s=0,a=o,0===r?(d=138,p=3):o===r?(d=6,p=3):(d=7,p=4)}}function b(e,t,n,i){c(e,(M<<1)+(i?1:0),3),function(e,t,n,i){v(e),s(e,n),s(e,~n),E.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}var E=e("../utils/common"),M=0,k=256,S=k+1+29,C=30,V=19,w=2*S+1,P=15,T=16,A=256,x=16,R=17,B=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=new Array(2*(S+2));i(D);var H=new Array(2*C);i(H);var N=new Array(512);i(N);var j=new Array(256);i(j);var U=new Array(29);i(U);var G=new Array(C);i(G);var z,W,Y,q=!1;n._tr_init=function(e){q||(function(){var e,t,n,i,a,r=new Array(P+1);for(n=0,i=0;i<28;i++)for(U[i]=n,e=0;e<1<<O[i];e++)j[n++]=i;for(j[n-1]=i,a=0,i=0;i<16;i++)for(G[i]=a,e=0;e<1<<L[i];e++)N[a++]=i;for(a>>=7;i<C;i++)for(G[i]=a<<7,e=0;e<1<<L[i]-7;e++)N[256+a++]=i;for(t=0;t<=P;t++)r[t]=0;for(e=0;e<=143;)D[2*e+1]=8,e++,r[8]++;for(;e<=255;)D[2*e+1]=9,e++,r[9]++;for(;e<=279;)D[2*e+1]=7,e++,r[7]++;for(;e<=287;)D[2*e+1]=8,e++,r[8]++;for(p(D,S+1,r),e=0;e<C;e++)H[2*e+1]=5,H[2*e]=d(e,5);z=new o(D,O,k+1,S,P),W=new o(H,L,0,C,P),Y=new o(new Array(0),F,0,V,7)}(),q=!0),e.l_desc=new a(e.dyn_ltree,z),e.d_desc=new a(e.dyn_dtree,W),e.bl_desc=new a(e.bl_tree,Y),e.bi_buf=0,e.bi_valid=0,u(e)},n._tr_stored_block=b,n._tr_flush_block=function(e,t,n,i){var o,a,r=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<k;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),h(e,e.l_desc),h(e,e.d_desc),r=function(e){var t;for(g(e,e.dyn_ltree,e.l_desc.max_code),g(e,e.dyn_dtree,e.d_desc.max_code),h(e,e.bl_desc),t=V-1;t>=3&&0===e.bl_tree[2*I[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=n+5,n+4<=o&&-1!==t?b(e,t,n,i):4===e.strategy||a===o?(c(e,2+(i?1:0),3),_(e,D,H)):(c(e,4+(i?1:0),3),function(e,t,n,i){var o;for(c(e,t-257,5),c(e,n-1,5),c(e,i-4,4),o=0;o<i;o++)c(e,e.bl_tree[2*I[o]+1],3);y(e,e.dyn_ltree,t-1),y(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),_(e,e.dyn_ltree,e.dyn_dtree)),u(e),i&&v(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(j[n]+k+1)]++,e.dyn_dtree[2*r(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){c(e,2,3),l(e,A,D),function(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":1}],8:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(e,t,n){function i(e){if(!(this instanceof i))return new i(e);this.options=r.assign({level:u,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==p)throw new Error(c[n]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var o;if(o="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===d.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=a.deflateSetDictionary(this.strm,o))!==p)throw new Error(c[n]);this._dict_set=!0}}function o(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}var a=e("./zlib/deflate"),r=e("./utils/common"),s=e("./utils/strings"),c=e("./zlib/messages"),l=e("./zlib/zstream"),d=Object.prototype.toString,p=0,u=-1,v=0,m=8;i.prototype.push=function(e,t){var n,i,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=s.string2buf(e):"[object ArrayBuffer]"===d.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new r.Buf8(c),o.next_out=0,o.avail_out=c),1!==(n=a.deflate(o,i))&&n!==p)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(s.buf2binstring(r.shrinkBuf(o.output,o.next_out))):this.onData(r.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===i?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p):2!==i||(this.onEnd(p),o.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=i,n.deflate=o,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,o(e,t)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js"),_securedTouchDependencies.evaluateModernizr=function(){!function(e,t,n){function i(e,t){return typeof e===t}function o(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):b?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(e,t){return!!~(""+e).indexOf(t)}function r(e,n,i,a){var r,s,c,l,d="modernizr",p=o("div"),u=function(){var e=t.body;return e||((e=o(b?"svg":"body")).fake=!0),e}();if(parseInt(i,10))for(;i--;)(c=o("div")).id=a?a[i]:d+(i+1),p.appendChild(c);return(r=o("style")).type="text/css",r.id="s"+d,(u.fake?u:p).appendChild(r),u.appendChild(p),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(t.createTextNode(e)),p.id=d,u.fake&&(u.style.background="",u.style.overflow="hidden",l=y.style.overflow,y.style.overflow="hidden",y.appendChild(u)),s=n(p,e),u.fake?(u.parentNode.removeChild(u),y.style.overflow=l,y.offsetHeight):p.parentNode.removeChild(p),!!s}function s(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function c(t,n,i){var o;if("getComputedStyle"in e){o=getComputedStyle.call(e,t,n);var a=e.console;null!==o?i&&(o=o.getPropertyValue(i)):a&&a[a.error?"error":"log"].call(a,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else o=!n&&t.currentStyle&&t.currentStyle[i];return o}function l(t,i){var o=t.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(s(t[o]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var a=[];o--;)a.push("("+s(t[o])+":"+i+")");return r("@supports ("+(a=a.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"===c(e,null,"position")}))}return n}function d(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}function p(e,t,r,s){function c(){u&&(delete C.style,delete C.modElem)}if(s=!i(s,"undefined")&&s,!i(r,"undefined")){var p=l(e,r);if(!i(p,"undefined"))return p}for(var u,v,m,f,_,h=["modernizr","tspan","samp"];!C.style&&h.length;)u=!0,C.modElem=o(h.shift()),C.style=C.modElem.style;for(m=e.length,v=0;v<m;v++)if(f=e[v],_=C.style[f],a(f,"-")&&(f=d(f)),C.style[f]!==n){if(s||i(r,"undefined"))return c(),"pfx"!==t||f;try{C.style[f]=r}catch(e){}if(C.style[f]!==_)return c(),"pfx"!==t||f}return c(),!1}function u(e,t){return function(){return e.apply(t,arguments)}}function v(e,t,n,o,a){var r=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+k.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?p(s,t,o,a):function(e,t,n){var o;for(var a in e)if(e[a]in t)return!1===n?e[a]:i(o=t[e[a]],"function")?u(o,n||t):o;return!1}(s=(e+" "+V.join(r+" ")+r).split(" "),t,n)}function m(e,t,i){return v(e,n,n,t,i)}var f=[],_={_version:"3.9.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){f.push({name:e,fn:t,options:n})},addAsyncTest:function(e){f.push({name:null,fn:e})}},h=function(){};h.prototype=_,h=new h;var g=[],y=t.documentElement,b="svg"===y.nodeName.toLowerCase(),E=function(){var e=!("onblur"in y);return function(t,i){var a;return!!t&&(i&&"string"!=typeof i||(i=o(i||"div")),!(a=(t="on"+t)in i)&&e&&(i.setAttribute||(i=o("div")),i.setAttribute(t,""),a="function"==typeof i[t],i[t]!==n&&(i[t]=n),i.removeAttribute(t)),a)}}();_.hasEvent=E,h.addTest("ambientlight",E("devicelight",e)),h.addTest("applicationcache","applicationCache"in e);var M="Moz O ms Webkit",k=_._config.usePrefixes?M.split(" "):[];_._cssomPrefixes=k;var S={elem:o("modernizr")};h._q.push((function(){delete S.elem}));var C={style:S.elem.style};h._q.unshift((function(){delete C.style}));var V=_._config.usePrefixes?M.toLowerCase().split(" "):[];_._domPrefixes=V,_.testAllProps=v;var w=function(t){var i,o=x.length,a=e.CSSRule;if(void 0===a)return n;if(!t)return!1;if((i=(t=t.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in a)return"@"+t;for(var r=0;r<o;r++){var s=x[r];if(s.toUpperCase()+"_"+i in a)return"@-"+s.toLowerCase()+"-"+t}return!1};_.atRule=w;var P=_.prefixed=function(e,t,n){return 0===e.indexOf("@")?w(e):(-1!==e.indexOf("-")&&(e=d(e)),t?v(e,t,n):v(e,"pfx"))};h.addTest("batteryapi",!!P("battery",navigator)||!!P("getBattery",navigator),{aliases:["battery-api"]}),h.addTest("blobconstructor",(function(){try{return!!new Blob}catch(e){return!1}}),{aliases:["blob-constructor"]}),h.addTest("contextmenu","contextMenu"in y&&"HTMLMenuItemElement"in e),h.addTest("cors","XMLHttpRequest"in e&&"withCredentials"in new XMLHttpRequest);var T=P("crypto",e);h.addTest("crypto",!!P("subtle",T)),h.addTest("customelements","customElements"in e),h.addTest("customprotocolhandler",(function(){if(!navigator.registerProtocolHandler)return!1;try{navigator.registerProtocolHandler("thisShouldFail")}catch(e){return e instanceof TypeError}return!1})),h.addTest("customevent","CustomEvent"in e&&"function"==typeof e.CustomEvent),h.addTest("dart",!!P("startDart",navigator)),h.addTest("dataview","undefined"!=typeof DataView&&"getFloat64"in DataView.prototype),h.addTest("eventlistener","addEventListener"in e),h.addTest("forcetouch",(function(){return!!E(P("mouseforcewillbegin",e,!1),e)&&MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN&&MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN})),h.addTest("fullscreen",!(!P("exitFullscreen",t,!1)&&!P("cancelFullScreen",t,!1))),h.addTest("gamepads",!!P("getGamepads",navigator)),h.addTest("geolocation","geolocation"in navigator),h.addTest("ie8compat",!e.addEventListener&&!!t.documentMode&&7===t.documentMode),h.addTest("intl",!!P("Intl",e)),h.addTest("json","JSON"in e&&"parse"in JSON&&"stringify"in JSON),_.testAllProps=m,h.addTest("ligatures",m("fontFeatureSettings",'"liga" 1')),h.addTest("messagechannel","MessageChannel"in e),h.addTest("notification",(function(){if(!e.Notification||!e.Notification.requestPermission)return!1;if("granted"===e.Notification.permission)return!0;try{new e.Notification("")}catch(e){if("TypeError"===e.name)return!1}return!0})),h.addTest("pagevisibility",!!P("hidden",t,!1)),h.addTest("performance",!!P("performance",e));var A=[""].concat(V);_._domPrefixesAll=A,h.addTest("pointerevents",(function(){for(var e=0,t=A.length;e<t;e++)if(E(A[e]+"pointerdown"))return!0;return!1})),h.addTest("pointerlock",!!P("exitPointerLock",t)),h.addTest("queryselector","querySelector"in t&&"querySelectorAll"in t),h.addTest("quotamanagement",(function(){var e=P("temporaryStorage",navigator),t=P("persistentStorage",navigator);return!(!e||!t)})),h.addTest("requestanimationframe",!!P("requestAnimationFrame",e),{aliases:["raf"]}),h.addTest("serviceworker","serviceWorker"in navigator);var x=_._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];_._prefixes=x;var R=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return r("@media "+t+" { #modernizr { position: absolute; } }",(function(t){n="absolute"===(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position})),n}}();_.mq=R,h.addTest("touchevents",(function(){if("ontouchstart"in e||e.TouchEvent||e.DocumentTouch&&t instanceof DocumentTouch)return!0;var n=["(",x.join("touch-enabled),("),"heartz",")"].join("");return R(n)})),h.addTest("typedarrays","ArrayBuffer"in e),h.addTest("vibrate",!!P("vibrate",navigator)),h.addTest("webgl",(function(){return"WebGLRenderingContext"in e}));var B=!1;try{B="WebSocket"in e&&2===e.WebSocket.CLOSING}catch(e){}h.addTest("websockets",B),h.addTest("xdomainrequest","XDomainRequest"in e),function(){var e,t,n,o,a,r;for(var s in f)if(f.hasOwnProperty(s)){if(e=[],(t=f[s]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=i(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++)1===(r=e[a].split(".")).length?h[r[0]]=o:(h[r[0]]&&(!h[r[0]]||h[r[0]]instanceof Boolean)||(h[r[0]]=new Boolean(h[r[0]])),h[r[0]][r[1]]=o),g.push((o?"":"no-")+r.join("-"))}}(),delete _.addTest,delete _.addAsyncTest;for(var O=0;O<h._q.length;O++)h._q[O]();e.Modernizr=h}(window,document)};var __awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(r,s)}c((i=i.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities,_securedTouchEntities;!function(e){!function(e){e[e.Unknown=0]="Unknown",e[e.FlingRight=1]="FlingRight",e[e.FlingLeft=2]="FlingLeft",e[e.FlingUp=3]="FlingUp",e[e.FlingDown=4]="FlingDown",e[e.Diagonal=5]="Diagonal",e[e.ScrollRight=6]="ScrollRight",e[e.ScrollLeft=7]="ScrollLeft",e[e.ScrollUp=8]="ScrollUp",e[e.ScrollDown=9]="ScrollDown",e[e.Tap=10]="Tap",e[e.DoubleTap=11]="DoubleTap"}(e.GestureType||(e.GestureType={}))}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(){}return Object.defineProperty(e,"isLogEnabled",{get:function(){return this._isLogEnabled||window["enable-logs-securedtouch"]},set:function(e){this._isLogEnabled=e},enumerable:!0,configurable:!0}),e.debug=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t="[WebSDK] "+t,e.isLogEnabled&&(n&&n.length>0?console.debug?console.debug(t,n):console.log(t,n):console.debug?console.debug(t):console.log(t))},e.error=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t="[WebSDK] "+t,e.isLogEnabled&&(n&&n.length>0?console.error(t,n):console.error(t))},e.warn=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t="[WebSDK] "+t,e.isLogEnabled&&(n&&n.length>0?console.warn(t,n):console.warn(t))},e.info=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t="[WebSDK] "+t,e.isLogEnabled&&(n&&n.length>0?console.info(t,n):console.info(t))},e}();e.STLogger=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(){}return Object.defineProperty(e,"CLIENT_VERSION",{get:function(){return"3.6.4w"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SALT",{get:function(){return"ST8irbd3bB"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WINDOW_ID_KEY",{get:function(){return"SecuredTouchWindowId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPS_KEY",{get:function(){return"Ops"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WEB_GL_KEY",{get:function(){return"WebGlId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOKEN_BASE_KEY",{get:function(){return"U2Vzc2lvblRva2Vu"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOKEN_TS_BASE_KEY",{get:function(){return"TSU2Vzc2lvblRva2Vu"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APP_SECRET_KEY",{get:function(){return"QXBwU2VjcmV0"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"INIT_PARAMS_KEY",{get:function(){return"SecuredTouchInitParams"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"INIT_PARAMS_TS_KEY",{get:function(){return"SecuredTouchInitParamsTS"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ST_INIT_KEY",{get:function(){return"SecuredTouchInitST"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TOTAL_GESTURE_COUNTER_KEY",{get:function(){return"SecuredTouchTotalGestureCounter"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"APP_SESSION_ID_KEY",{get:function(){return"SecuredTouchAppSessionId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LAST_DISPOSED_PAYLOAD_KEY",{get:function(){return"SecuredTouchDisposedPayload"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LAST_DISPOSED_TS_KEY",{get:function(){return"SecuredTouchDisposedTimestamp"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DEVICE_CREDENTIALS_KEY",{get:function(){return"U2VjdXJlZFRvdWNoRGV2aWNlU2VjcmV0"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DEVICE_ID_KEY",{get:function(){return"SecuredTouchDeviceId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"REMOTE_LOG_ENABLED_KEY",{get:function(){return"SecuredTouchRemoteLogEnabled"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"USER_ID_KEY",{get:function(){return"SecuredTouchUserId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"USER_ID_TS_KEY",{get:function(){return"SecuredTouchUserIdTs"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CAPTURED_KEYBOARD_INTERACTIONS",{get:function(){return"SecuredTouchCapturedKeyboard"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CAPTURED_MOUSE_INTERACTIONS",{get:function(){return"SecuredTouchCapturedMouse"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CAPTURED_GESTURES",{get:function(){return"SecuredTouchCapturedGestures"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CAPTURED_INDIRECT",{get:function(){return"SecuredTouchCapturedIndirect"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CANCELED_INTERACTIONS",{get:function(){return"SecuredTouchCanceledInteractions"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CANCELED_GESTURES",{get:function(){return"SecuredTouchCanceledGestures"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SESSION_STORAGE_UPDATE_TS",{get:function(){return"SecuredTouchBufferPushedTs"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SESSION_STORAGE_TTL_MILLIS",{get:function(){return 1e4},enumerable:!0,configurable:!0}),Object.defineProperty(e,"METADATA_TTL_MILLIS",{get:function(){return 5184e5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HEART_BEAT_TAG",{get:function(){return"HeartBeat"},enumerable:!0,configurable:!0}),e}();e.SecuredTouchConstants=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){}return t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.makeId=function(e){for(var t="",n="abcdefghijklmnopqrstuvwxyz".length,i=0;i<e;i++)t+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(Math.random()*n));return t},t.ieFix=function(){(-1!=navigator.userAgent.indexOf("MSIE")?/MSIE (\d+\.\d+);/:/Trident.*rv[ :]*(\d+\.\d+)/).test(navigator.userAgent)&&(document.body.setAttribute("style","-ms-touch-action:none;"),document.body.style.touchAction="none",document.body.style.msTouchAction="none")},t.now=function(){var e=window.performance||{};return e.now=e.now||e.webkitNow||e.msNow||e.oNow||e.mozNow||function(){return(new Date).getTime()},e.now()},Object.defineProperty(t,"isMobile",{get:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},enumerable:!0,configurable:!0}),t.encodeBase64=function(e){var n,i,o,a,r,s,c,l="",d=0;for(e=t.utf8Encode(e);d<e.length;)a=(n=e.charCodeAt(d++))>>2,r=(3&n)<<4|(i=e.charCodeAt(d++))>>4,s=(15&i)<<2|(o=e.charCodeAt(d++))>>6,c=63&o,isNaN(i)?s=c=64:isNaN(o)&&(c=64),l=l+t.keyStr.charAt(a)+t.keyStr.charAt(r)+t.keyStr.charAt(s)+t.keyStr.charAt(c);return l},t.utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},t.hash=function(n){var i=t.hashCache.get(n);return i||(i=_securedTouchDependencies.sha256(n+e.SecuredTouchConstants.SALT),t.hashCache.set(n,i)),i},t.utf8Decode=function(e){for(var t="",n=0,i=0,o=0,a=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):i>191&&i<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a),n+=3);return t},t.decodeBase64=function(e){var n,i,o,a,r,s,c="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)n=t.keyStr.indexOf(e.charAt(l++))<<2|(a=t.keyStr.indexOf(e.charAt(l++)))>>4,i=(15&a)<<4|(r=t.keyStr.indexOf(e.charAt(l++)))>>2,o=(3&r)<<6|(s=t.keyStr.indexOf(e.charAt(l++))),c+=String.fromCharCode(n),64!=r&&(c+=String.fromCharCode(i)),64!=s&&(c+=String.fromCharCode(o));return t.utf8Decode(c)},t.hashCode=function(e){var t=0,n=e?e.length:0,i=0;if(n>0)for(;i<n;)t=(t<<5)-t+e.charCodeAt(i++)|0;return t},t.extractEnv=function(e){var t=e.indexOf("://");t>0&&(t+="://".length);var n=e.indexOf(".securedtouch.com");return e.substring(t,n)},t.extendPrimitiveValues=function(e,n,i){for(var o=t.allKeys(n),a=0;a<o.length;)t.isObject(n[o[a]])||i&&(!i||void 0!==e[o[a]])||(e[o[a]]=n[o[a]]),a++;return e},t.extend=function(e,n,i){for(var o=t.allKeys(n),a=0;a<o.length;)(!i||i&&void 0===e[o[a]])&&(e[o[a]]=n[o[a]]),a++;return e},t.flatten=function(e){var n={};return t.dive("",e,n),n},t.dive=function(e,n,i){for(var o in n)if(n.hasOwnProperty(o)){var a=o,r=n[o];e.length>0&&(a=e+"."+o),t.isObject(r)?t.dive(a,r,i):i[a]=r}},t.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},t.isFunction=function(e){return e&&"function"==typeof e},t.isPassiveSupported=function(){var e=!1,t=function(){};try{var n={get passive(){return e=!0,!0}};window.addEventListener("test",t,n),window.removeEventListener("test",t,!1)}catch(t){e=!1}return e},t.getAttribute=function(e,t){try{if(e&&this.isFunction(e.getAttribute))return e.getAttribute(t)||""}catch(e){}return""},t.allKeys=function(e){if(!t.isObject(e))return[];var n=[];for(var i in e)n.push(i);return n},t.values=function(e){for(var n=t.allKeys(e),i=n.length,o=Array(i),a=0;a<i;a++)o[a]=e[n[a]];return o},t.modifiersKeys=function(e){var t=[];return e.getModifierState&&["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","OS","ScrollLock","Shift","Super","Symbol","SymbolLock"].forEach((function(n){e.getModifierState(n.toString())&&t.push(n)})),t},t.getKeyboardEvent=function(e){return e||window.event},t.getSrcElement=function(e){return e.srcElement||e.target},t.getObjectType=function(e){try{var t=/function (.{1,})\(/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}catch(e){return""}},t.isSelectorMatches=function(e,t){try{var n=Element.prototype;return!!(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector).call(e,t)}catch(e){return!1}},t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},t.safeJsonParse=function(t){var n=null;try{t&&(n=JSON.parse(t))}catch(t){e.STLogger.warn("Failed to parse object "+t),n=null}return n},t.getElementSelectionStart=function(e){var t;try{t=e.selectionStart}catch(e){t=""}return t},t.getElementSelectionEnd=function(e){var t;try{t=e.selectionEnd}catch(e){t=""}return t},t.getDeviceOrientation=function(){var e=screen.orientation||screen.mozOrientation||{},t=screen.msOrientation||e.type,n=e.angle;return{orientation:t?t.toString():"",angle:null!=n?n.toString():""}},t.getCurrentLocationUrl=function(){return e.SecuredTouchPointerConfig.instance.sendLocation?window.location.href:""},t.collectBehavioralData=function(t){var n=e.SecuredTouchPointerConfig.instance.behavioralBlacklist;return!n||!n[t]||!Boolean(window.location.href.match(n[t]))},t.getCookie=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null},t.setCookie=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1e3*n),document.cookie=e+"="+t+";path=/;secure;expires="+i.toUTCString()},t.deleteCookie=function(e){t.setCookie(e,"",-1)},t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.addEventListener=function(t,n,i,o){e.SecuredTouchPointerConfig.instance.eventsBlackList.has(n)||t.addEventListener(n,i,o)},t.getErrorAsString=function(e){var t;if(e)try{t="string"==typeof e||e instanceof String?e:e instanceof Error?e.toString():JSON.stringify(e)}catch(n){t=e.toString()}return t||""},t.getHostnameFromRegex=function(e){if(e){var t=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return t&&t[1]}return null},t.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},t.hashCache=new Map,t.hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),t.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t}();e.SecuredTouchUtil=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){var e={urlWhitelist:t.SDK_PROPERTIES_DEFAULT.urlWhitelist,webRtcUrl:t.SDK_PROPERTIES_DEFAULT.webRtcUrl,localStorageTtlMs:t.SDK_PROPERTIES_DEFAULT.localStorageTtlMs,eventsBlackList:t.SDK_PROPERTIES_DEFAULT.eventsBlackList,indirectInterval:t.SDK_PROPERTIES_DEFAULT.indirectInterval,updateInterval:t.SDK_PROPERTIES_DEFAULT.updateInterval,idleTimeoutMs:t.SDK_PROPERTIES_DEFAULT.idleTimeoutMs,maxEventsCount:t.SDK_PROPERTIES_DEFAULT.maxEventsCount,fieldBlackList:t.SDK_PROPERTIES_DEFAULT.fieldBlackList,cssSelectors:t.SDK_PROPERTIES_DEFAULT.cssSelectors,tagsCssSelectors:t.SDK_PROPERTIES_DEFAULT.tagsCssSelectors,maxRequestQueueSize:t.SDK_PROPERTIES_DEFAULT.maxRequestQueueSize,requestTimeout:t.SDK_PROPERTIES_DEFAULT.requestTimeout,sendLocation:t.SDK_PROPERTIES_DEFAULT.sendLocation,heartBeatFrequencyMs:t.SDK_PROPERTIES_DEFAULT.heartBeatFrequencyMs,beforeunloadEnabled:t.SDK_PROPERTIES_DEFAULT.beforeunloadEnabled,devToolsEnabled:t.SDK_PROPERTIES_DEFAULT.devToolsEnabled,snapshotsReduceFactor:t.SDK_PROPERTIES_DEFAULT.snapshotsReduceFactor,eventsReduceFactorMap:t.SDK_PROPERTIES_DEFAULT.eventsReduceFactorMap,remoteLogsEnabled:t.SDK_PROPERTIES_DEFAULT.remoteLogsEnabled,maxRemoteLogs:t.SDK_PROPERTIES_DEFAULT.maxRemoteLogs,failuresAmountToReport:t.SDK_PROPERTIES_DEFAULT.failuresAmountToReport,metricsFrequency:t.SDK_PROPERTIES_DEFAULT.metricsFrequency};this.pointerParams={enabled:t.ENABLED_DEFAULT,url:t.URL_DEFAULT,clientDigest:t.CLIENT_DIGEST_DEFAULT,readTimeout:t.READ_TIMEOUT_DEFAULT,establishTimeout:t.ESTABLISH_TIMEOUT_DEFAULT,bufferSize:t.BUFFER_SIZE_DEFAULT,maxSensorSamples:t.MAX_SENSOR_SAMPLES_DEFAULT,maxSnapshotsCount:t.MAX_SNAPSHOTS_COUNT_DEFAULT,logMode:t.LOG_MODE_DEFAULT,shouldSendOnKeyboardUp:t.SHOULD_SEND_ON_KEYBOARD_UP_DEFAULT,sensorsTimestampDeltaInMillis:t.SENSORS_TIMESTAMP_DELTA_IN_MILLIS_DEFAULT,propertyBlackList:t.PROPERTY_BLACK_LIST_DEFAULT,behavioralBlacklist:t.BEHAVIORAL_BLACK_LIST_DEFAULT,tagsBlacklistRegex:t.TAGS_BLACK_LIST_REGEX_DEFAULT,tagsToFlushRegex:t.TAGS_TO_FLUSH_BLACK_LIST_REGEX_DEFAULT,version:t.VERSION_DEFAULT,sdkProperties:e}}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.refreshPointerParams=function(e){this.pointerParams.enabled=null!=e.enabled?Boolean(e.enabled):t.ENABLED_DEFAULT,this.pointerParams.url=null!=e.url?e.url:t.URL_DEFAULT,this.pointerParams.clientDigest=null!=e.clientDigest?e.clientDigest:t.CLIENT_DIGEST_DEFAULT,this.pointerParams.readTimeout=null!=e.readTimeout?Number(e.readTimeout):t.READ_TIMEOUT_DEFAULT,this.pointerParams.establishTimeout=null!=e.establishTimeout?Number(e.establishTimeout):t.ESTABLISH_TIMEOUT_DEFAULT,this.pointerParams.bufferSize=null!=e.bufferSize?Number(e.bufferSize):t.BUFFER_SIZE_DEFAULT,this.pointerParams.maxSensorSamples=null!=e.maxSensorSamples?Number(e.maxSensorSamples):t.MAX_SENSOR_SAMPLES_DEFAULT,this.pointerParams.maxSnapshotsCount=null!=e.maxSnapshotsCount?Number(e.maxSnapshotsCount):t.MAX_SNAPSHOTS_COUNT_DEFAULT,this.pointerParams.logMode=null!=e.logMode?Number(e.logMode):t.LOG_MODE_DEFAULT,this.pointerParams.shouldSendOnKeyboardUp=null!=e.shouldSendOnKeyboardUp?Boolean(e.shouldSendOnKeyboardUp):t.SHOULD_SEND_ON_KEYBOARD_UP_DEFAULT,this.pointerParams.sensorsTimestampDeltaInMillis=null!=e.sensorsTimestampDeltaInMillis?Number(e.sensorsTimestampDeltaInMillis):t.SENSORS_TIMESTAMP_DELTA_IN_MILLIS_DEFAULT,this.pointerParams.propertyBlackList=null!=e.propertyBlackList?e.propertyBlackList:t.PROPERTY_BLACK_LIST_DEFAULT,this.pointerParams.behavioralBlacklist=null!=e.behavioralBlacklist?e.behavioralBlacklist:t.BEHAVIORAL_BLACK_LIST_DEFAULT,this.pointerParams.tagsBlacklistRegex=null!=e.tagsBlacklistRegex?e.tagsBlacklistRegex:t.TAGS_BLACK_LIST_REGEX_DEFAULT,this.pointerParams.tagsToFlushRegex=null!=e.tagsToFlushRegex?e.tagsToFlushRegex:t.TAGS_TO_FLUSH_BLACK_LIST_REGEX_DEFAULT,this.pointerParams.version=null!=e.version?e.version:t.VERSION_DEFAULT,this.populateSdkProperties(e.sdkProperties)},t.prototype.populateSdkProperties=function(n){if(n){n.web_sdk_url_whitelist?this.pointerParams.sdkProperties.urlWhitelist=e.SecuredTouchUtil.safeJsonParse(n.web_sdk_url_whitelist):this.pointerParams.sdkProperties.urlWhitelist=t.SDK_PROPERTIES_DEFAULT.urlWhitelist,n.web_sdk_web_rtc_url?this.pointerParams.sdkProperties.webRtcUrl=n.web_sdk_web_rtc_url:this.pointerParams.sdkProperties.webRtcUrl=t.SDK_PROPERTIES_DEFAULT.webRtcUrl,n.web_sdk_local_storage_ttl_ms?this.pointerParams.sdkProperties.localStorageTtlMs=Number(n.web_sdk_local_storage_ttl_ms):this.pointerParams.sdkProperties.localStorageTtlMs=t.SDK_PROPERTIES_DEFAULT.localStorageTtlMs;var i=e.SecuredTouchUtil.safeJsonParse(n.web_sdk_events_black_list);this.pointerParams.sdkProperties.eventsBlackList=i?new Set(i):t.SDK_PROPERTIES_DEFAULT.eventsBlackList,n.web_sdk_indirect_interval?this.pointerParams.sdkProperties.indirectInterval=Number(n.web_sdk_indirect_interval):this.pointerParams.sdkProperties.indirectInterval=t.SDK_PROPERTIES_DEFAULT.indirectInterval,n.web_sdk_update_interval?this.pointerParams.sdkProperties.updateInterval=Number(n.web_sdk_update_interval):this.pointerParams.sdkProperties.updateInterval=t.SDK_PROPERTIES_DEFAULT.updateInterval,n.web_sdk_idle_timeout_ms?this.pointerParams.sdkProperties.idleTimeoutMs=Number(n.web_sdk_idle_timeout_ms):this.pointerParams.sdkProperties.idleTimeoutMs=t.SDK_PROPERTIES_DEFAULT.idleTimeoutMs,n.web_sdk_max_events_count?this.pointerParams.sdkProperties.maxEventsCount=Number(n.web_sdk_max_events_count):this.pointerParams.sdkProperties.maxEventsCount=t.SDK_PROPERTIES_DEFAULT.maxEventsCount;var o=e.SecuredTouchUtil.safeJsonParse(n.web_sdk_field_black_list);this.pointerParams.sdkProperties.fieldBlackList=o?new Set(o):t.SDK_PROPERTIES_DEFAULT.fieldBlackList,n.web_sdk_css_selectors?this.pointerParams.sdkProperties.cssSelectors=n.web_sdk_css_selectors:this.pointerParams.sdkProperties.cssSelectors=t.SDK_PROPERTIES_DEFAULT.cssSelectors,n.web_sdk_tags_css_selectors?this.pointerParams.sdkProperties.tagsCssSelectors=n.web_sdk_tags_css_selectors:this.pointerParams.sdkProperties.tagsCssSelectors=t.SDK_PROPERTIES_DEFAULT.tagsCssSelectors,n.web_sdk_max_request_queue_size?this.pointerParams.sdkProperties.maxRequestQueueSize=Number(n.web_sdk_max_request_queue_size):this.pointerParams.sdkProperties.maxRequestQueueSize=t.SDK_PROPERTIES_DEFAULT.maxRequestQueueSize,n.web_sdk_request_timeout?this.pointerParams.sdkProperties.requestTimeout=Number(n.web_sdk_request_timeout):this.pointerParams.sdkProperties.requestTimeout=t.SDK_PROPERTIES_DEFAULT.requestTimeout,n.web_sdk_send_location?this.pointerParams.sdkProperties.sendLocation="true"===n.web_sdk_send_location:this.pointerParams.sdkProperties.sendLocation=t.SDK_PROPERTIES_DEFAULT.sendLocation,n.heart_beat_frequency_ms?this.pointerParams.sdkProperties.heartBeatFrequencyMs=Number(n.heart_beat_frequency_ms):this.pointerParams.sdkProperties.heartBeatFrequencyMs=t.SDK_PROPERTIES_DEFAULT.heartBeatFrequencyMs,n.web_sdk_beforeunload_enabled?this.pointerParams.sdkProperties.beforeunloadEnabled="true"===n.web_sdk_beforeunload_enabled:this.pointerParams.sdkProperties.beforeunloadEnabled=t.SDK_PROPERTIES_DEFAULT.beforeunloadEnabled,n.web_sdk_devtools_enabled?this.pointerParams.sdkProperties.devToolsEnabled="true"===n.web_sdk_devtools_enabled:this.pointerParams.sdkProperties.devToolsEnabled=t.SDK_PROPERTIES_DEFAULT.devToolsEnabled,n.snapshots_reduce_factor?this.pointerParams.sdkProperties.snapshotsReduceFactor=Number(n.snapshots_reduce_factor):this.pointerParams.sdkProperties.snapshotsReduceFactor=t.SDK_PROPERTIES_DEFAULT.snapshotsReduceFactor,n.events_reduce_factor_map?this.pointerParams.sdkProperties.eventsReduceFactorMap=n.events_reduce_factor_map:this.pointerParams.sdkProperties.eventsReduceFactorMap=t.SDK_PROPERTIES_DEFAULT.eventsReduceFactorMap,n.remote_logs_enabled?this.pointerParams.sdkProperties.remoteLogsEnabled="true"===n.remote_logs_enabled:this.pointerParams.sdkProperties.remoteLogsEnabled=t.SDK_PROPERTIES_DEFAULT.remoteLogsEnabled,n.max_remote_logs?this.pointerParams.sdkProperties.maxRemoteLogs=Number(n.max_remote_logs):this.pointerParams.sdkProperties.maxRemoteLogs=t.SDK_PROPERTIES_DEFAULT.maxRemoteLogs,n.failures_amount_to_report?this.pointerParams.sdkProperties.failuresAmountToReport=Number(n.failures_amount_to_report):this.pointerParams.sdkProperties.failuresAmountToReport=t.SDK_PROPERTIES_DEFAULT.failuresAmountToReport,n.metrics_frequency?this.pointerParams.sdkProperties.metricsFrequency=Number(n.metrics_frequency):this.pointerParams.sdkProperties.metricsFrequency=t.SDK_PROPERTIES_DEFAULT.metricsFrequency}else this.pointerParams.sdkProperties=t.SDK_PROPERTIES_DEFAULT},Object.defineProperty(t.prototype,"enabled",{get:function(){return this.pointerParams.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.pointerParams.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientDigest",{get:function(){return this.pointerParams.clientDigest},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readTimeout",{get:function(){return this.pointerParams.readTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"establishTimeout",{get:function(){return this.pointerParams.establishTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this.pointerParams.bufferSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSensorSamples",{get:function(){return this.pointerParams.maxSensorSamples},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSnapshotsCount",{get:function(){return this.pointerParams.maxSnapshotsCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logMode",{get:function(){return this.pointerParams.logMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldSendOnKeyboardUp",{get:function(){return this.pointerParams.shouldSendOnKeyboardUp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sensorsTimestampDeltaInMillis",{get:function(){return this.pointerParams.sensorsTimestampDeltaInMillis},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"propertyBlackList",{get:function(){return this.pointerParams.propertyBlackList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"behavioralBlacklist",{get:function(){return this.pointerParams.behavioralBlacklist},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tagsBlacklistRegex",{get:function(){return this.pointerParams.tagsBlacklistRegex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tagsToFlushRegex",{get:function(){return this.pointerParams.tagsToFlushRegex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this.pointerParams.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlWhitelist",{get:function(){return this.pointerParams.sdkProperties.urlWhitelist},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"webRtcUrl",{get:function(){return this.pointerParams.sdkProperties.webRtcUrl},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localStorageTtlMs",{get:function(){return this.pointerParams.sdkProperties.localStorageTtlMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventsBlackList",{get:function(){return this.pointerParams.sdkProperties.eventsBlackList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indirectInterval",{get:function(){return this.pointerParams.sdkProperties.indirectInterval},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateInterval",{get:function(){return this.pointerParams.sdkProperties.updateInterval},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"idleTimeoutMs",{get:function(){return this.pointerParams.sdkProperties.idleTimeoutMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxEventsCount",{get:function(){return this.pointerParams.sdkProperties.maxEventsCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldBlackList",{get:function(){return this.pointerParams.sdkProperties.fieldBlackList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssSelectors",{get:function(){return this.pointerParams.sdkProperties.cssSelectors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tagsCssSelectors",{get:function(){return this.pointerParams.sdkProperties.tagsCssSelectors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxRequestQueueSize",{get:function(){return this.pointerParams.sdkProperties.maxRequestQueueSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestTimeout",{get:function(){return this.pointerParams.sdkProperties.requestTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sendLocation",{get:function(){return this.pointerParams.sdkProperties.sendLocation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heartBeatFrequencyMs",{get:function(){return this.pointerParams.sdkProperties.heartBeatFrequencyMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beforeUnloadEnabled",{get:function(){return this.pointerParams.sdkProperties.beforeunloadEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"devToolsEnabled",{get:function(){return this.pointerParams.sdkProperties.devToolsEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapshotsReduceFactor",{get:function(){return this.pointerParams.sdkProperties.snapshotsReduceFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventsReduceFactorMap",{get:function(){return this.pointerParams.sdkProperties.eventsReduceFactorMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"remoteLogsEnabled",{get:function(){return this.pointerParams.sdkProperties.remoteLogsEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxRemoteLogs",{get:function(){return this.pointerParams.sdkProperties.maxRemoteLogs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"failuresAmountToReport",{get:function(){return this.pointerParams.sdkProperties.failuresAmountToReport},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metricsFrequency",{get:function(){return this.pointerParams.sdkProperties.metricsFrequency},enumerable:!0,configurable:!0}),t.ENABLED_DEFAULT=!0,t.URL_DEFAULT=null,t.CLIENT_DIGEST_DEFAULT="",t.READ_TIMEOUT_DEFAULT=0,t.ESTABLISH_TIMEOUT_DEFAULT=0,t.BUFFER_SIZE_DEFAULT=0,t.MAX_SENSOR_SAMPLES_DEFAULT=0,t.MAX_SNAPSHOTS_COUNT_DEFAULT=0,t.LOG_MODE_DEFAULT=0,t.SHOULD_SEND_ON_KEYBOARD_UP_DEFAULT=!0,t.SENSORS_TIMESTAMP_DELTA_IN_MILLIS_DEFAULT=0,t.PROPERTY_BLACK_LIST_DEFAULT=[],t.BEHAVIORAL_BLACK_LIST_DEFAULT=null,t.TAGS_BLACK_LIST_REGEX_DEFAULT="",t.TAGS_TO_FLUSH_BLACK_LIST_REGEX_DEFAULT="",t.VERSION_DEFAULT="",t.SDK_PROPERTIES_DEFAULT={urlWhitelist:[],webRtcUrl:"",localStorageTtlMs:18e4,eventsBlackList:new Set,indirectInterval:3e3,updateInterval:1e3,idleTimeoutMs:1e3,maxEventsCount:1e3,fieldBlackList:new Set,cssSelectors:"",tagsCssSelectors:"",maxRequestQueueSize:10,requestTimeout:5e3,sendLocation:!0,heartBeatFrequencyMs:6e5,beforeunloadEnabled:!1,devToolsEnabled:!0,snapshotsReduceFactor:0,eventsReduceFactorMap:"",remoteLogsEnabled:!0,maxRemoteLogs:2,failuresAmountToReport:5,metricsFrequency:5},t}();e.SecuredTouchPointerConfig=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(e,t){this.crossStorageClient=new CrossStorageClient(e,t)}return t.prototype.get=function(t){var n=e.SecuredTouchUtil.hash(t);return this.crossStorageClient.get(n)},t.prototype.del=function(t){return this.crossStorageClient.del(e.SecuredTouchUtil.hash(t))},t.prototype.set=function(t,n,i){return this.crossStorageClient.set(e.SecuredTouchUtil.hash(t),n,i)},t.prototype.onConnect=function(){return this.crossStorageClient.onConnect()},t}();e.SecuredTouchCrossStorage=t;var n=function(){function e(e){this.storage=e}return e.prototype.get=function(e){return Promise.resolve(this.storage.getItem(e))},e.prototype.del=function(e){return this.storage.removeItem(e),Promise.resolve()},e.prototype.set=function(e,t){return this.storage.setItem(e,t),Promise.resolve()},e.prototype.onConnect=function(){return Promise.resolve()},e}();e.SecuredTouchCrossStorageFallback=n}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(e){this.storage=e}return t.prototype.getItem=function(t){var n=e.SecuredTouchUtil.hash(t),i=this.storage.getItem(n);return i||(i=this.storage.getItem(t))&&(this.storage.setItem(n,i),this.storage.removeItem(t)),i},t.prototype.removeItem=function(t){return this.storage.removeItem(e.SecuredTouchUtil.hash(t))},t.prototype.setItem=function(t,n){return this.storage.setItem(e.SecuredTouchUtil.hash(t),n)},t}();e.SecuredTouchStorageWrapper=t;var n=function(){function e(){this.internalStorageMap=new Map}return e.prototype.getItem=function(e){return this.internalStorageMap.get(e)},e.prototype.removeItem=function(e){this.internalStorageMap.delete(e)},e.prototype.setItem=function(e,t){this.internalStorageMap.set(e,t)},e}();e.SecuredTouchStorageFallback=n}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){this.appId="";try{window.sessionStorage.setItem("_st_storage_enabled_check","test"),window.sessionStorage.removeItem("_st_storage_enabled_check"),this.stSessionStorage=window.sessionStorage}catch(t){e.STLogger.warn("session storage disabled"),this.stSessionStorage=new e.SecuredTouchStorageFallback}try{window.localStorage.setItem("_st_storage_enabled_check","test"),window.localStorage.removeItem("_st_storage_enabled_check"),this.stLocalStorage=new e.SecuredTouchStorageWrapper(window.localStorage)}catch(t){e.STLogger.warn("local storage disabled"),this.stLocalStorage=new e.SecuredTouchStorageWrapper(new e.SecuredTouchStorageFallback),this.crossStorage=new e.SecuredTouchCrossStorageFallback(this.stLocalStorage)}}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.initDeviceStorage=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:return(i={deviceId:this.stLocalStorage.getItem(e.SecuredTouchConstants.DEVICE_ID_KEY),deviceSecret:this.stLocalStorage.getItem(e.SecuredTouchConstants.DEVICE_CREDENTIALS_KEY)}).deviceId?(this.cachedDeviceId=i.deviceId,this.cachedDeviceSecret=i.deviceSecret||e.SecuredTouchUtil.hash(i.deviceId),this.crossStorage=new e.SecuredTouchCrossStorageFallback(this.stLocalStorage),[3,3]):[3,1];case 1:return[4,this.initCrossStorage(t,n)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.initCrossStorage=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,a,r;return __generator(this,(function(s){switch(s.label){case 0:if(o=e.SecuredTouchUtil.extractEnv(n),a=t||"https://hub.securedtouch.com/"+o+"/hub.html",this.crossStorage)return[3,6];s.label=1;case 1:return s.trys.push([1,4,,5]),this.crossStorage=new e.SecuredTouchCrossStorage(a,{timeout:1e4}),[4,this.crossStorage.onConnect()];case 2:return s.sent(),[4,Promise.all([this.crossStorage.get(e.SecuredTouchConstants.DEVICE_ID_KEY),this.crossStorage.get(e.SecuredTouchConstants.DEVICE_CREDENTIALS_KEY).catch((function(e){}))])];case 3:return i=s.sent(),this.cachedDeviceId=i[0],this.cachedDeviceSecret=i[1],this.cachedDeviceId&&this.stLocalStorage.setItem(e.SecuredTouchConstants.DEVICE_ID_KEY,this.cachedDeviceId),this.cachedDeviceSecret&&this.stLocalStorage.setItem(e.SecuredTouchConstants.DEVICE_CREDENTIALS_KEY,this.cachedDeviceSecret),[3,5];case 4:return r=s.sent(),e.STLogger.warn("SecuredTouchSession crossStorage failed to connect "+r),this.crossStorage=new e.SecuredTouchCrossStorageFallback(this.stLocalStorage),[3,5];case 5:this.cachedDeviceId&&!this.cachedDeviceSecret&&(this.cachedDeviceSecret=e.SecuredTouchUtil.hash(this.cachedDeviceId)),s.label=6;case 6:return[2]}}))}))},Object.defineProperty(t.prototype,"windowId",{get:function(){return this.cachedWindowId||(this.cachedWindowId=this.stSessionStorage.getItem(e.SecuredTouchConstants.WINDOW_ID_KEY),this.cachedWindowId||(this.cachedWindowId=e.SecuredTouchUtil.newGuid(),this.stSessionStorage.setItem(e.SecuredTouchConstants.WINDOW_ID_KEY,this.cachedWindowId))),this.cachedWindowId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sessionStorage",{get:function(){return this.stSessionStorage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localStorage",{get:function(){return this.stLocalStorage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ops",{get:function(){var t=Number(this.stSessionStorage.getItem(e.SecuredTouchConstants.OPS_KEY));return isNaN(t)?null:t},set:function(t){t?this.stSessionStorage.setItem(e.SecuredTouchConstants.OPS_KEY,t.toString()):this.stSessionStorage.removeItem(e.SecuredTouchConstants.OPS_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"webGlID",{get:function(){return this.stSessionStorage.getItem(e.SecuredTouchConstants.WEB_GL_KEY)},set:function(t){t?this.stSessionStorage.setItem(e.SecuredTouchConstants.WEB_GL_KEY,t):this.stSessionStorage.removeItem(e.SecuredTouchConstants.WEB_GL_KEY)},enumerable:!0,configurable:!0}),t.prototype.getToken=function(t){var n=e.SecuredTouchUtil.hash(e.SecuredTouchConstants.TOKEN_TS_BASE_KEY+"-"+t),i=e.SecuredTouchUtil.hash(e.SecuredTouchConstants.TOKEN_BASE_KEY+"-"+t);return(new Date).getTime()-(Number(this.stLocalStorage.getItem(n))||0)>5184e5?null:this.stLocalStorage.getItem(i)},t.prototype.setToken=function(t,n){var i=e.SecuredTouchUtil.hash(e.SecuredTouchConstants.TOKEN_TS_BASE_KEY+"-"+n),o=e.SecuredTouchUtil.hash(e.SecuredTouchConstants.TOKEN_BASE_KEY+"-"+n);t?(this.stLocalStorage.setItem(o,t),this.stLocalStorage.setItem(i,(new Date).getTime())):(this.stLocalStorage.removeItem(o),this.stLocalStorage.removeItem(i))},Object.defineProperty(t.prototype,"lastInitParamsTs",{get:function(){var t=e.SecuredTouchUtil.hash(e.SecuredTouchConstants.INIT_PARAMS_TS_KEY+"-"+this.appId);return Number(this.stLocalStorage.getItem(t))||0},set:function(t){var n=e.SecuredTouchUtil.hash(e.SecuredTouchConstants.INIT_PARAMS_TS_KEY+"-"+this.appId);this.stLocalStorage.setItem(n,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initParams",{get:function(){var t=e.SecuredTouchUtil.hash(e.SecuredTouchConstants.INIT_PARAMS_KEY+"-"+this.appId),n=this.stLocalStorage.getItem(t);try{return n?JSON.parse(n):null}catch(t){return e.STLogger.debug("SecuredTouchSession FAILED to deserialize initParams!"),null}},set:function(t){var n=t?JSON.stringify(t):null,i=e.SecuredTouchUtil.hash(e.SecuredTouchConstants.INIT_PARAMS_KEY+"-"+this.appId);this.stLocalStorage.setItem(i,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initST",{get:function(){return Boolean(this.stSessionStorage.getItem(e.SecuredTouchConstants.ST_INIT_KEY))},set:function(t){this.stSessionStorage.setItem(e.SecuredTouchConstants.ST_INIT_KEY,t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applicationId",{set:function(e){this.appId=e},enumerable:!0,configurable:!0}),t.prototype.getUsername=function(){return this.stSessionStorage.getItem(e.SecuredTouchConstants.USER_ID_KEY)||""},t.prototype.setUsername=function(t){this.stSessionStorage.setItem(e.SecuredTouchConstants.USER_ID_TS_KEY,(new Date).getTime()),t?this.stSessionStorage.setItem(e.SecuredTouchConstants.USER_ID_KEY,t):this.stSessionStorage.removeItem(e.SecuredTouchConstants.USER_ID_KEY)},Object.defineProperty(t.prototype,"usernameTs",{get:function(){return Number(this.stSessionStorage.getItem(e.SecuredTouchConstants.USER_ID_TS_KEY))||0},enumerable:!0,configurable:!0}),t.prototype.getMetadataTsKey=function(){return e.SecuredTouchUtil.hash("SecuredTouchMetadataTs-"+this.cachedDeviceId+"-"+this.appId)},t.prototype.getLastMetadataTimeStamp=function(){return Number(this.stLocalStorage.getItem(this.getMetadataTsKey()))||0},t.prototype.setLastMetadataTimeStamp=function(e){this.stLocalStorage.setItem(this.getMetadataTsKey(),e)},Object.defineProperty(t.prototype,"appSessionId",{get:function(){return this.stSessionStorage.getItem(e.SecuredTouchConstants.APP_SESSION_ID_KEY)||""},set:function(t){t?(e.STLogger.info("Set Session ID: "+t),this.stSessionStorage.setItem(e.SecuredTouchConstants.APP_SESSION_ID_KEY,t)):this.stSessionStorage.removeItem(e.SecuredTouchConstants.APP_SESSION_ID_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastDisposedPayload",{get:function(){var t=null;try{var n=this.stSessionStorage.getItem(e.SecuredTouchConstants.LAST_DISPOSED_TS_KEY);(new Date).getTime()-n<=e.SecuredTouchConstants.SESSION_STORAGE_TTL_MILLIS&&(t=JSON.parse(this.stSessionStorage.getItem(e.SecuredTouchConstants.LAST_DISPOSED_PAYLOAD_KEY)))}catch(t){e.STLogger.warn("Failed to get last disposed payload",t)}return this.stSessionStorage.removeItem(e.SecuredTouchConstants.LAST_DISPOSED_PAYLOAD_KEY),this.stSessionStorage.removeItem(e.SecuredTouchConstants.LAST_DISPOSED_TS_KEY),t},set:function(t){try{t&&(this.stSessionStorage.setItem(e.SecuredTouchConstants.LAST_DISPOSED_PAYLOAD_KEY,JSON.stringify(t)),this.stSessionStorage.setItem(e.SecuredTouchConstants.LAST_DISPOSED_TS_KEY,(new Date).getTime()))}catch(t){e.STLogger.warn("Failed to save last disposed payload",t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"passedBufferTimeout",{get:function(){var t=this.stSessionStorage.getItem(e.SecuredTouchConstants.SESSION_STORAGE_UPDATE_TS)||0;return(new Date).getTime()-t>e.SecuredTouchConstants.SESSION_STORAGE_TTL_MILLIS},enumerable:!0,configurable:!0}),t.prototype.resetDeviceCredentials=function(){this.cachedDeviceId="Id-"+e.SecuredTouchUtil.newGuid(),this.cachedDeviceSecret=e.SecuredTouchUtil.hash(this.cachedDeviceId),this.crossStorage.set(e.SecuredTouchConstants.DEVICE_ID_KEY,this.cachedDeviceId),this.stLocalStorage.setItem(e.SecuredTouchConstants.DEVICE_ID_KEY,this.cachedDeviceId)},t.prototype.getDeviceCredentials=function(){return this.cachedDeviceId&&this.cachedDeviceSecret||this.resetDeviceCredentials(),{deviceSecret:this.cachedDeviceSecret,deviceId:this.cachedDeviceId}},Object.defineProperty(t.prototype,"remoteLogEnabledByFactor",{get:function(){var t=this.stLocalStorage.getItem(e.SecuredTouchConstants.REMOTE_LOG_ENABLED_KEY);return null!=t?"true"===t:null},set:function(t){this.stLocalStorage.setItem(e.SecuredTouchConstants.REMOTE_LOG_ENABLED_KEY,t)},enumerable:!0,configurable:!0}),t}();e.SecuredTouchSessionStorage=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(){}return Object.defineProperty(e,"METRIC_PREFIX",{get:function(){return"st.metrics"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"METRICS_ENABLED",{get:function(){return"stMetricsEnabled"},enumerable:!0,configurable:!0}),e}();e.MetricsConstants=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(){this._calcTime=void 0,this._skipped=void 0,this._calculated=void 0,this.calcStartTime=0}return e.prototype.onCalcStarted=function(){this.calcStartTime=(new Date).getTime()},e.prototype.onCalcEnded=function(){this.calcStartTime>0&&(this._calcTime=(new Date).getTime()-this.calcStartTime,this.calcStartTime=0)},e.prototype.setMetadataSkipped=function(e){this._skipped=e?1:0,this._calculated=1-this._skipped},e.prototype.resetValues=function(){this._calcTime=void 0,this._skipped=void 0,this._calculated=void 0},e.prototype.setMetrics=function(e){var t=this;e.addMetric("count.metadata.calculated",this._calculated),e.addMetric("count.metadata.skip",this._skipped),e.addMetric("time.metadata.calculation.max",this._calcTime,(function(e){return!e||t._calcTime>e}))},e}();e.MetadataMetrics=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(){this._initTime=void 0,this._authCached=void 0,this._authNotCached=void 0,this._pointerCached=void 0,this._pointerNotCached=void 0,this.initStartTime=0,this.authOnSDKInit=!0}return e.prototype.onInitStarted=function(){this.initStartTime=(new Date).getTime()},e.prototype.onInitEnded=function(){this.initStartTime>0&&(this._initTime=(new Date).getTime()-this.initStartTime,this.initStartTime=0)},e.prototype.setAuthCached=function(e){this.authOnSDKInit&&(this.authOnSDKInit=!1,this._authCached=e?1:0,this._authNotCached=1-this._authCached)},e.prototype.setPointerCached=function(e){this._pointerCached=e?1:0,this._pointerNotCached=1-this._pointerCached},e.prototype.resetValues=function(){this._initTime=void 0,this._authCached=void 0,this._authNotCached=void 0,this._pointerCached=void 0,this._pointerNotCached=void 0},e.prototype.setMetrics=function(e){var t=this;e.addMetric("time.init.flow.max",this._initTime,(function(e){return!e||t._initTime>e})),e.addMetric("count.auth.token.cached",this._authCached),e.addMetric("count.auth.token.not.cached",this._authNotCached),e.addMetric("count.pointer.cached",this._pointerCached),e.addMetric("count.pointer.not.cached",this._pointerNotCached)},e}();e.InitMetrics=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(){this._avgInteractionTime=0,this._minTimeBetweenInteractions=0,this._avgQueueSize=0,this._avgAttempt=0,this.attemptIncrement=0,this.queueSizeIncrement=0,this.timesMap={},this.increment=0,this.lastInteractionTimestamp=0}return e.prototype.onInteractionSent=function(e){var t=(new Date).getTime();this.timesMap[e]=t,0===this.lastInteractionTimestamp?this.lastInteractionTimestamp=t:(0===this._minTimeBetweenInteractions||t-this.lastInteractionTimestamp<this._minTimeBetweenInteractions)&&(this._minTimeBetweenInteractions=t-this.lastInteractionTimestamp,this.lastInteractionTimestamp=t)},e.prototype.onInteractionSuccess=function(e){if(this.timesMap[e]){var t=(new Date).getTime()-this.timesMap[e];this.increment+=1,this._avgInteractionTime=(this._avgInteractionTime*(this.increment-1)+t)/this.increment,delete this.timesMap[e]}},e.prototype.onInteractionFailure=function(e){this.timesMap[e]&&delete this.timesMap[e]},e.prototype.setQueueSize=function(e){this.queueSizeIncrement+=1,this._avgQueueSize=(this._avgQueueSize*(this.queueSizeIncrement-1)+e)/this.queueSizeIncrement},e.prototype.setAttempt=function(e){this.attemptIncrement+=1,this._avgAttempt=(this._avgAttempt*(this.attemptIncrement-1)+e)/this.attemptIncrement},e.prototype.resetValues=function(){this._avgInteractionTime=0,this._minTimeBetweenInteractions=0,this._avgQueueSize=0,this._avgAttempt=0},e.prototype.setMetrics=function(e){var t=this;this.increment=0,e.addMetric("time.interactions.e2e.avg",this._avgInteractionTime),e.addMetric("time.between.interactions.min",this._minTimeBetweenInteractions,(function(e){return!e||t._minTimeBetweenInteractions<e})),this.queueSizeIncrement=0,e.addMetric("count.queue.size.avg",this._avgQueueSize),this.attemptIncrement=0,e.addMetric("count.request.attempt.avg",this._avgAttempt)},e}();e.NetworkMetrics=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){this.enabledFactor=window._metricsEnabledFactor?Number(window._metricsEnabledFactor):.01,this.stSessionStorage=e.SecuredTouchSessionStorage.instance.sessionStorage,this.metadata=new e.MetadataMetrics,this.init=new e.InitMetrics,this.network=new e.NetworkMetrics;var t=this.stSessionStorage.getItem(e.MetricsConstants.METRICS_ENABLED);null!=t?this.enabled="true"===t:(this.enabled=Math.random()<=this.enabledFactor,this.stSessionStorage.setItem(e.MetricsConstants.METRICS_ENABLED,this.enabled))}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.getMetricsData=function(t){var n={};try{if(this.enabled&&t%e.SecuredTouchPointerConfig.instance.metricsFrequency==0){var i=this,o={addMetric:function(t,o,a){if(t&&null!=o){var r=i.stSessionStorage.getItem(e.MetricsConstants.METRIC_PREFIX+"."+t);a&&!a(r)||(i.stSessionStorage.setItem(e.MetricsConstants.METRIC_PREFIX+"."+t,o),n[t]=o)}}};this.metadata.setMetrics(o),this.init.setMetrics(o),this.network.setMetrics(o),this.metadata.resetValues(),this.init.resetValues(),this.network.resetValues()}}catch(t){e.STLogger.warn("Failed to add metrics",t)}return n},t}();e.SecuredTouchMetrics=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(e,t){this.clientVersion=e,this.customHeaders=new Map,this.customHeaders.set("clientVersion",this.clientVersion),this.customHeaders.set("instanceUUID",t)}return t.prototype.setHeader=function(e,t){this.customHeaders.set(e,t)},t.prototype.removeHeader=function(e){this.customHeaders.delete(e)},t.prototype.setCustomHeaders=function(e,t){e.setRequestHeader("Accept","application/json"),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Attempt",""+t),this.customHeaders.forEach((function(t,n){e.setRequestHeader(n,t)}))},t.prototype.getJson=function(t,n,i,o){var a=this,r=this;return new Promise((function(s,c){if(a.verifyAuthHeader()){var l=new XMLHttpRequest,d="?"+Object.keys(o).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])})).join("&");l.open("GET",t+d,!0),l.withCredentials=!0,l.timeout=n,r.setCustomHeaders(l,i),l.onload=function(){if(l.status>=200&&l.status<400)try{var t=JSON.parse(l.responseText?l.responseText:"{}");s(t),e.SecuredTouchMetrics.instance.network.setAttempt(i)}catch(e){c(e)}else c({status:l.status,statsText:l.statusText})},l.ontimeout=function(e){c(e)},l.onerror=function(e){c({status:l.status,statsText:l.statusText})},l.send()}else c({status:401,statsText:"Aborted, Auth token is missing"})}))},t.prototype.isGzipEnabled=function(){try{return!!_securedTouchDependencies.pako&&!window["unzip-securedtouch"]}catch(e){return!1}},t.prototype.postGzippedJson=function(e,t,n,i,o){return o||(o=new Map),this.isGzipEnabled()&&o.set("Content-Encoding","gzip"),this.postJson(e,t,n,i,o)},t.prototype.postJson=function(t,n,i,o,a){var r=this,s=this;return new Promise((function(c,l){if(r.verifyAuthHeader(a)){var d=new XMLHttpRequest;d.open("POST",t,!0),d.withCredentials=!0,d.timeout=i,s.setCustomHeaders(d,o),a&&a.forEach((function(e,t){d.setRequestHeader(t,e)})),d.onload=function(){if(d.status>=200&&d.status<400)try{var t=JSON.parse(d.responseText?d.responseText:"{}");c(t),e.SecuredTouchMetrics.instance.network.setAttempt(o)}catch(e){l(e)}else l({status:d.status,statsText:d.statusText})},d.ontimeout=function(e){l(e)},d.onerror=function(e){l({status:d.status,statsText:d.statusText})};var p=JSON.stringify(n);a&&"gzip"===a.get("Content-Encoding")?d.send(_securedTouchDependencies.pako.gzip(p)):d.send(p)}else l({status:401,statsText:"Aborted, Auth token is missing"})}))},t.prototype.verifyAuthHeader=function(e){return!!this.customHeaders.get("Authorization")||!(!e||!e.get("Authorization"))},t}();e.STHttpClient=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(e){this.mapKey=e}return Object.defineProperty(t.prototype,"asMap",{get:function(){var e=t.stSessionStorage.getItem(this.mapKey);return e||(e=JSON.stringify({})),JSON.parse(e)},enumerable:!0,configurable:!0}),t.prototype.set=function(n,i){var o=this.asMap;o[n]=i,t.stSessionStorage.setItem(e.SecuredTouchConstants.SESSION_STORAGE_UPDATE_TS,(new Date).getTime()),t.stSessionStorage.setItem(this.mapKey,JSON.stringify(o))},t.prototype.get=function(e){return this.asMap[e]},t.prototype.delete=function(e){var n=this.asMap;delete n[e],t.stSessionStorage.setItem(this.mapKey,JSON.stringify(n))},t.prototype.values=function(){var t=this.asMap;return e.SecuredTouchUtil.values(t)},t.prototype.clear=function(){t.stSessionStorage.removeItem(this.mapKey)},t.stSessionStorage=e.SecuredTouchSessionStorage.instance.sessionStorage,t}();e.SecuredTouchStorageMap=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){this.canceledInteractions=new e.SecuredTouchStorageMap(e.SecuredTouchConstants.CANCELED_INTERACTIONS),this.sendCachedMetadata=!1,this.requestTimeout=5e3,this.maxQueueSize=10,this.interactionsAllowed=!1,this.authQueue=new _securedTouchDependencies.StPromiseQueue(1)}return t.prototype.init=function(t,n,i,o,a){this.applicationId=t,this.pointerUrlPrefix=n,this.clientVersion=i,this.sessionStorage=a||e.SecuredTouchSessionStorage.instance,this.http=o||new e.STHttpClient(i,this.sessionStorage.windowId)},t.prototype.initNetworkParams=function(e,t,n){this.requestTimeout=e,this.maxQueueSize=t,this.lastInitParamsUrl=n,this.interactionsQueue||(this.interactionsQueue=new _securedTouchDependencies.StPromiseQueue(1,this.maxQueueSize))},t.prototype.enqueue=function(t){return this.interactionsAllowed?(e.SecuredTouchMetrics.instance.network.setQueueSize(this.interactionsQueue.getQueueLength()),this.interactionsQueue.add(t)):(e.STLogger.warn("Can't enqueue request - auth is required"),Promise.resolve())},t.prototype.logIn=function(e,t,n){var i=this;return this.authQueue.add((function(){return i.loginWithRetry(e,t,n,0,null)}))},t.prototype.loginWithRetry=function(n,i,o,a,r){var s=this,c=this;this.appSecret=n;var l=c.sessionStorage.getToken(i);return e.SecuredTouchMetrics.instance.init.setAuthCached(!!l),l?(c.http.setHeader("Authorization",l),this.interactionsAllowed=!0,Promise.resolve()):a>=t.MAX_REQUEST_RETRIES?(e.STLogger.warn("Log in retry reached maximum "+t.MAX_REQUEST_RETRIES),this.interactionsAllowed=!1,Promise.reject(r)):new Promise((function(r,l){var d=e.SecuredTouchUtil.encodeBase64(""+n),p=new Map;c.http.removeHeader("Authorization"),p.set("Authorization",d),c.http.postJson(c.pointerUrlPrefix+"/SecuredTouch/rest/services/"+c.applicationId+"/device/auth/",{device_id:i,secret:o},t.POINTER_TIMEOUT,a,p).then((function(e){c.http.setHeader("Authorization",e.token),c.sessionStorage.setToken(e.token,i),c.finalizeLogIn(),r()})).catch((function(d){return __awaiter(s,void 0,void 0,(function(){var s;return __generator(this,(function(p){switch(p.label){case 0:return 401!=d.status?[3,1]:(c.sessionStorage.setToken(null,i),c.sessionStorage.resetDeviceCredentials(),s=c.sessionStorage.getDeviceCredentials(),this.metadataCache&&(this.metadataCache.deviceId=s.deviceId,this.sendCachedMetadata=!0),c.loginWithRetry(n,s.deviceId,s.deviceSecret,a+1,d).then(r).catch(l),[3,4]);case 1:return d.status>=400&&d.status<500?(this.interactionsAllowed=!1,l(d),[3,4]):[3,2];case 2:return[4,e.SecuredTouchUtil.delay(t.REQUESTS_COOL_DOWN[a+1]||t.REQUESTS_COOL_DOWN[t.REQUESTS_COOL_DOWN.length-1])];case 3:p.sent(),c.loginWithRetry(n,i,o,a+1,d).then(r).catch(l),p.label=4;case 4:return[2]}}))}))}))}))},t.prototype.finalizeLogIn=function(){this.interactionsAllowed=!0;var t=!1;this.metadataCache&&this.sendCachedMetadata&&(this.sendMetadata(this.lastInitParamsUrl,this.metadataCache).catch((function(t){e.STLogger.warn("Failed to update metadata",t)})),this.sendCachedMetadata=!1,t=!0),t&&e.STLogger.debug("Reconnect after token expire!")},t.prototype.sendCanceledPayloads=function(){var t=this,n=this.canceledInteractions.values();this.canceledInteractions.clear(),n&&n.length>0&&n.forEach((function(n){t.sendInteractions(t.lastInitParamsUrl,n).catch((function(t){e.STLogger.warn("Failed to resend canceled interactions after page reload",t)}))}))},t.prototype.clearCanceledPayloads=function(){this.canceledInteractions.clear()},t.prototype.initSessionWithRetry=function(e,t,n){var i=this,o=this;return new Promise((function(a,r){o.http.postJson(e+"initSession/",t,i.requestTimeout,n).then((function(e){a(e)})).catch((function(i){o.handleNetworkFailure(i,n+1).then((function(){return o.initSessionWithRetry(e,t,n+1)})).then((function(e){a(e)})).catch((function(e){r(e)}))}))}))},t.prototype.initSession=function(e,t){var n=this;return this.enqueue((function(){return n.initSessionWithRetry(e,t,0)}))},t.prototype.getInitParams=function(e,n){return void 0===n&&(n=0),__awaiter(this,void 0,void 0,(function(){var i,o,a=this;return __generator(this,(function(r){return i=this,o=this.pointerUrlPrefix+"/SecuredTouch/rest/services/init/"+this.clientVersion+"/"+this.applicationId,[2,new Promise((function(r,s){a.http.getJson(o,t.POINTER_TIMEOUT,n,e).then((function(e){r(e)})).catch((function(t){i.handleNetworkFailure(t,n+1).then((function(){return i.getInitParams(e,n+1)})).then((function(e){r(e)})).catch((function(e){s(e)}))}))}))]}))}))},t.prototype.sendMetadata=function(e,t){var n=this;return this.enqueue((function(){return n.sendMetadataWithRetry(e,t,0)}))},t.prototype.sendMetadataWithRetry=function(e,t,n){var i=this,o=this;return this.lastInitParamsUrl=e,this.metadataCache=t,new Promise((function(a,r){o.http.postGzippedJson(e+"metadata/",t,i.requestTimeout,n).then((function(){a()})).catch((function(i){o.handleNetworkFailure(i,n+1).then((function(){return o.sendMetadataWithRetry(e,t,n+1)})).then(a).catch((function(e){r(e)}))}))}))},t.prototype.sendInteractionsWithRetry=function(t,n,i,o){var a=this,r=this;return n.deviceId!==this.sessionStorage.getDeviceCredentials().deviceId?(e.STLogger.warn("Send Interactions failed, interaction's deviceID not matching the current deviceId"),this.canceledInteractions.delete(i),Promise.reject("Interaction's deviceID not matching the current deviceId")):new Promise((function(s,c){e.SecuredTouchMetrics.instance.network.onInteractionSent(i),r.http.postGzippedJson(t+"interactions/",n,a.requestTimeout,o).then((function(t){e.SecuredTouchMetrics.instance.network.onInteractionSuccess(i);var o=n.keyboardInteractionPayloads?n.keyboardInteractionPayloads.length:0,r=n.mouseInteractionPayloads?n.mouseInteractionPayloads.length:0,c=n.gestures?n.gestures.length:0;e.STLogger.info(o+" Keyboard Interactions, "+r+" Mouse interactions and "+c+" Gestures sent to server."),a.canceledInteractions.delete(i),s(t)})).catch((function(l){e.SecuredTouchMetrics.instance.network.onInteractionFailure(i),r.handleNetworkFailure(l,o+1).then((function(){return r.sendInteractionsWithRetry(t,n,i,o+1)})).then((function(e){s(e)})).catch((function(e){a.canceledInteractions.delete(i),c(e)}))}))}))},t.prototype.sendInteractions=function(t,n){var i=this;this.lastInitParamsUrl=t;var o=e.SecuredTouchUtil.newGuid();return this.canceledInteractions.set(o,n),this.enqueue((function(){return i.sendInteractionsWithRetry(t,n,o,0)}))},t.prototype.handleNetworkFailure=function(n,i){return __awaiter(this,void 0,void 0,(function(){var o,a;return __generator(this,(function(r){switch(r.label){case 0:if(i>=t.MAX_REQUEST_RETRIES)return[2,Promise.reject(n)];r.label=1;case 1:return r.trys.push([1,7,,8]),401!=n.status&&403!=n.status?[3,3]:(o=this.sessionStorage.getDeviceCredentials(),this.sessionStorage.setToken(null,o.deviceId),[4,this.logIn(this.appSecret,o.deviceId,o.deviceSecret)]);case 2:return r.sent(),[2,Promise.resolve()];case 3:return n.status>=400&&n.status<500?[2,Promise.reject(n)]:[3,4];case 4:return[4,e.SecuredTouchUtil.delay(t.REQUESTS_COOL_DOWN[i]||t.REQUESTS_COOL_DOWN[t.REQUESTS_COOL_DOWN.length-1])];case 5:return r.sent(),[2,Promise.resolve()];case 6:return[3,8];case 7:return a=r.sent(),[2,Promise.reject(a)];case 8:return[2]}}))}))},t.POINTER_TIMEOUT=1e4,t.MAX_REQUEST_RETRIES=3,t.REQUESTS_COOL_DOWN=[0,1e3,2e3],t}();e.STServer=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(e,t){this.handler=e,this.isOnce=t,this.isExecuted=!1}return e.prototype.execute=function(e,t,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var i=this.handler;e?setTimeout((function(){i.apply(t,n)}),1):i.apply(t,n)}},e}(),n=function(){function e(){this._wrap=new r(this),this._subscriptions=new Array}return e.prototype.subscribe=function(e){e&&this._subscriptions.push(new t(e,!1))},e.prototype.sub=function(e){this.subscribe(e)},e.prototype.one=function(e){e&&this._subscriptions.push(new t(e,!0))},e.prototype.has=function(e){if(e)for(var t=0,n=this._subscriptions;t<n.length;t++)if(n[t].handler==e)return!0;return!1},e.prototype.unsubscribe=function(e){if(e)for(var t=0;t<this._subscriptions.length;t++)if(this._subscriptions[t].handler==e){this._subscriptions.splice(t,1);break}},e.prototype.unsub=function(e){this.unsubscribe(e)},e.prototype._dispatch=function(e,t,n){for(var i=0;i<this._subscriptions.length;i++){var o=this._subscriptions[i];if(o.isOnce){if(!0===o.isExecuted)continue;this._subscriptions.splice(i,1),i--}o.execute(e,t,n)}},e.prototype.asEvent=function(){return this._wrap},e}();e.DispatcherBase=n;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dispatch=function(e,t){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(e,t){this._dispatch(!0,this,arguments)},t}(n);e.EventDispatcher=i;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dispatch=function(e){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(e){this._dispatch(!0,this,arguments)},t}(n),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},t.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},t}(n),r=function(){function e(e){this._subscribe=function(t){return e.subscribe(t)},this._unsubscribe=function(t){return e.unsubscribe(t)},this._one=function(t){return e.one(t)},this._has=function(t){return e.has(t)}}return e.prototype.subscribe=function(e){this._subscribe(e)},e.prototype.sub=function(e){this.subscribe(e)},e.prototype.unsubscribe=function(e){this._unsubscribe(e)},e.prototype.unsub=function(e){this.unsubscribe(e)},e.prototype.one=function(e){this._one(e)},e.prototype.has=function(e){return this._has(e)},e}(),s=function(){function e(){this._events={}}return e.prototype.get=function(e){var t=this._events[e];return t||(t=this.createDispatcher(),this._events[e]=t,t)},e.prototype.remove=function(e){this._events[e]=null},e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createDispatcher=function(){return new i},t}(s),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createDispatcher=function(){return new o},t}(s),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createDispatcher=function(){return new a},t}(s);(function(){function e(){this._events=new c}Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)},e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)}})(),function(){function e(){this._events=new l}Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)}}(),function(){function e(){this._events=new d}Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),e.prototype.one=function(e,t){this._events.get(e).one(t)},e.prototype.has=function(e,t){return this._events.get(e).has(t)},e.prototype.subscribe=function(e,t){this._events.get(e).subscribe(t)},e.prototype.sub=function(e,t){this.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._events.get(e).unsubscribe(t)},e.prototype.unsub=function(e,t){this.unsubscribe(e,t)}}()}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){this._isStarted=!1,this._isEventsStarted=!1,this._gestureTimestamps=[],this._maxSensorSamples=0,this._sensorsTimestampDeltaInMillis=0,this._accelerometerList=[],this._gyroscopeList=[],this._linearAccelerometerList=[],this._rotationList=[],this.orientationImplementationFix=1,window.navigator.userAgent.match(/^.*(iPhone|iPad).*(OS\s[0-9]).*(CriOS|Version)\/[.0-9]*\sMobile.*$/i)&&(this.orientationImplementationFix=-1),this.accelerometerUpdateHandle=this.accelerometerUpdate.bind(this),this.orientationUpdateHandle=this.orientationUpdate.bind(this)}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LAST_GESTURE_SENSOR_TIMEOUT_MILI_SECONDS",{get:function(){return 3e3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accX",{get:function(){return this._accX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accY",{get:function(){return this._accY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accZ",{get:function(){return this._accZ},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lienarAccX",{get:function(){return this._lienarAccX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lienarAccY",{get:function(){return this._lienarAccY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lienarAccZ",{get:function(){return this._lienarAccZ},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotX",{get:function(){return this._rotX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotY",{get:function(){return this._rotY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotZ",{get:function(){return this._rotZ},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSensorSamples",{get:function(){return this._maxSensorSamples},set:function(e){this._maxSensorSamples=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sensorsTimestampDeltaInMillis",{get:function(){return this._sensorsTimestampDeltaInMillis},set:function(e){this._sensorsTimestampDeltaInMillis=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accelerometerList",{get:function(){return this.getRelevantSensorSamples(this._accelerometerList)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gyroscopeList",{get:function(){return this.getRelevantSensorSamples(this._gyroscopeList)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linearAccelerometerList",{get:function(){return this.getRelevantSensorSamples(this._linearAccelerometerList)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationList",{get:function(){return this._rotationList},enumerable:!0,configurable:!0}),t.prototype.getRelevantSensorSamples=function(e){if(0==e.length||this._sensorsTimestampDeltaInMillis<1||0==this._gestureTimestamps.length)return e;for(var t=new Map,n=null,i=0,o=0;o<e.length;o++)for(var a=0;a<this._gestureTimestamps.length;a++)(i=e[o].timestamp)>=(n=this._gestureTimestamps[a]).start-this._sensorsTimestampDeltaInMillis&&i<=n.end+this._sensorsTimestampDeltaInMillis&&t.set(e[o].timestamp,e[o]);return Array.from(t.values())},t.prototype.getRotationListCopy=function(){return this._rotationList?Array.from(this._rotationList):[]},t.prototype.stopEvents=function(){this._isEventsStarted&&(null!=window.DeviceMotionEvent&&window.removeEventListener("devicemotion",this.accelerometerUpdateHandle,!0),window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.orientationUpdateHandle,!0),this._isEventsStarted=!1,e.STLogger.debug("Sensor events stopped listening"))},t.prototype.startEvents=function(){this._isEventsStarted||(null!=window.DeviceMotionEvent?e.SecuredTouchUtil.addEventListener(window,"devicemotion",this.accelerometerUpdateHandle,!0):e.STLogger.warn("DeviceMotion not supported!"),window.DeviceOrientationEvent?e.SecuredTouchUtil.addEventListener(window,"deviceorientation",this.orientationUpdateHandle,!0):e.STLogger.warn("DeviceOrientation not supported!"),e.STLogger.debug("Sensor events start listening..."),this._isEventsStarted=!0)},t.prototype.start=function(){this._isStarted||(this._isStarted=!0,e.STLogger.debug("Sensor events started..."))},t.prototype.stop=function(){this._isStarted&&(null!=window.DeviceMotionEvent&&window.removeEventListener("devicemotion",this.accelerometerUpdateHandle,!0),window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.orientationUpdateHandle,!0),this._isStarted=!1,e.STLogger.debug("Sensor events stopped"))},t.prototype.reset=function(){this._accelerometerList=[],this._gyroscopeList=[],this._linearAccelerometerList=[],this._rotationList=[],this._gestureTimestamps.length>0?this._gestureTimestamps=[this._gestureTimestamps[this._gestureTimestamps.length-1]]:this._gestureTimestamps=[],this._accX=0,this._accY=0,this._accZ=0,this._rotX=0,this._rotY=0,this._rotZ=0},t.prototype.onGesture=function(e){this._isEventsStarted||this.startEvents(),e.snapshots.length>1&&this._gestureTimestamps.push({start:e.snapshots[0].timestamp,end:e.snapshots[e.snapshots.length-1].timestamp})},t.prototype.puaseSensorsCollectionIfNoActivity=function(e){return(this._gestureTimestamps.length>0?this._gestureTimestamps[this._gestureTimestamps.length-1].end:0)>0?Math.abs(e-this._gestureTimestamps[this._gestureTimestamps.length-1].end)>this.LAST_GESTURE_SENSOR_TIMEOUT_MILI_SECONDS&&(this.stopEvents(),!0):(this.stopEvents(),!0)},t.prototype.getDeviceAcceleration=function(e){return e&&null!=e.x&&null!=e.y&&null!=e.z?e:null},t.prototype.accelerometerUpdate=function(t){try{if(this.puaseSensorsCollectionIfNoActivity(e.SecuredTouchUtil.now()))return;var n=this.getDeviceAcceleration(t.accelerationIncludingGravity);n&&(this._accX=n.x*this.orientationImplementationFix,this._accY=n.y*this.orientationImplementationFix,this._accZ=n.z,this.safeAddSensorSample({x:this._accX,y:this._accY,z:this._accX,timestamp:e.SecuredTouchUtil.now()},this._accelerometerList));var i=this.getDeviceAcceleration(t.acceleration);i&&(this._lienarAccX=i.x*this.orientationImplementationFix,this._lienarAccY=i.y*this.orientationImplementationFix,this._lienarAccZ=i.z,this.safeAddSensorSample({x:this._lienarAccX,y:this._lienarAccY,z:this._lienarAccZ,timestamp:e.SecuredTouchUtil.now()},this._linearAccelerometerList)),t.rotationRate&&null!=t.rotationRate.alpha&&null!=t.rotationRate.beta&&null!=t.rotationRate.gamma&&(this._rotX=t.rotationRate.alpha,this._rotY=t.rotationRate.beta,this._rotZ=t.rotationRate.gamma,this.safeAddSensorSample({x:this._rotX,y:this._rotY,z:this._rotZ,timestamp:e.SecuredTouchUtil.now()},this._gyroscopeList))}catch(t){e.STLogger.warn("error in accelerometer handler",t)}},t.prototype.orientationUpdate=function(t){try{if(this.puaseSensorsCollectionIfNoActivity(e.SecuredTouchUtil.now()))return;null!=t.alpha&&null!=t.beta&&null!=t.gamma&&this.safeAddSensorSample({x:t.alpha,y:t.beta,z:t.gamma,timestamp:e.SecuredTouchUtil.now()},this._rotationList)}catch(t){e.STLogger.warn("error in orientation handler",t)}},t.prototype.safeAddSensorSample=function(e,t){this.maxSensorSamples>t.length&&t.push(e)},t}();e.SecuredTouchSensors=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t;!function(e){e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right"}(t||(t={}));var n=function(){function n(t){this._isStarted=!1,this._onGesture=new e.EventDispatcher,this.touchSnapshotsMap=new Map,this.behavioralType=t,this.touchStartHandler=this.touchStart.bind(this),this.touchMoveHandler=this.touchMove.bind(this),this.touchEndHandler=this.touchEnd.bind(this),this.touchCancelHandler=this.touchCancel.bind(this)}return Object.defineProperty(n.prototype,"onGesture",{get:function(){return this._onGesture.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SCROLL_MIN_DURATION",{get:function(){return 500},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SWIPE_MAX_ANGLE",{get:function(){return 45},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TAP_MOVEMENT_TRESHOLD",{get:function(){return 10},enumerable:!0,configurable:!0}),n.prototype.clearTouchSnapshots=function(e){this.touchSnapshotsMap.delete(e)},n.prototype.getTouchSnapshots=function(e){var t;return this.touchSnapshotsMap.has(e)?t=this.touchSnapshotsMap.get(e):(t=[],this.touchSnapshotsMap.set(e,t)),t},n.prototype.isEmpty=function(){return 0===this.touchSnapshotsMap.size},n.prototype.start=function(){this._isStarted||(e.SecuredTouchUtil.addEventListener(document,"touchstart",this.touchStartHandler),e.SecuredTouchUtil.addEventListener(document,"touchmove",this.touchMoveHandler),e.SecuredTouchUtil.addEventListener(document,"touchend",this.touchEndHandler),e.SecuredTouchUtil.addEventListener(document,"touchcancel",this.touchCancelHandler),this._isStarted=!0)},n.prototype.stop=function(){this._isStarted&&(document.removeEventListener("touchstart",this.touchStartHandler),document.removeEventListener("touchmove",this.touchMoveHandler),document.removeEventListener("touchend",this.touchEndHandler),document.removeEventListener("touchcancel",this.touchCancelHandler),this._isStarted=!1)},n.prototype.touchStart=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;e.STLogger.debug("touchstart("+t.changedTouches.length+")",t),t.changedTouches.length>0&&this.pushSnapshot(t)}catch(t){e.STLogger.warn("error in touchStart handler",t)}},n.prototype.touchMove=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;e.STLogger.debug("touchmove("+t.changedTouches.length+")",t),t.changedTouches.length>0&&this.pushSnapshot(t)}catch(t){e.STLogger.warn("error in touchMove handler",t)}},n.prototype.touchEnd=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return void this._onGesture.dispatch(this,null);e.STLogger.debug("touchend("+t.changedTouches.length+")",t),this.gestureEnd(t)}catch(t){e.STLogger.warn("error in touchEnd handler",t)}},n.prototype.touchCancel=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return void this._onGesture.dispatch(this,null);e.STLogger.debug("touchcancel("+t.changedTouches.length+")",t),this.gestureEnd(t)}catch(t){e.STLogger.warn("error in touchCancel handler",t)}},n.prototype.gestureEnd=function(t){t.changedTouches.length>0&&this.pushSnapshot(t);for(var n=0;n<t.changedTouches.length;n++){var i=t.changedTouches.item(n),o=this.getTouchSnapshots(i.identifier);o.length>0&&(this.isTap(o)?this.dispatchGesture(e.GestureType.Tap,i.identifier):this.dispatchGesture(this.calcGestureType(o),i.identifier))}},n.prototype.calcGestureType=function(n){var i,o=this.getDirection(n);if(this.isFling(n))switch(o){case t.Up:i=e.GestureType.FlingUp;break;case t.Right:i=e.GestureType.FlingRight;break;case t.Down:i=e.GestureType.FlingDown;break;case t.Left:i=e.GestureType.FlingLeft}else if(this.isScroll(n))switch(o){case t.Up:i=e.GestureType.ScrollUp;break;case t.Right:i=e.GestureType.ScrollRight;break;case t.Down:i=e.GestureType.ScrollDown;break;case t.Left:i=e.GestureType.ScrollLeft}return i},n.prototype.pushSnapshot=function(t){if(t.changedTouches&&t.changedTouches.length>0)for(var n=0;n<t.changedTouches.length;n++){var i=t.changedTouches.item(n),o=i.radiusX&&i.radiusY?(i.radiusX+i.radiusY)/2:null,a=this.getTouchSnapshots(i.identifier);a.length<this.maxSnapshotsCount&&a.push({timestamp:e.SecuredTouchUtil.now(),relativeX:i.screenX,relativeY:i.screenY,x:i.clientX,y:i.clientY,pressure:i.force,size:o,xaccelerometer:e.SecuredTouchSensors.instance.accX,yaccelerometer:e.SecuredTouchSensors.instance.accY,zaccelerometer:e.SecuredTouchSensors.instance.accZ,xlinearaccelerometer:e.SecuredTouchSensors.instance.lienarAccX,ylinearaccelerometer:e.SecuredTouchSensors.instance.lienarAccY,zlinearaccelerometer:e.SecuredTouchSensors.instance.lienarAccZ,xrotation:e.SecuredTouchSensors.instance.rotX,yrotation:e.SecuredTouchSensors.instance.rotY,zrotation:e.SecuredTouchSensors.instance.rotZ,additionalData:{radiusX:i.radiusX,radiusY:i.radiusY,rotationAngle:i.rotationAngle,pageX:i.pageX,pageY:i.pageY,eventTimeStamp:t.timeStamp}})}},n.prototype.dispatchGesture=function(t,n){var i=this.touchSnapshotsMap.get(n)||[],o=e.SecuredTouchUtil.getDeviceOrientation();this._onGesture.dispatch(this,{timestamp:i.length>0?i[0].timestamp:0,counter:null,type:t,snapshots:i,vector:{},attributes:{},additionalData:{width:screen.width,height:screen.height,availWidth:screen.availWidth,availHeight:screen.availHeight,deviceOrientation:o.orientation,deviceAngle:o.angle,locationHref:e.SecuredTouchUtil.getCurrentLocationUrl(),windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,bodyClientWidht:document.body.clientWidth,bodyClientHeight:document.body.clientHeight,devicePixelRatio:window.devicePixelRatio,clientDigest:e.SecuredTouchPointerConfig.instance.clientDigest,windowId:e.SecuredTouchSessionStorage.instance.windowId},identified:null}),this.clearTouchSnapshots(n)},n.prototype.isTap=function(e){var t=Math.abs(e[0].x-e[1].x),n=Math.abs(e[0].y-e[1].y);return 2==e.length&&t<this.TAP_MOVEMENT_TRESHOLD&&n<this.TAP_MOVEMENT_TRESHOLD},n.prototype.isFling=function(e){return e.length>1&&e[e.length-1].timestamp-e[0].timestamp<this.SCROLL_MIN_DURATION},n.prototype.isScroll=function(e){return e.length>1&&e[e.length-1].timestamp-e[0].timestamp>this.SCROLL_MIN_DURATION},n.prototype.getDirection=function(e){var n=this.calcAngle(e[0],e[e.length-1]);return n>90-this.SWIPE_MAX_ANGLE&&n<=90+this.SWIPE_MAX_ANGLE?t.Up:n>180-this.SWIPE_MAX_ANGLE&&n<=180+this.SWIPE_MAX_ANGLE?t.Right:n>270-this.SWIPE_MAX_ANGLE&&n<=270+this.SWIPE_MAX_ANGLE?t.Down:t.Left},n.prototype.calcAngle=function(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI+180},n}();e.SecuredTouchGestureEvents=n}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(){}return e.isPrivateMode=function(){return new Promise((function(e){var t,n,i=function(){return e(!0)},o=function(){return e(!1)};try{if((n=navigator&&/(?=.*(opera|chrome)).*/i.test(navigator.userAgent)&&navigator.storage&&navigator.storage.estimate)&&navigator.storage.estimate().then((function(e){e.quota<12e7?i():o()})).catch((function(e){o()})),n)return;if(function(){var e="MozAppearance"in document.documentElement.style;if(e)if(null==indexedDB)i();else{var t=indexedDB.open("inPrivate");t.onsuccess=o,t.onerror=i}return e}())return;if(function(){var e=navigator&&navigator.userAgent&&navigator.userAgent.match(/Version\/([0-9\._]+).*Safari/);if(e){if(parseInt(e[1],10)<11)return function(){try{localStorage.length||(localStorage.setItem("inPrivate","0"),localStorage.removeItem("inPrivate")),o()}catch(e){navigator.cookieEnabled?i():o()}return!0}();try{window.openDatabase(null,null,null,null),o()}catch(e){i()}}return!!e}())return;if((t=!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent))&&i(),t)return}catch(e){}return o()}))},e}();e.SecuredTouchIncognito=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t,n,i){this.logUrl="https://logs.securedtouch.com/log",this.enabledFactor=window._remoteLogEnabledFactor?Number(window._remoteLogEnabledFactor):.01,this.counter=0,this.enabledByHostingApp=!t.hasOwnProperty("externalLogsEnabled")||Boolean(t.externalLogsEnabled),this.applicationId=t.appId,this.pointerServerUrl=t.url,this.clientVersion=i,this.stMetadata=n,null==e.SecuredTouchSessionStorage.instance.remoteLogEnabledByFactor&&(e.SecuredTouchSessionStorage.instance.remoteLogEnabledByFactor=Math.random()<=this.enabledFactor)}return t.prototype.sendRemoteLog=function(t,n,i){if(this.enabledByHostingApp&&e.SecuredTouchPointerConfig.instance.remoteLogsEnabled&&e.SecuredTouchSessionStorage.instance.remoteLogEnabledByFactor&&this.counter<e.SecuredTouchPointerConfig.instance.maxRemoteLogs){var o={appId:this.applicationId,instanceUUID:e.SecuredTouchSessionStorage.instance.windowId,pointerServerUrl:this.pointerServerUrl,clientVersion:this.clientVersion,packageName:e.SecuredTouchUtil.getHostnameFromRegex(location.href),deviceType:this.stMetadata.deviceType,osName:this.stMetadata.osName,osVersion:this.stMetadata.osVersion,browserName:this.stMetadata.browserName,browserVersion:this.stMetadata.browserVersion,location:location.href,logsCount:this.counter++,errorCode:t,message:n,errorReason:e.SecuredTouchUtil.getErrorAsString(i),enabledFactor:this.enabledFactor};this.postLog(o).catch((function(t){e.STLogger.warn("Failed to send log to SecuredTouch",t)}))}},t.prototype.postLog=function(e){var t=this;return new Promise((function(n,i){try{var o=new XMLHttpRequest;o.open("POST",t.logUrl,!0),o.timeout=1e4,o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","application/json"),o.onload=function(){o.status>=200&&o.status<400?n():i({status:o.status,statsText:o.statusText})},o.ontimeout=function(e){i(e)},o.onerror=function(e){i({status:o.status,statsText:o.statusText})};var a=JSON.stringify(e),r=void 0;try{r=Boolean(_securedTouchDependencies.pako)&&!window["unzip-securedtouch"]}catch(e){r=!1}r?(o.setRequestHeader("Content-Encoding","gzip"),o.send(_securedTouchDependencies.pako.gzip(a))):o.send(a)}catch(e){i(e)}}))},t}();e.SecuredTouchRemoteLogger=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function e(){}return Object.defineProperty(e,"E_1000",{get:function(){return 1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_1001",{get:function(){return 1001},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_1002",{get:function(){return 1002},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_2000",{get:function(){return 2e3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_3000",{get:function(){return 3e3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_4000",{get:function(){return 4e3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_4001",{get:function(){return 4001},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_5000",{get:function(){return 5e3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_5001",{get:function(){return 5001},enumerable:!0,configurable:!0}),Object.defineProperty(e,"E_6000",{get:function(){return 6e3},enumerable:!0,configurable:!0}),e}();e.SecuredTouchErrorCodes=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(e){this.sessionData=e,this.propertyBlackList=new Set,this.hasMicrophone=null,this.hasSpeakers=null,this.hasWebcam=null,this.isBatterySupported=null,this.batteryLevel=null,this.batteryCharging=null,this.batteryChargingTime=null,this.batteryDischargingTime=null,this.isIphoneOrIPad=!1,this.gpsSupported=null,this.fingerPrintComponentKeys=new Set(["navigatorPlatform","webdriver","language","colorDepth","deviceMemory","pixelRatio","hardwareConcurrency","screenResolution","availableScreenResolution","timezoneOffset","timezone","sessionStorage","localStorage","indexedDb","addBehavior","openDatabase","cpuClass","platform","doNotTrack","canvas","webgl","webglVendorAndRenderer","adBlock","hasLiedLanguages","hasLiedResolution","hasLiedOs","hasLiedBrowser","touchSupport","fonts","fontsFlash","audio"]),this.webGlStatus=-1,this.numberOfVideoDevices=0,this.numberOfAudioDevices=0,this.webRtcIps=new Map,this.webRtcUrl=null,this.isDelayPassed=!1,this.isAutoDeleteCookie=!1,(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&(this.isIphoneOrIPad=!0)}return Object.defineProperty(t.prototype,"WEB_GL_ID",{get:function(){return this.isIphoneOrIPad,""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OPS",{get:function(){if(!this.isIphoneOrIPad)return 0;var e=this.sessionData.ops;return e||(e=this.getOps(),this.sessionData.ops=e),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceCategory",{get:function(){return this.userAgentData&&this.userAgentData.device?this.userAgentData.device.type:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"browserName",{get:function(){return this.userAgentData&&this.userAgentData.browser&&this.userAgentData.browser.name?this.userAgentData.browser.name.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"browserVersion",{get:function(){return this.userAgentData&&this.userAgentData.browser&&this.userAgentData.browser.version?this.userAgentData.browser.version.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"osName",{get:function(){return this.userAgentData&&this.userAgentData.os&&this.userAgentData.os.name?this.userAgentData.os.name.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"osVersion",{get:function(){return this.userAgentData&&this.userAgentData.os&&this.userAgentData.os.version?this.userAgentData.os.version.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceModel",{get:function(){return this.userAgentData&&this.userAgentData.device&&this.userAgentData.device.model?this.userAgentData.device.model.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceVendor",{get:function(){return this.userAgentData&&this.userAgentData.device&&this.userAgentData.device.vendor?this.userAgentData.device.vendor.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engineName",{get:function(){return this.userAgentData&&this.userAgentData.engine&&this.userAgentData.engine.name?this.userAgentData.engine.name.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engineVersion",{get:function(){return this.userAgentData&&this.userAgentData.engine&&this.userAgentData.engine.version?this.userAgentData.engine.version.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cpuArchitecture",{get:function(){return this.userAgentData&&this.userAgentData.cpu&&this.userAgentData.cpu.architecture?this.userAgentData.cpu.architecture.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"desktopType",{get:function(){var e=this.browserName;this.browserVersion&&(e=e+"("+this.browserVersion+")");var t=this.osName;this.osVersion&&(t=t+"("+this.osVersion+")");var n=e&&t?e+"-"+t:e||t;return n?n.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mobileType",{get:function(){var e=this.deviceModel,t=this.deviceVendor,n=e&&t?e+" "+t:e||t;return n?n.trim():""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceType",{get:function(){return this._deviceType||(e.SecuredTouchUtil.isMobile?this._deviceType=this.mobileType||this.desktopType||t.UNKNOWN_DEVICE_TYPE:this._deviceType=this.desktopType||this.mobileType||t.UNKNOWN_DEVICE_TYPE),this._deviceType},enumerable:!0,configurable:!0}),t.prototype.initUAParser=function(){try{var t=new _securedTouchDependencies.UAParser;t.setUA(navigator.userAgent),this.userAgentData=t.getResult()}catch(t){e.STLogger.warn("UAParser failure",t)}},t.prototype.setPropertyBlackList=function(e){this.propertyBlackList=new Set(null!=e?e:[])},t.prototype.bluetoothInit=function(){var t=this;return new Promise((function(n,i){navigator.bluetooth?(t.bluetoothSupported=!0,n()):(e.STLogger.debug("Bluetooth not supported!"),n())}))},t.prototype.batteryInit=function(){var t=this,n=this;return new Promise((function(i,o){navigator.getBattery?(t.isBatterySupported=!0,navigator.getBattery().then((function(e){e&&(n.batteryLevel=e.level,n.batteryCharging=e.charging,n.batteryChargingTime=e.chargingTime,n.batteryDischargingTime=e.dischargingTime),i()})).catch((function(t){e.STLogger.warn("Battery "+t),i()}))):(e.STLogger.debug("Battery not supported!"),i())}))},t.prototype.enumerateDevicesEnabled=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return!e.SecuredTouchUtil.inIframe()||!t},t.prototype.audioIntVideoInit=function(){var t=this,n=this;return new Promise((function(i,o){return t.enumerateDevicesEnabled()?navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?void navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){e.kind&&("audioinput"==e.kind.toLowerCase()?(n.hasMicrophone=!0,n.numberOfAudioDevices++):"videoinput"==e.kind.toLowerCase()?(n.hasWebcam=!0,n.numberOfVideoDevices++):"audiooutput"==e.kind.toLowerCase()&&(n.hasSpeakers=!0,n.numberOfAudioDevices++))})),i()})).catch((function(t){e.STLogger.warn("enumerateDevices failed",t),i()})):(e.STLogger.debug("enumerateDevices() not supported."),void i()):(e.STLogger.debug("enumerateDevices() cannot run within safari iframe"),void i())}))},t.prototype.getRTCPeerConnection=function(){var e=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!e){var t=window["iframe.contentWindow"];t&&(e=t.RTCPeerConnection||t.mozRTCPeerConnection||t.webkitRTCPeerConnection)}return e},t.prototype.collectWebRtc=function(){var e=this;try{var t={},n=new(this.getRTCPeerConnection())({iceServers:[{urls:this.webRtcUrl.trim()}]},{optional:[{RtpDataChannels:!0}]});n.onicecandidate=function(n){if(n.candidate){var i=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(n.candidate.candidate)[1];void 0===t[i]&&(n.candidate.candidate.indexOf("host")>0?e.webRtcIps.set("WEB_RTC_HOST_IP",i):n.candidate.candidate.indexOf("srflx")>0&&e.webRtcIps.set("WEB_RTC_SRFLX_IP",i)),t[i]=!0}},n.createDataChannel(""),n.createOffer((function(e){n.setLocalDescription(e,(function(){}),(function(){}))}),(function(){}))}catch(e){}},t.prototype.getDeviceMetadata=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,r,s;return __generator(this,(function(c){switch(c.label){case 0:return e.SecuredTouchMetrics.instance.metadata.onCalcStarted(),this.gpsSupported=null!=navigator.geolocation,i=[this.getFingerPrint().catch((function(n){e.STLogger.warn("failed to get fingerprint info",n),t&&t.sendRemoteLog(e.SecuredTouchErrorCodes.E_4001,"getFingerPrint failed",n)})),this.getPrivateMode().catch((function(t){return e.STLogger.warn("failed to get incognito info",t)})),e.SecuredTouchIncognito.isPrivateMode().catch((function(t){return e.STLogger.warn("failed to get private mode info",t)})),this.getPermissionsMetadata().catch((function(t){return e.STLogger.warn("failed to get permissions info",t)})),this.bluetoothInit().catch((function(t){return e.STLogger.warn("failed to get bluetooth info",t)})),this.audioIntVideoInit().catch((function(t){return e.STLogger.warn("failed to get audio-video info",t)})),this.batteryInit().catch((function(t){return e.STLogger.warn("failed to get battery info",t)}))],[4,Promise.all(i)];case 1:return n=c.sent(),this.fingerPrint=n[0],this.isPrivateMode=n[1],this.isPrivateModeV2=n[2],this.permissions=n[3],o={ops:this.OPS,webGl:this.WEB_GL_ID,devicePixelRatio:window.devicePixelRatio,screenWidth:window.screen.width,screenHeight:window.screen.height},e.SecuredTouchUtil.extendPrimitiveValues(o,screen,!1),a=(new Date).getTime(),s={deviceType:this.deviceType,deviceId:this.sessionData.getDeviceCredentials().deviceId,osVersion:(this.osName+" "+this.osVersion).trim()||"",display:o,sensorsMetadata:this.getSensorsMetadata()},[4,this.getIdentificationMetadata()];case 2:return s.identificationMetadata=c.sent(),s.ioMetadata=this.getIoMetadata(),s.baseTimestamp=a,s.epochTimeInMillis=a,r=s,e.SecuredTouchMetrics.instance.metadata.onCalcEnded(),[2,r]}}))}))},t.prototype.getFingerPrint=function(){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o=this;return __generator(this,(function(a){switch(a.label){case 0:return t=this,n=new Promise((function(n,i){try{var a={excludes:{enumerateDevices:!o.enumerateDevicesEnabled(),pixelRatio:!0,openDatabase:!0,addBehavior:!0,fonts:!0,fontsFlash:!0,adBlock:!0}};_securedTouchDependencies.Fingerprint2.get(a,(function(o){try{var a=o.map((function(e){return e.value})),r=_securedTouchDependencies.Fingerprint2.x64hash128(a.join(""),31);t.fingerPrintComponents=o,n(r)}catch(t){e.STLogger.warn("Fingerprint callback failure "+t),i("Fingerprint callback failure "+t)}}))}catch(t){e.STLogger.warn("Failed to get FingerPrint "+t),i("Failed to get FingerPrint "+t)}})),i=new Promise((function(t,n){return __awaiter(o,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,e.SecuredTouchUtil.delay(2500)];case 1:return t.sent(),n("Fingerprint timeout"),[2]}}))}))})),[4,Promise.race([n,i])];case 1:return[2,a.sent()]}}))}))},t.prototype.getSensorsMetadata=function(){var e={};return this.flatAndAddMetadata(e,"DEDVCE_LIGHT_SUPPORTED",(function(){return"ondevicelight"in window})),this.flatAndAddMetadata(e,"IS_TOUCH_DEVICE",(function(){return"ontouchstart"in window})),window.DeviceMotionEvent||this.flatAndAddMetadata(e,"ACCELEROMETER_SUPPORTED",(function(){return!1})),window.DeviceOrientationEvent||this.flatAndAddMetadata(e,"GYROSCOPE_SUPPORTED",(function(){return!1})),this.flatAndAddMetadata(e,"PROXIMITY_SUPPORTED",(function(){return"ondeviceproximity"in window})),e},t.prototype.getIdentificationMetadata=function(){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,r=this;return __generator(this,(function(s){switch(s.label){case 0:return t=this,n={},this.flatAndAddMetadata(n,"FINGER_PRINT",(function(){return r.fingerPrint})),this.userAgentData&&(this.flatAndAddMetadata(n,"OS_NAME",(function(){return r.osName})),this.flatAndAddMetadata(n,"OS_VERSION",(function(){return r.osVersion}))),this.userAgentData&&(this.flatAndAddMetadata(n,"DEVICE_MODEL",(function(){return r.deviceModel})),this.flatAndAddMetadata(n,"DEVICE_VENDOR",(function(){return r.deviceVendor}))),this.userAgentData&&(this.flatAndAddMetadata(n,"BROWSER_ENGINE_NAME",(function(){return r.engineName})),this.flatAndAddMetadata(n,"BROWSER_ENGINE_VERSION",(function(){return r.engineVersion}))),this.userAgentData&&this.flatAndAddMetadata(n,"CPU_ARCHITECTURE",(function(){return r.cpuArchitecture})),this.flatAndAddMetadata(n,"NAVIGATOR_VENDOR",(function(){return navigator.vendor})),this.flatAndAddMetadata(n,"NAVIGATOR_PLUGINS_LENGTH",(function(){return navigator.plugins?navigator.plugins.length:null})),this.flatAndAddMetadata(n,"NAVIGATOR_LANGUAGE",(function(){return navigator.language})),this.flatAndAddMetadata(n,"NAVIGATOR_LANGUAGES",(function(){return navigator.languages})),this.flatAndAddMetadata(n,"NAVIGATOR_MAX_TOUCH_POINTS",(function(){return navigator.maxTouchPoints||navigator.msMaxTouchPoints})),this.flatAndAddMetadata(n,"NAVIGATOR_POINTER_ENABLED",(function(){return navigator.pointerEnabled||navigator.msPointerEnabled})),this.flatAndAddMetadata(n,"NAVIGATOR_WEB_DRIVER",(function(){return navigator.webdriver})),this.flatAndAddMetadata(n,"NAVIGATOR_HARDWARE_CONCURRENCY",(function(){return navigator.hardwareConcurrency})),this.flatAndAddMetadata(n,"NAVIGATOR_VIBRATE",(function(){return null!=navigator.vibrate})),this.flatAndAddMetadata(n,"PUSH_NOTIFICATIONS_SUPPORTED",(function(){return"Notification"in window})),this.flatAndAddMetadata(n,"NAVIGATOR_APP_CODE_NAME",(function(){return navigator.appCodeName})),this.flatAndAddMetadata(n,"NAVIGATOR_APP_NAME",(function(){return navigator.appName})),this.flatAndAddMetadata(n,"NAVIGATOR_APP_VERSION",(function(){return navigator.appVersion})),this.flatAndAddMetadata(n,"NAVIGATOR_ON_LINE",(function(){return navigator.onLine})),this.flatAndAddMetadata(n,"NAVIGATOR_PLATFORM",(function(){return navigator.platform})),this.flatAndAddMetadata(n,"NAVIGATOR_PRODUCT",(function(){return navigator.product})),this.flatAndAddMetadata(n,"NAVIGATOR_USER_AGENT",(function(){return navigator.userAgent})),this.propertyBlackList.has("modernizr")?[3,2]:[4,this.safeAddModernizrFeatures(n)];case 1:s.sent(),s.label=2;case 2:for(window._ST_PING?this.flatAndAddMetadata(n,"JS_CHALLENGE",(function(){return window._ST_PING})):this.flatAndAddMetadata(n,"JS_CHALLENGE",(function(){return"unknown"})),this.fingerPrintComponents&&this.fingerPrintComponents.forEach((function(e,i){"fonts"==e.key?r.flatAndAddMetadata(n,"JS_FONTS",(function(){return e.value.length})):"webgl"==e.key?r.flatAndAddMetadata(n,"IS_WEBGL",(function(){return null!=e.value})):"canvas"==e.key?r.flatAndAddMetadata(n,"IS_CANVAS",(function(){return null!=e.value})):"screenResolution"==e.key&&e.value&&e.value.length?r.flatAndAddMetadata(n,"RESOLUTION",(function(){return e.value.join(",")})):"availableScreenResolution"==e.key&&e.value&&e.value.length?r.flatAndAddMetadata(n,"AVAILABLE_RESOLUTION",(function(){return e.value.join(",")})):"touchSupport"==e.key&&e.value&&e.value.length?r.flatAndAddMetadata(n,"TOUCH_SUPPORT",(function(){return e.value.join(",")})):"audio"==e.key&&e.value&&e.value.length?r.flatAndAddMetadata(n,"AUDIO_FINGERPRINT",(function(){return e.value})):"indexedDb"==e.key&&e.value&&e.value.length?r.flatAndAddMetadata(n,"INDEXEDDB_FINGERPRINT",(function(){return e.value})):t.fingerPrintComponentKeys.has(e.key)&&null!=e.key&&r.flatAndAddMetadata(n,e.key.toUpperCase(),(function(){return e.value}))})),this.flatAndAddMetadata(n,"IS_INCOGNITO",(function(){return r.isPrivateMode})),this.flatAndAddMetadata(n,"IS_PRIVATE_MODE",(function(){return r.isPrivateModeV2})),this.flatAndAddMetadata(n,"IS_WEB_GLSTATUS",(function(){return r.webGlStatus})),i={selenium:navigator.webdriver||e.SecuredTouchUtil.getAttribute(window.document.documentElement,"webdriver")||"",phantomjs:{_phantom:window._phantom||"",__phantomas:window.__phantomas||"",callPhantom:window.callPhantom||""},nodejs:{Buffer:window.Buffer||""},couchjs:{emit:window.emit||""},rhino:{spawn:window.spawn||""},chromium:{domAutomationController:window.domAutomationController||"",domAutomation:window.domAutomation||""},outerWidth:window.outerWidth,outerHeight:window.outerHeight},this.flatAndAddMetadata(n,"HEADLESS",(function(){return i})),this.flatAndAddMetadata(n,"REF_LINK",(function(){return document.referrer})),o={length:navigator.plugins.length,details:[]},a=0;a<o.length;a++)o.details.push({name:navigator.plugins[a].name,version:navigator.plugins[a].version,filename:navigator.plugins[a].filename});return this.flatAndAddMetadata(n,"PLUGINS",(function(){return o})),this.flatAndAddMetadata(n,"AUDIO",(function(){return r.numberOfAudioDevices})),this.flatAndAddMetadata(n,"VIDEO",(function(){return r.numberOfVideoDevices})),window.performance&&window.performance.memory&&(this.flatAndAddMetadata(n,"MEMORY_HEAP_SIZE_LIMIT",(function(){return window.performance.memory.jsHeapSizeLimit})),this.flatAndAddMetadata(n,"MEMORY_TOTAL_HEAP_SIZE",(function(){return window.performance.memory.totalJSHeapSize})),this.flatAndAddMetadata(n,"MEMORY_USED_HEAP_SIZE",(function(){return window.performance.memory.usedJSHeapSize}))),this.flatAndAddMetadata(n,"IS_ACCEPT_COOKIES",(function(){return navigator.cookieEnabled})),this.flatAndAddMetadata(n,"SELENIUM_ENV",(function(){return r.detectSelenium()})),this.flatAndAddMetadata(n,"WEB_RTC_ENABLED",(function(){return!!r.getRTCPeerConnection()})),this.webRtcUrl&&this.webRtcUrl.length>0&&(this.collectWebRtc(),this.webRtcIps.forEach((function(e,t){null!=t&&null!=e&&r.flatAndAddMetadata(n,t,(function(){return e}))})),this.webRtcIps.clear()),[2,n]}}))}))},t.prototype.getPermissionsMetadata=function(){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,r;return __generator(this,(function(s){switch(s.label){case 0:if(t={},n=["accelerometer","accessibility-events","ambient-light-sensor","background-sync","camera","clipboard-read","clipboard-write","geolocation","gyroscope","magnetometer","microphone","midi","notifications","payment-handler","persistent-storage","push"],i=[],navigator.permissions)for(a in o=function(e){var o=n[e];i.push(navigator.permissions.query({name:o}).then((function(e){t[o]=e.state})).catch((function(e){})))},n)o(a);s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return s.sent(),[3,4];case 3:return r=s.sent(),e.STLogger.warn(r),[3,4];case 4:return[2,t]}}))}))},t.prototype.safeAddModernizrFeatures=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,a;return __generator(this,(function(r){switch(r.label){case 0:return _securedTouchDependencies.evaluateModernizr(),t=this,n=Modernizr.prefixed,i=Modernizr.hasEvent,this.flatAndAddMetadata(e,"ambient_light",(function(){return Modernizr.ambientlight})),this.flatAndAddMetadata(e,"application_cache",(function(){return Modernizr.applicationcache})),this.flatAndAddMetadata(e,"battery_api",(function(){return!!n("battery",navigator)||!!n("getBattery",navigator)})),this.flatAndAddMetadata(e,"blob_constructor",(function(){return Modernizr.blobconstructor})),this.flatAndAddMetadata(e,"context_menu",(function(){return Modernizr.contextmenu})),this.flatAndAddMetadata(e,"cors",(function(){return Modernizr.cors})),this.flatAndAddMetadata(e,"cryptography",(function(){return Modernizr.cryptography})),this.flatAndAddMetadata(e,"custom_elements",(function(){return Modernizr.customelements})),this.flatAndAddMetadata(e,"custom_protocol_handler",(function(){return Modernizr.customprotocolhandler})),this.flatAndAddMetadata(e,"custom_event",(function(){return Modernizr.customevent})),this.flatAndAddMetadata(e,"dart",(function(){return Modernizr.dart})),this.flatAndAddMetadata(e,"data_view",(function(){return Modernizr.dataview})),this.flatAndAddMetadata(e,"event_listener",(function(){return Modernizr.eventlistener})),[4,this.safeModernizrOn("exiforientation")];case 1:return o=r.sent(),t.flatAndAddMetadata(e,"exif_orientation",(function(){return o})),this.flatAndAddMetadata(e,"force_touch",(function(){return Modernizr.forcetouch})),Modernizr.forcetouch&&(this.flatAndAddMetadata(e,"force_touch.mouse_force_will_begin",(function(){return i(n("mouseforcewillbegin",window,!1),window)})),this.flatAndAddMetadata(e,"force_touch.webkit_force_at_mouse_down",(function(){return MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN})),this.flatAndAddMetadata(e,"force_touch.webkit_force_at_force_mouse_down",(function(){return MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN}))),this.flatAndAddMetadata(e,"full_screen",(function(){return Modernizr.fullscreen})),this.flatAndAddMetadata(e,"game_pads",(function(){return Modernizr.gamepads})),this.flatAndAddMetadata(e,"geo_location",(function(){return Modernizr.geolocation})),this.flatAndAddMetadata(e,"ie8compat",(function(){return Modernizr.ie8compat})),[4,this.safeModernizrOn("indexeddb")];case 2:return a=r.sent(),t.flatAndAddMetadata(e,"indexed_db",(function(){return a})),this.flatAndAddMetadata(e,"indexed_db_blob",(function(){return Modernizr.indexeddbblob})),this.flatAndAddMetadata(e,"internationalization",(function(){return Modernizr.intl})),this.flatAndAddMetadata(e,"json",(function(){return Modernizr.json})),this.flatAndAddMetadata(e,"ligatures",(function(){return Modernizr.ligatures})),this.flatAndAddMetadata(e,"media_source",(function(){return"MediaSource"in window})),this.flatAndAddMetadata(e,"message_channel",(function(){return Modernizr.messagechannel})),this.flatAndAddMetadata(e,"notification",(function(){return Modernizr.notification})),this.flatAndAddMetadata(e,"page_visibility",(function(){return Modernizr.pagevisibility})),this.flatAndAddMetadata(e,"performance",(function(){return Modernizr.performance})),this.flatAndAddMetadata(e,"pointer_events",(function(){return Modernizr.pointerevents})),this.flatAndAddMetadata(e,"pointer_lock",(function(){return Modernizr.pointerlock})),this.flatAndAddMetadata(e,"proximity",(function(){return Modernizr.proximity})),this.flatAndAddMetadata(e,"query_selector",(function(){return Modernizr.queryselector})),this.flatAndAddMetadata(e,"quota_management",(function(){return Modernizr.quotamanagement})),this.flatAndAddMetadata(e,"request_animation_frame",(function(){return Modernizr.requestanimationframe})),this.flatAndAddMetadata(e,"service_worker",(function(){return Modernizr.serviceworker})),this.flatAndAddMetadata(e,"touch_events",(function(){return Modernizr.touchevents})),this.flatAndAddMetadata(e,"typed_arrays",(function(){return Modernizr.typedarrays})),this.flatAndAddMetadata(e,"vibrate",(function(){return Modernizr.vibrate})),this.flatAndAddMetadata(e,"web_gl",(function(){return Modernizr.webgl})),this.flatAndAddMetadata(e,"web_sockets",(function(){return Modernizr.websockets})),this.flatAndAddMetadata(e,"x_domain_request",(function(){return Modernizr.xdomainrequest})),[2]}}))}))},t.prototype.getIoMetadata=function(){var t=this,n={},i=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return this.flatAndAddMetadata(n,"NETWORK_TYPE",(function(){return i?i.type:null})),this.flatAndAddMetadata(n,"NETWORK_DOWNLOAD_MAX",(function(){return i?i.downlinkMax:null})),this.flatAndAddMetadata(n,"BLUTOOTH_SUPPORTED",(function(){return t.bluetoothSupported})),this.flatAndAddMetadata(n,"BLUTOOTH_DEVICE_NAME",(function(){return t.bluetoothDeviceName})),this.flatAndAddMetadata(n,"BLUTOOTH_DEVICE_ID",(function(){return t.bluetoothDeviceId})),this.flatAndAddMetadata(n,"BLUTOOTH_IS_CONNECTED",(function(){return t.bluetoothIsConnected})),this.flatAndAddMetadata(n,"HAS_SPEAKERS",(function(){return t.hasSpeakers})),this.flatAndAddMetadata(n,"HAS_MICROPHONE",(function(){return t.hasMicrophone})),this.flatAndAddMetadata(n,"HAS_CAMERA",(function(){return t.hasWebcam})),this.flatAndAddMetadata(n,"BATTERY_SUPPORTED",(function(){return t.isBatterySupported})),this.flatAndAddMetadata(n,"BATTERY_LEVEL",(function(){return t.batteryLevel})),this.flatAndAddMetadata(n,"BATTERY_CHARGING",(function(){return t.batteryCharging})),this.flatAndAddMetadata(n,"BATTERY_CHARGING_TIME",(function(){return t.batteryChargingTime})),this.flatAndAddMetadata(n,"BATTERY_DISCHARGING_TIME",(function(){return t.batteryDischargingTime})),this.flatAndAddMetadata(n,"GPS_SUPPORTED",(function(){return t.gpsSupported})),this.flatAndAddMetadata(n,"IS_MOBILE",(function(){return e.SecuredTouchUtil.isMobile})),this.flatAndAddMetadata(n,"HAS_TOUCH",(function(){return"ontouchstart"in document.documentElement})),this.flatAndAddMetadata(n,"PERMISSIONS",(function(){return t.permissions})),n},t.prototype.safeAddMetadata=function(t,n,i){try{null==n||null==i||this.propertyBlackList.has(n)||(t[n]=i)}catch(t){e.STLogger.warn("Failed to add "+n+" -> "+i+", "+t)}},t.prototype.safeModernizrOn=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:return n=new Promise((function(n){try{Modernizr.on(t,(function(e){n(e)}))}catch(i){n(null),e.STLogger.warn("Modernizr.on Failed with feature "+t,i)}})),i=e.SecuredTouchUtil.delay(1e3).then((function(){return null})),[4,Promise.race([n,i])];case 1:return[2,o.sent()]}}))}))},t.prototype.flatAndAddMetadata=function(t,n,i){try{var o=i();if("object"==typeof o&&null!==o){var a=e.SecuredTouchUtil.flatten(o);for(var r in a)this.safeAddMetadata(t,n+"."+r,a[r])}else this.safeAddMetadata(t,n,o)}catch(t){e.STLogger.warn("Failed to add "+n,t)}},t.prototype.getOps=function(){var t,n=new Date,i=0;do{i++,t=(new Date).getTime()-n.getTime(),Math.sqrt(i*Math.random())}while(t<500);var o=i/t;return e.STLogger.debug("Ops : "+o),o},t.prototype.getWebGl=function(){var t="",n="";try{var i=document.createElement("canvas"),o=i.getContext("webgl")?i.getContext("webgl"):i.getContext("experimental-webgl")?i.getContext("experimental-webgl"):i.getContext("moz-webgl")?i.getContext("moz-webgl"):i.getContext("webkit-3d");if(o){var a=o.getExtension("WEBGL_debug_renderer_info");t=o.getParameter(o.VERSION).toLowerCase(),a&&(e.STLogger.debug("WegGl debugInfo: "+a),n=o.getParameter(a.UNMASKED_RENDERER_WEBGL).toLowerCase()),this.webGlStatus=1}else e.STLogger.warn("WegGl failure, context is null"),this.webGlStatus=0}catch(t){e.STLogger.warn("WegGl discovery failure"+t)}return e.STLogger.debug("WegGl : "+n||!1),n||t},t.prototype.getPrivateMode=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){return e=this,[2,new Promise((function(t,n){e.detectPrivateMode((function(e){t(e)}))}))]}))}))},t.prototype.detectPrivateMode=function(e){var t,n=e.bind(null,!0),i=e.bind(null,!1);window.webkitRequestFileSystem?window.webkitRequestFileSystem(0,0,i,n):"MozAppearance"in document.documentElement.style?((t=indexedDB.open("test")).onerror=n,t.onsuccess=i):/constructor/i.test(window.HTMLElement)||window.safari?function(){try{localStorage.length||(localStorage.x=1,localStorage.removeItem("x")),i()}catch(e){navigator.cookieEnabled?n():i()}}():window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?i():n()},t.prototype.detectSelenium=function(){for(var t=0,n=["_phantom","__nightmare","_selenium","callPhantom","callSelenium","_Selenium_IDE_Recorder"];t<n.length;t++)if(window[n[t]])return!0;for(var i=0,o=["__webdriver_evaluate","__selenium_evaluate","__webdriver_script_function","__webdriver_script_func","__webdriver_script_fn","__fxdriver_evaluate","__driver_unwrapped","__webdriver_unwrapped","__driver_evaluate","__selenium_unwrapped","__fxdriver_unwrapped"];i<o.length;i++)if(document[o[i]])return!0;return!(!window.external||!window.external.toString()||-1==window.external.toString().indexOf("Sequentum"))||!!(navigator.webdriver||e.SecuredTouchUtil.getAttribute(window.document.documentElement,"selenium")||e.SecuredTouchUtil.getAttribute(window.document.documentElement,"webdriver")||e.SecuredTouchUtil.getAttribute(window.document.documentElement,"driver"))},t.UNKNOWN_DEVICE_TYPE="unknown",t}();e.SecuredTouchMeatadata=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){this._tags=[],this._blackListRegex=""}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tags",{get:function(){return this._tags},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blackListRegex",{set:function(e){this._blackListRegex=e||""},enumerable:!0,configurable:!0}),t.prototype.getTagsCopy=function(){return this._tags?Array.from(this._tags):[]},t.prototype.setTag=function(t,n){var i=!1;if(t){var o=n?t+":"+n:t;this._blackListRegex&&t.match(this._blackListRegex)?e.STLogger.info("Tag "+t+" is blacklisted"):(this._tags.push({name:o,timestamp:Date.now()}),i=!0,e.STLogger.info("Add tag: "+o))}return i},t.prototype.reset=function(){this._tags=[]},t}();e.SecuredTouchTags=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t;!function(e){e.tag="TAG",e.refreshUser="REFRESH_USER",e.indirect="INDIRECT",e.flush="FLUSH",e.appSession="APP_SESSION_ID"}(t=e.ForceReason||(e.ForceReason={}));var n=function(){function n(t,n){this.dataRepository=t,this.sessionData=n,this._retryNumber=1,this._pauseTimestamp=0,this.errorProcessed=!1,this.started=!1,this.currentRequestingDigest=null,this.startTasks=[],this.modes={},this.lastRetryTimestamp=Date.now(),this.lastPayloadTimestamp=Date.now(),this.stMetadata=new e.SecuredTouchMeatadata(n)}return Object.defineProperty(n,"MAX_NUMBER_OF_TRIES",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n,"INIT_PARAM_UPDATE_INTERVAL_MS",{get:function(){return 5184e5},enumerable:!0,configurable:!0}),Object.defineProperty(n,"RETRY_UPDATE_INTERVAL_MS",{get:function(){return 6e4},enumerable:!0,configurable:!0}),Object.defineProperty(n,"RETRY_INTERVAL_MS",{get:function(){return 15e3},enumerable:!0,configurable:!0}),Object.defineProperty(n,"START_INTERACTION_INTERVAL_MS",{get:function(){return 12e4},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initST",{get:function(){return this.sessionData.initST},enumerable:!0,configurable:!0}),n.prototype.isRunning=function(e){return 0===this._pauseTimestamp||Boolean(e&&e<=this._pauseTimestamp)},n.instance=function(){if(!this._instance){var t=new e.STServer,n=e.SecuredTouchSessionStorage.instance;if(!document.body)throw e.STLogger.error("Securedtouch can be started only after DOM Ready!"),"SecuredTouch can be started only after DOM Ready!";this._instance=new e.SecuredTouchClient(t,n)}return this._instance},n.prototype.flush=function(){if(this.started&&this.isRunning())return this.forceSendCapturedEvents(t.flush)},n.prototype.sendHeartBeat=function(){return(new Date).getTime()-this.lastPayloadTimestamp>=e.SecuredTouchPointerConfig.instance.heartBeatFrequencyMs?(this.lastPayloadTimestamp=(new Date).getTime(),this.addTag(e.SecuredTouchConstants.HEART_BEAT_TAG),this.flush()):Promise.resolve()},n.prototype.setTag=function(e,t){return this.addTag(e,t),this.flush()},n.prototype.addTag=function(t,n){if(this.isRunning()){var i=e.SecuredTouchTags.instance.setTag(t,n),o=e.SecuredTouchPointerConfig.instance.tagsToFlushRegex;i&&o&&t.match(o)&&this.flush()}},n.prototype.setAppSessionId=function(n){e.SecuredTouchSessionStorage.instance.appSessionId=n,this.started&&this.isRunning()&&this.forceSendCapturedEvents(t.appSession)},n.prototype.locationInWhitelist=function(){var t=e.SecuredTouchPointerConfig.instance.urlWhitelist;if(0===t.length)return!0;for(var n in t)if(window.location.href.match(t[n]))return!0;return!1},n.prototype.isEnabled=function(){return e.SecuredTouchPointerConfig.instance.enabled&&this.locationInWhitelist()},n.prototype.isInitAndEnabled=function(){return!(!this.isEnabled()||!this.sessionData.initST)||(this.sessionData.initST||this.tryRecconect(),!1)},n.prototype.startNewSession=function(){var t=this;return this.dataRepository.initSession(e.SecuredTouchPointerConfig.instance.url,{username:this.sessionData.getUsername(),applicationId:this.startParams.appId,deviceType:this.stMetadata.deviceType,deviceId:this.sessionData.getDeviceCredentials().deviceId,modes:this.modes}).then((function(e){e&&e.clientDigest&&t.updateDigest(e.clientDigest)})).catch((function(t){e.STLogger.warn("Failed to init session",t)}))},n.prototype.doAfterSdkInit=function(e){return this.started?e():(this.startTasks.push(e),Promise.resolve())},n.prototype.login=function(t,n){var i=this,o=e.SecuredTouchUtil.now();return this.doAfterSdkInit((function(){return void 0!==n&&(e.SecuredTouchSessionStorage.instance.appSessionId=n),i.refreshUsernameAndModes(t,0,1,!1,o)}))},n.prototype.logout=function(){var t=this,n=e.SecuredTouchUtil.now();return this.doAfterSdkInit((function(){return e.SecuredTouchSessionStorage.instance.appSessionId=null,t.refreshUsernameAndModes(null,0,0,!0,n)}))},n.prototype.pauseSecuredTouch=function(){var t=this;this.addTag("SDK paused"),this.flush(),this._pauseTimestamp=e.SecuredTouchUtil.now(),this.doAfterSdkInit((function(){return t.stopListening(),Promise.resolve()}))},n.prototype.resumeSecuredTouch=function(){var e=this;this._pauseTimestamp=0,this.addTag("SDK resumed"),this.doAfterSdkInit((function(){return e.refreshListening(),Promise.resolve()}))},n.prototype.refreshUsernameAndModes=function(t,n,i,o,a){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return this.sessionData.initST?this.isEnabled()?this.isRunning(a)?o?(e.STLogger.info("Logout user"),[2,this.resetSession()]):(e.STLogger.info("Login with user: "+t),[2,this.updateUser(t)]):(e.STLogger.info("SDK paused"),this.sessionData.setUsername(t),[2,Promise.resolve()]):(e.STLogger.warn("Refresh User Name FAILED, SDK is disabled"),[2,Promise.resolve()]):(e.STLogger.error("Refresh User Name FAILED, SDK wasn't initialized"),[2,Promise.resolve()])}))}))},n.prototype.resetSession=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return this.addTag("LOGOUT"),this.clearBuffer(),[4,this.forceSendCapturedEvents(t.refreshUser)];case 1:return e.sent(),[4,this.startNewSession()];case 2:return e.sent(),this.sessionData.setUsername(null),[2]}}))}))},n.prototype.updateUser=function(e){return this.addTag("SUCCESS_LOGIN"),this.sessionData.setUsername(e),this.forceSendCapturedEvents(t.refreshUser)},n.prototype.validateStartParams=function(t){if(!t.appId)throw this.errorProcessed=!0,e.STLogger.error("ApplicationId is mandatory (Start parameters)!"),"ApplicationId is mandatory (Start parameters)!";if(!t.appSecret)throw this.errorProcessed=!0,e.STLogger.error("Application secret is mandatory (Start parameters)!"),"Application secret is mandatory (Start parameters)!";if(!document.body)throw this.errorProcessed=!0,e.STLogger.error("Securedtouch can be started only after DOM Ready!"),"SecuredTouch can be started only after DOM Ready!"},n.prototype.sendMetadata=function(){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o;return __generator(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),t=this.sessionData.getLastMetadataTimeStamp(),n=(new Date).getTime()-t>e.SecuredTouchConstants.METADATA_TTL_MILLIS,e.SecuredTouchMetrics.instance.metadata.setMetadataSkipped(!n),n?(e.STLogger.debug("Updating Metadata"),[4,this.stMetadata.getDeviceMetadata(this.stRemoteLogger)]):[3,3];case 1:return i=a.sent(),[4,this.dataRepository.sendMetadata(e.SecuredTouchPointerConfig.instance.url,i)];case 2:a.sent(),this.sessionData.setLastMetadataTimeStamp((new Date).getTime()),a.label=3;case 3:return[3,5];case 4:return o=a.sent(),this.sendRemoteLog(e.SecuredTouchErrorCodes.E_4000,"Failed to send metadata",o),e.STLogger.warn("Failed to update metadata",o),[3,5];case 5:return[2]}}))}))},n.prototype.getStToken=function(){return window._securedTouchToken||""},n.prototype.sendRemoteLog=function(t,n,i){try{this.stRemoteLogger&&this.stRemoteLogger.sendRemoteLog(t,n,i)}catch(t){e.STLogger.warn("sendRemoteLog failed",t)}},n.prototype.setUsername=function(t){try{t.hasOwnProperty("userId")?this.sessionData.setUsername(t.userId):t.hasOwnProperty("username")&&this.sessionData.setUsername(t.username)}catch(t){this.sendRemoteLog(e.SecuredTouchErrorCodes.E_1001,"Failed to update username",t),e.STLogger.warn("Failed to update username",t)}},n.prototype.startST=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:this.errorProcessed=!1,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.start(t)];case 2:return i.sent(),[3,4];case 3:throw n=i.sent(),this.errorProcessed||this.sendRemoteLog(e.SecuredTouchErrorCodes.E_1000,"SDK initialization failed",n),n;case 4:return[2]}}))}))},n.prototype.start=function(t){return __awaiter(this,void 0,void 0,(function(){var i,o,a,r,s;return __generator(this,(function(c){switch(c.label){case 0:return this.startParams=t,this.validateStartParams(t),this.started?(this.sessionData.initST=!0,[2,Promise.resolve("SDK already initialized")]):(this.stMetadata.initUAParser(),this.stRemoteLogger=new e.SecuredTouchRemoteLogger(t,this.stMetadata,e.SecuredTouchConstants.CLIENT_VERSION),e.SecuredTouchMetrics.instance.init.onInitStarted(),t.isDebugMode&&(this.modes.isDebugMode=1),e.STLogger.isLogEnabled=t.enableLog,e.STLogger.info("Starting STClient..."),this.sessionData.applicationId=t.appId,[4,this.sessionData.initDeviceStorage(t.hubUrl,t.url)]);case 1:c.sent(),this.dataRepository.init(this.startParams.appId,this.startParams.url,this.startParams.isDebugMode?e.SecuredTouchConstants.CLIENT_VERSION+"-debug":e.SecuredTouchConstants.CLIENT_VERSION),i=this.sessionData.getDeviceCredentials(),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.dataRepository.logIn(this.startParams.appSecret,i.deviceId,i.deviceSecret)];case 3:return c.sent(),[3,5];case 4:throw o=c.sent(),this.errorProcessed=!0,this.sendRemoteLog(e.SecuredTouchErrorCodes.E_2000,"Auth failed",o),"Authentication failed. "+e.SecuredTouchUtil.getErrorAsString(o);case 5:Date.now()-this.sessionData.lastInitParamsTs<n.INIT_PARAM_UPDATE_INTERVAL_MS&&(a=this.sessionData.initParams),c.label=6;case 6:return c.trys.push([6,8,,9]),e.SecuredTouchMetrics.instance.init.setPointerCached(!!a),[4,this.refreshInitParams(a,{deviceId:i.deviceId,device:this.stMetadata.deviceType,isMobile:e.SecuredTouchUtil.isMobile})];case 7:return c.sent(),[3,9];case 8:throw r=c.sent(),this.errorProcessed=!0,this.sendRemoteLog(e.SecuredTouchErrorCodes.E_3000,"Send init failed",r),"Init failed. "+e.SecuredTouchUtil.getErrorAsString(r);case 9:return s=e.SecuredTouchPointerConfig.instance,this.dataRepository.initNetworkParams(s.requestTimeout,s.maxRequestQueueSize,s.url),this.stMetadata.webRtcUrl=s.webRtcUrl,this.setUsername(t),this.sessionData.appSessionId=t.sessionId,this.isEnabled()?(this.sendMetadata(),this.sessionData.passedBufferTimeout?this.dataRepository.clearCanceledPayloads():this.dataRepository.sendCanceledPayloads()):e.STLogger.warn("StClient disabled!"),this.sessionData.initST=!0,this.refreshListening(),this.started=!0,e.SecuredTouchMetrics.instance.init.onInitEnded(),[4,this.postSdkInit()];case 10:return c.sent(),[2]}}))}))},n.prototype.postSdkInit=function(){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o;return __generator(this,(function(a){switch(a.label){case 0:for(n in a.trys.push([0,2,,3]),document.referrer&&e.SecuredTouchTags.instance.setTag("referrer:"+document.referrer),e.SecuredTouchPointerConfig.instance.sendLocation&&e.SecuredTouchTags.instance.setTag("location:"+window.location.href),this.addTag("SDK started"),t=[],this.startTasks)i=this.startTasks[n],e.SecuredTouchUtil.isFunction(i)&&t.push(i());return[4,Promise.all(t)];case 1:return a.sent(),[3,3];case 2:return o=a.sent(),this.sendRemoteLog(e.SecuredTouchErrorCodes.E_1002,"Post init failed",o),e.STLogger.warn("SDK post init failed",o),[3,3];case 3:return[2]}}))}))},n.prototype.updateDigest=function(t){var n=this,i=Promise.resolve();return e.SecuredTouchPointerConfig.instance.clientDigest!==t&&this.currentRequestingDigest!==t&&this.isRunning()&&(this.currentRequestingDigest=t,i=this.refreshInitParams(null,{device:this.stMetadata.deviceType,deviceId:this.sessionData.getDeviceCredentials().deviceId,isMobile:e.SecuredTouchUtil.isMobile}).then((function(){n.currentRequestingDigest=null,n.refreshListening()})).catch((function(t){n.currentRequestingDigest=null,e.STLogger.warn("refreshInitParams failed",t)}))),i},n.prototype.refreshInitParams=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(a){switch(a.label){case 0:return i=e.SecuredTouchPointerConfig.instance.enabled,t?(o=t,[3,3]):[3,1];case 1:return[4,this.dataRepository.getInitParams(n)];case 2:o=a.sent(),this.sessionData.lastInitParamsTs=Date.now(),a.label=3;case 3:return e.STLogger.debug("Refreshing init params: "+JSON.stringify(o)),e.SecuredTouchPointerConfig.instance.refreshPointerParams(o),this.sessionData.initParams=o,this.stMetadata.setPropertyBlackList(e.SecuredTouchPointerConfig.instance.propertyBlackList),i&&!e.SecuredTouchPointerConfig.instance.enabled&&e.STLogger.warn("ST client disabled by init params!"),[2]}}))}))},n.prototype.tryRecconect=function(){var t=this,i=this;!this.sessionData.initST&&Date.now()-this.lastRetryTimestamp>n.RETRY_UPDATE_INTERVAL_MS&&(this.lastRetryTimestamp=Date.now(),this.startST(this.startParams).catch((function(o){"object"==typeof o&&(o=JSON.stringify(o)),e.STLogger.error("FAILED to start STClient! ("+o+")"),t._retryNumber<e.SecuredTouchClientBase.MAX_NUMBER_OF_TRIES?(window.setTimeout(i.tryRecconect,n.RETRY_INTERVAL_MS),t._retryNumber++):(e.STLogger.error("Connecting retries exhausted!"),t._retryNumber=1)})),e.STLogger.debug("Reconnecting..."))},n.prototype.getEnvironmentData=function(){return{ops:this.stMetadata.OPS,webGl:this.stMetadata.WEB_GL_ID,devicePixelRatio:window.devicePixelRatio,screenWidth:window.screen.width,screenHeight:window.screen.height}},n.prototype.getDevToolsState=function(){var e=window.outerWidth-window.innerWidth>160,t=window.outerHeight-window.innerHeight>160,n=e?"vertical":"horizontal";return t&&e||!(window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||e||t)?{open:!1,orientation:null}:{open:!0,orientation:n}},n.prototype.addCommonAdditionalData=function(t){if(e.SecuredTouchPointerConfig.instance.devToolsEnabled){var n=this.getDevToolsState();n&&(n.open&&(t.DEV_TOOLS_OPEN=n.open),n.orientation&&(t.DEV_TOOLS_ORIENTATION=n.orientation))}this.stMetadata.isDelayPassed&&(this.stMetadata.isDelayPassed=!1,t.IS_AUTODLTE_COOKIES=this.stMetadata.isAutoDeleteCookie)},n}();e.SecuredTouchClientBase=n}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this._isStarted=!1,this._onClipboardEvent=new e.EventDispatcher,this.behavioralType=t,this.onClipboardEventHandler=this.onEvent.bind(this)}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onClipboardEvent",{get:function(){return this._onClipboardEvent.asEvent()},enumerable:!0,configurable:!0}),t.prototype.onEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this._onClipboardEvent.dispatch(this,this.createClipboardEvent(t))}catch(t){e.STLogger.warn("error in clipboard handler",t)}},t.prototype.createClipboardEvent=function(t){var n=e.SecuredTouchUtil.getSrcElement(t);return{category:"ClipboardEvent",type:t.type,eventTs:t.timeStamp,epochTs:(new Date).getTime(),additionalData:e.SecuredTouchUtil.flatten({stId:e.SecuredTouchUtil.getAttribute(n,"data-st-field")||"",elementId:n?n.id:""})}},t.prototype.start=function(){this._isStarted||(this._isStarted=!0,e.SecuredTouchUtil.addEventListener(document,"cut",this.onClipboardEventHandler),e.SecuredTouchUtil.addEventListener(document,"copy",this.onClipboardEventHandler),e.SecuredTouchUtil.addEventListener(document,"paste",this.onClipboardEventHandler))},t.prototype.stop=function(){this._isStarted&&(this._isStarted=!1,document.removeEventListener("cut",this.onClipboardEventHandler),document.removeEventListener("copy",this.onClipboardEventHandler),document.removeEventListener("paste",this.onClipboardEventHandler))},t}();e.SecuredTouchClipboardEvents=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this._isStarted=!1,this._onDragEvent=new e.EventDispatcher,this.behavioralType=t,this.onDragEventHandler=this.onEvent.bind(this)}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDragEvent",{get:function(){return this._onDragEvent.asEvent()},enumerable:!0,configurable:!0}),t.prototype.createDataTransferObject=function(e){var t="",n="",i=[],o=[];if(e&&(t=e.dropEffect,n=e.effectAllowed,i=e.types||[],e.files&&e.files.length>0))for(var a in e.files)o.push({lastModified:e.files[a].lastModified,size:e.files[a].size,type:e.files[a].type});return{dropEffect:t,effectAllowed:n,types:i.toString(),files:o}},t.prototype.createDragEvent=function(t){var n=e.SecuredTouchUtil.modifiersKeys(t),i=this.createDataTransferObject(t.dataTransfer);return{category:"DragEvent",type:t.type,eventTs:t.timeStamp,epochTs:(new Date).getTime(),additionalData:e.SecuredTouchUtil.flatten({button:t.button,buttons:t.buttons,clientX:t.clientX,clientY:t.clientY,movementX:t.movementX,movementY:t.movementY,offsetX:t.offsetX,offsetY:t.offsetY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,which:t.which,modifierKeys:n.toString(),dataTransfer:i})}},t.prototype.onEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this._onDragEvent.dispatch(this,this.createDragEvent(t))}catch(t){e.STLogger.warn("error in drag handler",t)}},t.prototype.start=function(){this._isStarted||(this._isStarted=!0,e.SecuredTouchUtil.addEventListener(document,"dragstart",this.onDragEventHandler),e.SecuredTouchUtil.addEventListener(document,"dragexit",this.onDragEventHandler),e.SecuredTouchUtil.addEventListener(document,"drop",this.onDragEventHandler),e.SecuredTouchUtil.addEventListener(document,"dragend",this.onDragEventHandler))},t.prototype.stop=function(){this._isStarted&&(this._isStarted=!1,document.removeEventListener("dragstart",this.onDragEventHandler),document.removeEventListener("dragexit",this.onDragEventHandler),document.removeEventListener("drop",this.onDragEventHandler),document.removeEventListener("dragend",this.onDragEventHandler))},t}();e.SecuredTouchDragEvents=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this._isStarted=!1,this._onFocusEvent=new e.EventDispatcher,this.behavioralType=t,this.onFocusEventHandler=this.onEvent.bind(this)}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onFocusEvent",{get:function(){return this._onFocusEvent.asEvent()},enumerable:!0,configurable:!0}),t.prototype.getRelatedTarget=function(t){if(!t.relatedTarget)return{type:"",stId:"",elementId:""};var n={type:e.SecuredTouchUtil.getObjectType(t.relatedTarget),stId:"",elementId:""};t.relatedTarget.id&&(n.elementId=t.relatedTarget.id);try{var i=t.relatedTarget;n.stId=e.SecuredTouchUtil.getAttribute(i,"data-st-field")||""}catch(e){}return n},t.prototype.createFocusEvent=function(t){var n=e.SecuredTouchUtil.getSrcElement(t),i=this.getRelatedTarget(t);return{category:"FocusEvent",type:t.type,eventTs:t.timeStamp,epochTs:(new Date).getTime(),additionalData:e.SecuredTouchUtil.flatten({stId:e.SecuredTouchUtil.getAttribute(n,"data-st-field")||"",elementId:n?n.id:"",relatedTarget:i})}},t.prototype.onEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this._onFocusEvent.dispatch(this,this.createFocusEvent(t))}catch(t){e.STLogger.warn("error in focus handler",t)}},t.prototype.start=function(){this._isStarted||(this._isStarted=!0,e.SecuredTouchUtil.addEventListener(document,"DOMFocusIn",this.onFocusEventHandler),e.SecuredTouchUtil.addEventListener(document,"DOMFocusOut",this.onFocusEventHandler),e.SecuredTouchUtil.addEventListener(document,"focus",this.onFocusEventHandler),e.SecuredTouchUtil.addEventListener(document,"focusin",this.onFocusEventHandler),e.SecuredTouchUtil.addEventListener(document,"focusout",this.onFocusEventHandler))},t.prototype.stop=function(){this._isStarted&&(this._isStarted=!1,document.removeEventListener("DOMFocusIn",this.onFocusEventHandler),document.removeEventListener("DOMFocusOut",this.onFocusEventHandler),document.removeEventListener("focus",this.onFocusEventHandler),document.removeEventListener("focusin",this.onFocusEventHandler),document.removeEventListener("focusout",this.onFocusEventHandler))},t}();e.SecuredTouchFocusEvents=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this._isStarted=!1,this._onUIEvent=new e.EventDispatcher,this.behavioralType=t,this.onUIEventHandler=this.onEvent.bind(this)}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onUIEvent",{get:function(){return this._onUIEvent.asEvent()},enumerable:!0,configurable:!0}),t.prototype.createUIEvent=function(t){return{category:"UIEvent",type:t.type,eventTs:t.timeStamp,epochTs:(new Date).getTime(),additionalData:e.SecuredTouchUtil.flatten({detail:t.detail})}},t.prototype.onEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this._onUIEvent.dispatch(this,this.createUIEvent(t))}catch(t){e.STLogger.warn("error in UIEvent handler",t)}},t.prototype.start=function(){this._isStarted||(this._isStarted=!0,e.SecuredTouchUtil.addEventListener(document,"resize",this.onUIEventHandler),e.SecuredTouchUtil.addEventListener(document,"scroll",this.onUIEventHandler),e.SecuredTouchUtil.addEventListener(document,"select",this.onUIEventHandler))},t.prototype.stop=function(){this._isStarted&&(this._isStarted=!1,document.removeEventListener("resize",this.onUIEventHandler),document.removeEventListener("scroll",this.onUIEventHandler),document.removeEventListener("select",this.onUIEventHandler))},t}();e.SecuredTouchUIEvents=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this.visibilityChangeEventName="visibilitychange",this.hiddenProperty="hidden",this._isStarted=!1,this._onGeneralEvent=new e.EventDispatcher,this.behavioralType=t,this.onGeneralEventHandler=this.onEvent.bind(this),this.onLangChangeHandler=this.onLangChangeEvent.bind(this),this.onOrientationChangeHandler=this.onOrientationChangeEvent.bind(this),this.onVisibilityChangeHandler=this.onVisibilityChangeEvent.bind(this),void 0!==document.msHidden?(this.hiddenProperty="msHidden",this.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEventName="webkitvisibilitychange")}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onGeneralEvent",{get:function(){return this._onGeneralEvent.asEvent()},enumerable:!0,configurable:!0}),t.prototype.onEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this._onGeneralEvent.dispatch(this,this.createGeneralEvent(t))}catch(t){e.STLogger.warn("error in general event handler",t)}},t.prototype.onLangChangeEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;var n=this.createGeneralEvent(t);navigator&&navigator.language&&(n.additionalData["navigator.language"]=navigator.language),this._onGeneralEvent.dispatch(this,n)}catch(t){e.STLogger.warn("error in LangChange event handler",t)}},t.prototype.onOrientationChangeEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;var n=this.createGeneralEvent(t),i=e.SecuredTouchUtil.getDeviceOrientation();n.additionalData.orientation=i.orientation,n.additionalData.angle=i.angle,this._onGeneralEvent.dispatch(this,n)}catch(t){e.STLogger.warn("error in OrientationChange event handler",t)}},t.prototype.onVisibilityChangeEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;var n=this.createGeneralEvent(t);n.additionalData.hidden=!!document[this.hiddenProperty],document.visibilityState&&(n.additionalData.visibilityState=document.visibilityState.toString()),this._onGeneralEvent.dispatch(this,n)}catch(t){e.STLogger.warn("error in VisibilityChange event handler",t)}},t.prototype.createGeneralEvent=function(e){return{category:"Event",type:e.type,eventTs:e.timeStamp,epochTs:(new Date).getTime(),additionalData:{}}},t.prototype.start=function(){this._isStarted||(this._isStarted=!0,e.SecuredTouchUtil.addEventListener(document,this.visibilityChangeEventName,this.onVisibilityChangeHandler),e.SecuredTouchUtil.addEventListener(document,"change",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(document,"fullscreenchange",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(document,"invalid",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(window,"languagechange",this.onLangChangeHandler),e.SecuredTouchUtil.addEventListener(window,"orientationchange",this.onOrientationChangeHandler),e.SecuredTouchUtil.addEventListener(document,"seeked",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(document,"seeking",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(document,"selectstart",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(document,"selectionchange",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(document,"submit",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(document,"volumechange",this.onGeneralEventHandler),e.SecuredTouchUtil.addEventListener(document,"reset",this.onGeneralEventHandler))},t.prototype.stop=function(){this._isStarted&&(this._isStarted=!1,document.removeEventListener(this.visibilityChangeEventName,this.onVisibilityChangeHandler),document.removeEventListener("change",this.onGeneralEventHandler),document.removeEventListener("fullscreenchange",this.onGeneralEventHandler),document.removeEventListener("invalid",this.onGeneralEventHandler),window.removeEventListener("languagechange",this.onLangChangeHandler),window.removeEventListener("orientationchange",this.onOrientationChangeHandler),document.removeEventListener("seeked",this.onGeneralEventHandler),document.removeEventListener("seeking",this.onGeneralEventHandler),document.removeEventListener("selectstart",this.onGeneralEventHandler),document.removeEventListener("selectionchange",this.onGeneralEventHandler),document.removeEventListener("submit",this.onGeneralEventHandler),document.removeEventListener("volumechange",this.onGeneralEventHandler),document.removeEventListener("reset",this.onGeneralEventHandler))},t}();e.SecuredTouchGeneralEvents=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this._isStarted=!1,this._onUnloadEvent=new e.EventDispatcher,this.behavioralType=t,this.onUnloadEventHandler=this.onEvent.bind(this)}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onUnloadEvent",{get:function(){return this._onUnloadEvent.asEvent()},enumerable:!0,configurable:!0}),t.prototype.createUnloadEvent=function(t){return{category:"UIEvent",type:t.type,eventTs:t.timeStamp,epochTs:(new Date).getTime(),additionalData:e.SecuredTouchUtil.flatten({detail:t.detail})}},t.prototype.onEvent=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return void this._onUnloadEvent.dispatch(this,null);this._onUnloadEvent.dispatch(this,this.createUnloadEvent(t))}catch(t){e.STLogger.warn("error in UnloadEvent handler",t)}},t.prototype.start=function(){this._isStarted||(this._isStarted=!0,e.SecuredTouchPointerConfig.instance.beforeUnloadEnabled&&e.SecuredTouchUtil.addEventListener(window,"beforeunload",this.onUnloadEventHandler))},t.prototype.stop=function(){this._isStarted&&(this._isStarted=!1,document.removeEventListener("beforeunload",this.onUnloadEventHandler))},t}();e.SecuredTouchUnloadEvents=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this.DEFAULT_INDIRECT_INTERVAL=3e3,this.DEFAULT_INDIRECT_IDLE_INTERVAL=1e3,this.MAX_INDIRECT_EVENTS=500,this._onIndirect=new e.EventDispatcher,this._onWindowDispose=new e.EventDispatcher,this.indirectEvents=[],this._intervalTimeInMillis=this.DEFAULT_INDIRECT_INTERVAL,this.idleTimeInMillis=this.DEFAULT_INDIRECT_IDLE_INTERVAL,this.lastIndirectEventTimestamp=0,this._isStarted=!1,this.stClipboardEvents=new e.SecuredTouchClipboardEvents(t),this.stClipboardEvents.onClipboardEvent.subscribe(this.handleEvent.bind(this)),this.stDragEvents=new e.SecuredTouchDragEvents(t),this.stDragEvents.onDragEvent.subscribe(this.handleEvent.bind(this)),this.stFocusEvents=new e.SecuredTouchFocusEvents(t),this.stFocusEvents.onFocusEvent.subscribe(this.handleEvent.bind(this)),this.stUIEvents=new e.SecuredTouchUIEvents(t),this.stUIEvents.onUIEvent.subscribe(this.handleEvent.bind(this)),this.stGeneralEvents=new e.SecuredTouchGeneralEvents(t),this.stGeneralEvents.onGeneralEvent.subscribe(this.handleEvent.bind(this)),this.stUnloadEvent=new e.SecuredTouchUnloadEvents(t),this.stUnloadEvent.onUnloadEvent.subscribe(this.windowUnload.bind(this)),this.onTimeElapsedHandler=this.onTimeElapsed.bind(this)}return Object.defineProperty(t.prototype,"onIndirect",{get:function(){return this._onIndirect.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onWindowDispose",{get:function(){return this._onWindowDispose.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intervalTimeInMillis",{set:function(e){this._intervalTimeInMillis=e},enumerable:!0,configurable:!0}),t.prototype.onTimeElapsed=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return this.indirectEvents.length>0&&(new Date).getTime()-this.lastIndirectEventTimestamp>=this.idleTimeInMillis&&this.dispatch(),[2]}))}))},t.prototype.handleEvent=function(e,t){this.lastIndirectEventTimestamp=(new Date).getTime(),this.pushEvent(t)},t.prototype.windowUnload=function(t,n){n&&e.SecuredTouchPointerConfig.instance.beforeUnloadEnabled&&(this.lastIndirectEventTimestamp=(new Date).getTime(),this.pushEvent(n),this._onWindowDispose.dispatch(this,this.clearBuffer()))},t.prototype.pushEvent=function(t){t.additionalData.windowId=e.SecuredTouchSessionStorage.instance.windowId,t.additionalData.locationHref=e.SecuredTouchUtil.getCurrentLocationUrl(),t.additionalData.clientDigest=e.SecuredTouchPointerConfig.instance.clientDigest,this.indirectEvents.push(t),this.indirectEvents.length>=this.MAX_INDIRECT_EVENTS&&this.dispatch()},t.prototype.clearBuffer=function(){var e=this.indirectEvents;return this.indirectEvents=[],e},t.prototype.dispatch=function(){try{clearInterval(this.updateIntervalHandle),this._onIndirect.dispatch(this,this.clearBuffer()),this.updateIntervalHandle=setInterval(this.onTimeElapsedHandler,this._intervalTimeInMillis)}catch(t){e.STLogger.warn("Failed to dispatch indirect events",t)}},Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),t.prototype.start=function(){this._isStarted||(this.updateIntervalHandle=setInterval(this.onTimeElapsedHandler,this._intervalTimeInMillis),this.stClipboardEvents.start(),this.stDragEvents.start(),this.stFocusEvents.start(),this.stUIEvents.start(),this.stGeneralEvents.start(),this.stUnloadEvent.start(),this._isStarted=!0)},t.prototype.stop=function(){this._isStarted&&(this.stClipboardEvents.stop(),this.stDragEvents.stop(),this.stFocusEvents.stop(),this.stUIEvents.stop(),this.stGeneralEvents.stop(),this.stUnloadEvent.stop(),clearInterval(this.updateIntervalHandle),this.updateIntervalHandle=null,this._isStarted=!1)},t.prototype.unsubscribe=function(){this.stClipboardEvents.onClipboardEvent.unsubscribe(this.handleEvent.bind(this)),this.stDragEvents.onDragEvent.unsubscribe(this.handleEvent.bind(this)),this.stFocusEvents.onFocusEvent.unsubscribe(this.handleEvent.bind(this)),this.stUIEvents.onUIEvent.unsubscribe(this.handleEvent.bind(this)),this.stGeneralEvents.onGeneralEvent.unsubscribe(this.handleEvent.bind(this)),this.stUnloadEvent.onUnloadEvent.unsubscribe(this.windowUnload.bind(this))},t}();e.SecuredTouchIndirectClient=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){this.cssSelectorsHashCode=0,this.cssSelectorsMap={},this.elementsIdentifiersMap=new Map}return t.prototype.refreshCssSelectors=function(t){try{if(!t)return;var n=e.SecuredTouchUtil.hashCode(t);if(this.cssSelectorsHashCode===n)return;this.cssSelectorsMap={},this.cssSelectorsHashCode=n,this.elementsIdentifiersMap=new Map;var i=JSON.parse(t);for(var o in i)try{var a=i[o];for(var r in e.SecuredTouchUtil.isArray(a)||(a=[].concat(a)),a){var s=a[r];this.cssSelectorsMap[s]=o}}catch(t){e.STLogger.warn("Failed to set selector "+o,t)}}catch(t){e.STLogger.warn("Failed to set css selectors",t)}},t.prototype.getIdentification=function(t){if(null===this.elementsIdentifiersMap.get(t))return null;if(void 0!==this.elementsIdentifiersMap.get(t))return this.elementsIdentifiersMap.get(t);for(var n in this.cssSelectorsMap)if(e.SecuredTouchUtil.isSelectorMatches(t,n)){var i=this.cssSelectorsMap[n];return this.elementsIdentifiersMap.set(t,i),i}return this.elementsIdentifiersMap.set(t,null),null},t}();e.SecuredTouchElementsIdentifications=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this._isStarted=!1,this._onInteraction=new e.EventDispatcher,this._onEnterPress=new e.EventDispatcher,this.interactionsMap=new Map,this.fieldsIdentifications=new e.SecuredTouchElementsIdentifications,this.keyMap=new Map,this.keyStrokeMap=new Map,this.keyCounter=Math.ceil(100*Math.random()),this._fieldsBlackList=new Set,this.behavioralType=t,this.onKeyDownHandle=this.onKeyDown.bind(this),this.onKeyUpHandle=this.onKeyUp.bind(this),this.onFocusHandle=this.onFocus.bind(this),this.onBlurHandle=this.onBlur.bind(this)}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onInteraction",{get:function(){return this._onInteraction.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onEnterPress",{get:function(){return this._onEnterPress.asEvent()},enumerable:!0,configurable:!0}),t.prototype.refreshKeyboardCssSelectors=function(e){this.fieldsIdentifications.refreshCssSelectors(e)},Object.defineProperty(t.prototype,"modifiersKeys",{get:function(){return["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","NumLock","OS","ScrollLock","Shift","Super","Symbol","SymbolLock"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"specialKeys",{get:function(){return["Tab","Shift","Backspace","Enter","CapsLock","Meta","Delete","Alt","ArrowDown","ArrowUp","Control","ArrowLeft","End","Unidentified","Home","ArrowRight","Insert","Pause","PageDown","PageUp","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","AltGraph","Escape"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldsBlackList",{set:function(e){this._fieldsBlackList=e},enumerable:!0,configurable:!0}),t.prototype.getInteractionFromElement=function(t){var n=null,i=null,o=e.SecuredTouchUtil.getSrcElement(t);return o&&e.SecuredTouchUtil.isFunction(o.getAttribute)&&((i=e.SecuredTouchUtil.getAttribute(o,"data-st-field"))||(i=this.fieldsIdentifications.getIdentification(o)),i&&!this._fieldsBlackList.has(i)&&((n=this.interactionsMap.get(o))||(n={stId:i,elementId:e.SecuredTouchUtil.getAttribute(o,"id"),name:e.SecuredTouchUtil.getAttribute(o,"name"),type:e.SecuredTouchUtil.getAttribute(o,"type"),events:[],identified:!1,counter:0,additionalData:{clientDigest:e.SecuredTouchPointerConfig.instance.clientDigest,windowId:e.SecuredTouchSessionStorage.instance.windowId,locationHref:e.SecuredTouchUtil.getCurrentLocationUrl()}},this.interactionsMap.set(o,n)))),n},t.prototype.getKeyIdMap=function(e){return this.keyMap.has(e)||(this.keyMap.set(e,this.keyCounter),this.keyCounter++),this.keyMap.get(e)},t.prototype.getKeyCode=function(t){return t.keyCode?t.keyCode:t.which?t.which:t.code?e.SecuredTouchUtil.hashCode(t.code):e.SecuredTouchUtil.hashCode(t.key)+t.location},t.prototype.getKeystrokeId=function(t,n){var i,o=this.getKeyCode(t);return"keyup"===n&&(this.keyStrokeMap.has(o)?(i=this.keyStrokeMap.get(o),this.keyStrokeMap.delete(o)):i=e.SecuredTouchUtil.newGuid()),"keydown"===n&&(this.keyStrokeMap.has(o)&&t.repeat?i=this.keyStrokeMap.get(o):(i=e.SecuredTouchUtil.newGuid(),this.keyStrokeMap.set(o,i))),i},t.prototype.createKeyboardInteractionEvent=function(t,n){var i=e.SecuredTouchUtil.getSrcElement(n),o=i.value?i.value.toString().length:0;return{type:t,eventTs:n.timeStamp,epochTs:(new Date).getTime(),modifierKeys:[],selectionStart:e.SecuredTouchUtil.getElementSelectionStart(i),selectionEnd:e.SecuredTouchUtil.getElementSelectionEnd(i),repeat:n.repeat,key:null,keyCode:null,keyId:null,keystrokeId:null,currentLength:o,location:n.location}},t.prototype.enrichKeyboardEvent=function(t,n,i){(this.modifiersKeys.indexOf(t.key)>=0||this.specialKeys.indexOf(t.key)>=0)&&(i.key=t.key,i.keyCode=t.keyCode),i.keyId=this.getKeyIdMap(this.getKeyCode(t)),i.keystrokeId=this.getKeystrokeId(t,i.type);var o=e.SecuredTouchUtil.getSrcElement(t);i.currentLength=new String(o.value).length,t.getModifierState&&this.modifiersKeys.forEach((function(e){t.getModifierState(e.toString())&&i.modifierKeys.push(e)}))},t.prototype.onFocus=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return void this._onInteraction.dispatch(this,null);t=e.SecuredTouchUtil.getKeyboardEvent(t);var n=this.getInteractionFromElement(t);if(n){var i=this.createKeyboardInteractionEvent("focus",t);n.events.push(i)}}catch(t){e.STLogger.warn("error in keyboard focus handler",t)}},t.prototype.onKeyUp=function(t){try{if(13!==(t=e.SecuredTouchUtil.getKeyboardEvent(t)).keyCode&&13!==t.which||this._onEnterPress.dispatch(this,e.SecuredTouchUtil.getSrcElement(t)),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return void this._onInteraction.dispatch(this,null);var n=this.getInteractionFromElement(t);if(n){var i=this.createKeyboardInteractionEvent("keyup",t);this.enrichKeyboardEvent(t,n,i),n.events.push(i)}else this.keyStrokeMap.delete(this.getKeyCode(t))}catch(t){e.STLogger.warn("error in keyUp handler",t)}},t.prototype.onKeyDown=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return void this._onInteraction.dispatch(this,null);t=e.SecuredTouchUtil.getKeyboardEvent(t);var n=this.getInteractionFromElement(t);if(n){var i=this.createKeyboardInteractionEvent("keydown",t);this.enrichKeyboardEvent(t,n,i),n.events.push(i)}}catch(t){e.STLogger.warn("error in keyDown handler",t)}},t.prototype.onBlur=function(t){try{if(!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return void this._onInteraction.dispatch(this,null);t=e.SecuredTouchUtil.getKeyboardEvent(t);var n=this.getInteractionFromElement(t);if(n){var i=this.createKeyboardInteractionEvent("blur",t);n.events.push(i);var o=e.SecuredTouchUtil.getSrcElement(t);this.interactionsMap.delete(o),this._onInteraction.dispatch(this,n)}}catch(t){e.STLogger.warn("error in blur handler",t)}},t.prototype.clearBuffer=function(){var e=Array.from(this.interactionsMap.values());return this.interactionsMap.clear(),e},t.prototype.isEmpty=function(){return 0===this.interactionsMap.size},t.prototype.start=function(){this._isStarted?e.STLogger.debug("Desktop Keyboard events already listening"):(e.SecuredTouchUtil.addEventListener(document,"keydown",this.onKeyDownHandle),e.SecuredTouchUtil.addEventListener(document,"keyup",this.onKeyUpHandle),e.SecuredTouchUtil.addEventListener(document,"focus",this.onFocusHandle,!0),e.SecuredTouchUtil.addEventListener(document,"blur",this.onBlurHandle,!0),this._isStarted=!0,e.STLogger.debug("Desktop Keyboard events start listening..."))},t.prototype.stop=function(){this._isStarted?(document.removeEventListener("keydown",this.onKeyDownHandle),document.removeEventListener("keyup",this.onKeyUpHandle),document.removeEventListener("focus",this.onFocusHandle,!0),document.removeEventListener("blur",this.onBlurHandle,!0),this._isStarted=!1,e.STLogger.debug("Desktop Keyboard events stop listening...")):e.STLogger.debug("Desktop Keyboard events already stopped")},t}();e.SecuredTouchKeyboard=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(t){this._isStarted=!1,this._onInteraction=new e.EventDispatcher,this._onClickEvent=new e.EventDispatcher,this.lastMouseInteractionTimestamp=null,this.updateInterval=1e3,this.idleTimeoutMs=1e3,this.maxMouseEvents=1e3,this.mouseEventsCounter=0,this.behavioralType=t,this.wheelOptions=!!e.SecuredTouchUtil.isPassiveSupported()&&{passive:!0},this.onClickHandle=this.onClick.bind(this),this.onDblclickHandle=this.onDblclick.bind(this),this.onMousedownHandle=this.onMousedown.bind(this),this.onMousemoveHandle=this.onMousemove.bind(this),this.onMouseoutHandle=this.onMouseout.bind(this),this.onMouseoverHandle=this.onMouseover.bind(this),this.onMouseupHandle=this.onMouseup.bind(this),this.onWheelHandle=this.onWheel.bind(this),this.interactionUpdateHandle=this.interactionUpdate.bind(this)}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onInteraction",{get:function(){return this._onInteraction.asEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onClickEvent",{get:function(){return this._onClickEvent.asEvent()},enumerable:!0,configurable:!0}),t.prototype.interactionUpdate=function(){this.lastMouseInteraction?(new Date).getTime()-this.lastMouseInteractionTimestamp>=this.idleTimeoutMs&&this.dispatch():!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType)&&(new Date).getTime()-this.lastMouseInteractionTimestamp<=this.updateInterval&&this.dispatch()},t.prototype.dispatch=function(){try{this._onInteraction.dispatch(this,this.lastMouseInteraction),this.lastMouseInteraction=null,this.mouseEventsCounter=0}catch(t){e.STLogger.warn("Failed to dispatch mouse events",t)}},t.prototype.updateInteraction=function(t){this.lastMouseInteraction||(this.lastMouseInteraction={events:[],identified:!1,counter:0,additionalData:{clientDigest:e.SecuredTouchPointerConfig.instance.clientDigest,windowId:e.SecuredTouchSessionStorage.instance.windowId,locationHref:e.SecuredTouchUtil.getCurrentLocationUrl()}}),this.lastMouseInteraction.events.push(t),this.mouseEventsCounter++,this.mouseEventsCounter>=this.maxMouseEvents&&this.dispatch()},t.prototype.onClick=function(t){try{if(this.lastMouseInteractionTimestamp=(new Date).getTime(),this._onClickEvent.dispatch(this,e.SecuredTouchUtil.getSrcElement(t)),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this.updateInteraction(this.createMouseClickEvent("click",t)),this.dispatch()}catch(t){e.STLogger.warn("error in click handler",t)}},t.prototype.onDblclick=function(t){try{if(this.lastMouseInteractionTimestamp=(new Date).getTime(),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this.updateInteraction(this.createMouseClickEvent("dblclick",t))}catch(t){e.STLogger.warn("error in doubleClick handler",t)}},t.prototype.onMousedown=function(t){try{if(this.lastMouseInteractionTimestamp=(new Date).getTime(),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this.updateInteraction(this.createMouseClickEvent("mousedown",t))}catch(t){e.STLogger.warn("error in mouseDown handler",t)}},t.prototype.onMousemove=function(t){try{if(this.lastMouseInteractionTimestamp=(new Date).getTime(),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this.updateInteraction(this.createMouseEvent("mousemove",t))}catch(t){e.STLogger.warn("error in mouseMove handler",t)}},t.prototype.onMouseout=function(t){try{if(this.lastMouseInteractionTimestamp=(new Date).getTime(),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this.updateInteraction(this.createMouseEvent("mouseout",t));var n=t.relatedTarget||t.toElement;n&&"HTML"!==n.nodeName||this.dispatch()}catch(t){e.STLogger.warn("error in mouseOut handler",t)}},t.prototype.onMouseover=function(t){try{if(this.lastMouseInteractionTimestamp=(new Date).getTime(),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this.updateInteraction(this.createMouseEvent("mouseover",t))}catch(t){e.STLogger.warn("error in mouseOver handler",t)}},t.prototype.onMouseup=function(t){try{if(this.lastMouseInteractionTimestamp=(new Date).getTime(),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this.updateInteraction(this.createMouseClickEvent("mouseup",t))}catch(t){e.STLogger.warn("error in mouseUp handler",t)}},t.prototype.onWheel=function(t){try{if(this.lastMouseInteractionTimestamp=(new Date).getTime(),!e.SecuredTouchUtil.collectBehavioralData(this.behavioralType))return;this.updateInteraction(this.createMouseEvent("wheel",t))}catch(t){e.STLogger.warn("error in wheel handler",t)}},t.prototype.start=function(){this._isStarted?e.STLogger.debug("Desktop Mouse events already listening"):(e.SecuredTouchUtil.addEventListener(document,"click",this.onClickHandle),e.SecuredTouchUtil.addEventListener(document,"dblclick",this.onDblclickHandle),e.SecuredTouchUtil.addEventListener(document,"mousedown",this.onMousedownHandle),e.SecuredTouchUtil.addEventListener(document,"mousemove",this.onMousemoveHandle),e.SecuredTouchUtil.addEventListener(document,"mouseout",this.onMouseoutHandle),e.SecuredTouchUtil.addEventListener(document,"mouseover",this.onMouseoverHandle),e.SecuredTouchUtil.addEventListener(document,"mouseup",this.onMouseupHandle),e.SecuredTouchUtil.addEventListener(document,"wheel",this.onWheelHandle,this.wheelOptions),this.updateIntervalHandle=setInterval(this.interactionUpdateHandle,this.updateInterval),this._isStarted=!0,e.STLogger.debug("Desktop Mouse events start listening..."))},t.prototype.stop=function(){this._isStarted?(document.removeEventListener("click",this.onClickHandle),document.removeEventListener("dblclick",this.onDblclickHandle),document.removeEventListener("mousedown",this.onMousedownHandle),document.removeEventListener("mousemove",this.onMousemoveHandle),document.removeEventListener("mouseout",this.onMouseoutHandle),document.removeEventListener("mouseover",this.onMouseoverHandle),document.removeEventListener("mouseup",this.onMouseupHandle),document.removeEventListener("wheel",this.onWheelHandle,this.wheelOptions),clearInterval(this.updateIntervalHandle),this.updateIntervalHandle=null,this._isStarted=!1,e.STLogger.debug("Desktop Mouse events stop listening...")):e.STLogger.debug("Desktop Mouse events already stopped")},t.prototype.clearBuffer=function(){var e=null;return this.lastMouseInteraction&&(e=this.lastMouseInteraction),this.lastMouseInteraction=null,e},t.prototype.isEmpty=function(){return!this.lastMouseInteraction},t.prototype.createMouseEvent=function(t,n){var i=e.SecuredTouchUtil.modifiersKeys(n);return{type:t,eventTs:n.timeStamp,epochTs:(new Date).getTime(),button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,movementX:n.movementX,movementY:n.movementY,offsetX:n.offsetX,offsetY:n.offsetY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,which:n.which,modifierKeys:i}},t.prototype.createMouseClickEvent=function(t,n){var i=this.createMouseEvent(t,n);if(n.target&&e.SecuredTouchUtil.isFunction(n.target.getBoundingClientRect)){var o=n.target.getBoundingClientRect();i.targetBottom=o.bottom,i.targetHeight=o.height,i.targetLeft=o.left,i.targetRight=o.right,i.targetTop=o.top,i.targetWidth=o.width,i.targetX=o.x,i.targetY=o.y}return i},t}();e.SecuredTouchMouse=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(e){this.key=e}return Object.defineProperty(t.prototype,"asArray",{get:function(){var e=t.stSessionStorage.getItem(this.key);return e||(e=JSON.stringify([])),JSON.parse(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.asArray.length},enumerable:!0,configurable:!0}),t.prototype.push=function(n){var i=this.asArray,o=i.push(n);return t.stSessionStorage.setItem(this.key,JSON.stringify(i)),t.stSessionStorage.setItem(e.SecuredTouchConstants.SESSION_STORAGE_UPDATE_TS,(new Date).getTime()),o},t.prototype.concat=function(e){var n=this.asArray.concat(e);return t.stSessionStorage.setItem(this.key,JSON.stringify(n)),this},t.prototype.clear=function(){t.stSessionStorage.removeItem(this.key)},t.stSessionStorage=e.SecuredTouchSessionStorage.instance.sessionStorage,t}();e.SecuredTouchStorageArray=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(){function t(){this._reduceFactorMap=null,this._reduceMapHashCode=0,this._snapshotsReduceFactor=0}return Object.defineProperty(t.prototype,"reduceFactorMap",{set:function(t){var n=e.SecuredTouchUtil.hashCode(t);this._reduceMapHashCode!==n&&(this._reduceMapHashCode=n,this._reduceFactorMap=JSON.parse(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapshotsReduceFactor",{get:function(){return this._snapshotsReduceFactor},set:function(e){this._snapshotsReduceFactor=e},enumerable:!0,configurable:!0}),t.prototype.eventsWereReduced=function(){return 0!==this._reduceMapHashCode},t.prototype.reduceEvents=function(t){var n=this;try{if(!t||0===t.length||!this._reduceFactorMap)return t;for(var i=new Map,o=[],a=0;a<t.length;a++)i.get(t[a].type)?i.get(t[a].type).push(a):i.set(t[a].type,[a]);i.forEach((function(e,t){var i=n._reduceFactorMap[t]?Number(n._reduceFactorMap[t]):0;n.reduceByFactor(i,e,(function(t){o[e[t]]=!0}))}));var r=[];for(a=0;a<t.length;a++)o[a]&&r.push(t[a]);return e.STLogger.debug(t.length-r.length+" events reduced out of "+t.length),r}catch(n){return e.STLogger.warn("Failed to reduce events",n),t}},t.prototype.reduceSnapshots=function(t){try{if(!t||0===t.length||0===this._snapshotsReduceFactor)return t;var n=[];return this.reduceByFactor(this._snapshotsReduceFactor,t,(function(e){n.push(t[e])})),e.STLogger.debug(t.length-n.length+" snapshots reduced out of "+t.length),n}catch(n){return e.STLogger.warn("Failed to reduce events",n),t}},t.prototype.reduceByFactor=function(e,t,n){e=Math.min(e,1);for(var i=Math.round(Math.max(t.length*(1-e),2)),o=(t.length-1)/(i-1),a=Math.min(t.length,i),r=0;r<a;r++)n(Math.round(r*o))},t}();e.SecuredTouchReduceFactor=t}(_securedTouchEntities||(_securedTouchEntities={})),function(e){var t=function(t){function n(n,i){var o=t.call(this,n,i)||this;return o.capturedKeyboardInteractions=new e.SecuredTouchStorageArray(e.SecuredTouchConstants.CAPTURED_KEYBOARD_INTERACTIONS),o.capturedMouseInteractions=new e.SecuredTouchStorageArray(e.SecuredTouchConstants.CAPTURED_MOUSE_INTERACTIONS),o.capturedGestures=new e.SecuredTouchStorageArray(e.SecuredTouchConstants.CAPTURED_GESTURES),o.capturedIndirectEvents=new e.SecuredTouchStorageArray(e.SecuredTouchConstants.CAPTURED_INDIRECT),o.tagsIdentifications=new e.SecuredTouchElementsIdentifications,o.reduceFactorManager=new e.SecuredTouchReduceFactor,o.payloadIndex=0,o.totalMouseCounter=0,o.totalKeyboardCounter=0,o.totalGestureCounter=0,o.lastGestureTimestamp=0,o.currentBufferSize=0,o.interactionFailuresCounter=0,o.keyboard=new e.SecuredTouchKeyboard("eventKeyboard"),o.keyboard.onInteraction.subscribe(o.handleKeyboardInteraction.bind(o)),o.keyboard.onEnterPress.subscribe(o.handleStTagOnEnter.bind(o)),o.mouse=new e.SecuredTouchMouse("mouse"),o.mouse.onInteraction.subscribe(o.handleMouseInteraction.bind(o)),o.mouse.onClickEvent.subscribe(o.handleStTagOnClick.bind(o)),o.gesture=new e.SecuredTouchGestureEvents("gestures"),o.gesture.onGesture.subscribe(o.handleGesture.bind(o)),o.indirect=new e.SecuredTouchIndirectClient("indirect"),o.indirect.onIndirect.subscribe(o.handleIndirect.bind(o)),o.indirect.onWindowDispose.subscribe(o.handleWindowDispose.bind(o)),o.onUrlChangeHandler=o.onUrlChange.bind(o),o.onErrorHandler=o.onError.bind(o),o.sessionData.passedBufferTimeout&&o.resetLists(),o}return __extends(n,t),n.prototype.dispose=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return this.stopListening(),this.keyboard.onInteraction.unsubscribe(this.handleKeyboardInteraction.bind(this)),this.keyboard.onEnterPress.unsubscribe(this.handleStTagOnEnter.bind(this)),this.mouse.onInteraction.unsubscribe(this.handleMouseInteraction.bind(this)),this.mouse.onClickEvent.unsubscribe(this.handleStTagOnClick.bind(this)),this.gesture.onGesture.unsubscribe(this.handleGesture.bind(this)),this.indirect.unsubscribe(),this.indirect.onIndirect.unsubscribe(this.handleIndirect.bind(this)),this.indirect.onWindowDispose.unsubscribe(this.handleWindowDispose.bind(this)),this.clearMouseBuffer(),this.clearIndirectBuffer(),this.sessionData.lastDisposedPayload=this.createInteractionsPayload(),[2]}))}))},n.prototype.isAboveBufferSize=function(){return this.currentBufferSize>=e.SecuredTouchPointerConfig.instance.bufferSize},n.prototype.enrichMouseInteraction=function(e){e.counter=this.totalMouseCounter++,this.enrichInteractionWithAdditionalData(e)},n.prototype.handleStTagElement=function(t){if(t){var n=e.SecuredTouchUtil.getAttribute(t,"data-st-tag"),i=e.SecuredTouchUtil.getAttribute(t,"data-st-tag-value");n||(n=this.tagsIdentifications.getIdentification(t)),n&&this.addTag(n,i)}},n.prototype.isClickableInput=function(e){return e&&["button","checkbox","radio","submit","file","reset"].indexOf(e.type)>=0},n.prototype.isTextInput=function(e){return e&&["email","number","password","search","tel","text","url"].indexOf(e.type)>=0},n.prototype.handleStTagOnEnter=function(e,t){t instanceof HTMLInputElement&&this.isTextInput(t)&&this.handleStTagElement(t)},n.prototype.handleStTagOnClick=function(e,t){t instanceof HTMLInputElement&&!this.isClickableInput(t)||this.handleStTagElement(t)},n.prototype.handleMouseInteraction=function(e,t){this.isInitAndEnabled()&&(t?(this.addMouseInteractions(t),this.lastGestureTimestamp!==t.events[t.events.length-1].eventTs&&this.currentBufferSize++,this.isAboveBufferSize()&&this.sendAllCapturedInteractions()):this.sendHeartBeat())},n.prototype.handleIndirect=function(e,t){this.isInitAndEnabled()&&(this.addIndirectEvents(t),this.isEmpty()&&this.sendAllCapturedInteractions())},n.prototype.handleWindowDispose=function(e,t){this.isInitAndEnabled()&&(this.addIndirectEvents(t),this.dispose())},n.prototype.enrichKeyboardInteraction=function(e){e.counter=this.totalKeyboardCounter++,this.enrichInteractionWithAdditionalData(e)},n.prototype.handleKeyboardInteraction=function(e,t){this.isInitAndEnabled()&&(t?(this.addKeyboardInteraction(t),this.currentBufferSize++,this.isAboveBufferSize()&&this.sendAllCapturedInteractions()):this.sendHeartBeat())},n.prototype.handleGesture=function(t,n){this.isInitAndEnabled()&&(n?(this.enrichInteractionWithAdditionalData(n),n.counter=this.totalGestureCounter++,this.reduceGestureSnapshots(n),this.capturedGestures.push(n),this.currentBufferSize++,this.lastGestureTimestamp=n.snapshots.length>0?n.snapshots[n.snapshots.length-1].additionalData.eventTimeStamp:n.timestamp,e.SecuredTouchSensors.instance.onGesture(n),this.isAboveBufferSize()&&this.sendAllCapturedInteractions()):this.sendHeartBeat())},n.prototype.clearMouseBuffer=function(){var e=this.mouse.clearBuffer();e&&this.addMouseInteractions(e)},n.prototype.clearIndirectBuffer=function(){var e=this.indirect.clearBuffer();this.addIndirectEvents(e)},n.prototype.clearKeyboardBuffer=function(){for(var e=0,t=this.keyboard.clearBuffer();e<t.length;e++){var n=t[e];n&&this.addKeyboardInteraction(n)}},n.prototype.clearBuffer=function(){this.clearKeyboardBuffer(),this.clearMouseBuffer(),this.clearIndirectBuffer()},n.prototype.addMouseInteractions=function(e){this.enrichMouseInteraction(e),this.reduceMouseInteraction(e),this.capturedMouseInteractions.push(e)},n.prototype.addKeyboardInteraction=function(e){this.enrichKeyboardInteraction(e),this.reduceKeyboardInteraction(e),this.capturedKeyboardInteractions.push(e)},n.prototype.addIndirectEvents=function(e){e&&e.length>0&&this.capturedIndirectEvents.concat(e)},n.prototype.reduceIndirectEvents=function(e){return this.reduceFactorManager.reduceEvents(e)},n.prototype.reduceMouseInteraction=function(e){e.events=this.reduceFactorManager.reduceEvents(e.events)},n.prototype.reduceKeyboardInteraction=function(e){e.events=this.reduceFactorManager.reduceEvents(e.events)},n.prototype.reduceGestureSnapshots=function(e){e.snapshots=this.reduceFactorManager.reduceSnapshots(e.snapshots)},n.prototype.isEmpty=function(){return 0===this.capturedKeyboardInteractions.length&&0===this.capturedMouseInteractions.length&&0===this.capturedGestures.length&&this.gesture.isEmpty()&&this.keyboard.isEmpty()&&this.mouse.isEmpty()},n.prototype.forceSendCapturedEvents=function(e){return this.clearMouseBuffer(),this.sendAllCapturedInteractions(e)},n.prototype.onUrlChange=function(){e.SecuredTouchPointerConfig.instance.sendLocation&&this.addTag("location:"+window.location.href)},n.prototype.onError=function(t){try{var n=t.colno,i=t.filename,o=t.lineno,a=t.message||"",r=t.error||{};i&&i.toLowerCase().indexOf("securedtouch")>=0&&this.sendRemoteLog(e.SecuredTouchErrorCodes.E_6000,"Unhandled error "+a,{colNumber:n,lineNumber:o,stack:r.stack||""})}catch(t){e.STLogger.warn("error in error handler",t)}},n.prototype.refreshListening=function(){if(this.sessionData.initST){var t=e.SecuredTouchPointerConfig.instance;if(e.SecuredTouchTags.instance.blackListRegex=t.tagsBlacklistRegex,this.indirect.intervalTimeInMillis=t.indirectInterval,this.tagsIdentifications.refreshCssSelectors(t.tagsCssSelectors),this.reduceFactorManager.reduceFactorMap=t.eventsReduceFactorMap,this.reduceFactorManager.snapshotsReduceFactor=t.snapshotsReduceFactor,this.mouse.updateInterval=t.updateInterval,this.mouse.maxMouseEvents=t.maxEventsCount,this.keyboard.fieldsBlackList=t.fieldBlackList,this.keyboard.refreshKeyboardCssSelectors(t.cssSelectors),this.stMetadata.webRtcUrl=t.webRtcUrl,this.gesture.maxSnapshotsCount=t.maxSnapshotsCount,e.SecuredTouchSensors.instance.maxSensorSamples=t.maxSensorSamples,e.SecuredTouchSensors.instance.sensorsTimestampDeltaInMillis=t.sensorsTimestampDeltaInMillis,this.isEnabled()){this.mouse.start(),this.keyboard.start(),this.gesture.start(),this.indirect.start(),0==t.maxSensorSamples?e.SecuredTouchSensors.instance.stop():e.SecuredTouchSensors.instance.start();var n=this.sessionData.lastDisposedPayload;n&&this.sendInteractions(n),e.SecuredTouchUtil.addEventListener(window,"_onlocationchange",this.onUrlChangeHandler),e.SecuredTouchUtil.addEventListener(window,"popstate",this.onUrlChangeHandler),e.SecuredTouchUtil.addEventListener(window,"error",this.onErrorHandler)}else this.stopListening(),e.STLogger.info("Securedtouch is disabled.")}else this.tryRecconect()},n.prototype.stopListening=function(){this.keyboard.stop(),this.mouse.stop(),this.gesture.stop(),this.indirect.stop(),e.SecuredTouchSensors.instance.stop(),window.removeEventListener("_onlocationchange",this.onUrlChangeHandler),window.removeEventListener("popstate",this.onUrlChangeHandler),window.removeEventListener("error",this.onErrorHandler)},n.prototype.resetLists=function(){this.capturedKeyboardInteractions.clear(),this.capturedMouseInteractions.clear(),this.capturedGestures.clear(),this.capturedIndirectEvents.clear(),e.SecuredTouchSensors.instance.reset(),e.SecuredTouchTags.instance.reset(),this.currentBufferSize=0},n.prototype.setUsernameToPayload=function(e){var t=this.sessionData.getUsername();e.username=t||this.sessionData.getDeviceCredentials().deviceId,e.keyboardInteractionPayloads.forEach((function(e){e.identified=Boolean(t)})),e.mouseInteractionPayloads.forEach((function(e){e.identified=Boolean(t)})),e.gestures.forEach((function(e){e.identified=Boolean(t)}))},n.prototype.isValidGestures=function(){return this.capturedGestures&&this.capturedGestures.length>0&&this.capturedGestures.length<e.SecuredTouchPointerConfig.instance.maxSnapshotsCount},n.prototype.createInteractionsPayload=function(){var t={applicationId:this.startParams.appId,deviceId:this.sessionData.getDeviceCredentials().deviceId,deviceType:this.stMetadata.deviceType,appSessionId:this.sessionData.appSessionId,stToken:this.getStToken(),keyboardInteractionPayloads:this.capturedKeyboardInteractions.asArray,mouseInteractionPayloads:this.capturedMouseInteractions.asArray,indirectEventsPayload:this.reduceIndirectEvents(this.capturedIndirectEvents.asArray),gestures:this.isValidGestures()?this.capturedGestures.asArray:[],metricsData:e.SecuredTouchMetrics.instance.getMetricsData(this.payloadIndex),accelerometerData:e.SecuredTouchSensors.instance.accelerometerList,gyroscopeData:e.SecuredTouchSensors.instance.gyroscopeList,linearAccelerometerData:e.SecuredTouchSensors.instance.linearAccelerometerList,rotationData:e.SecuredTouchSensors.instance.getRotationListCopy(),index:this.payloadIndex,modes:this.modes,tags:e.SecuredTouchTags.instance.getTagsCopy(),environment:this.getEnvironmentData(),usernameTs:this.sessionData.usernameTs,username:""};return this.payloadIndex++,this.resetLists(),this.setUsernameToPayload(t),t},n.prototype.sendAllCapturedInteractions=function(t){var n=this,i=Promise.resolve();return this.isEnabled()&&(t||this.isAboveBufferSize()||e.SecuredTouchTags.instance.tags&&e.SecuredTouchTags.instance.tags.length>0?(this.clearIndirectBuffer(),i=this.sendInteractions(this.createInteractionsPayload())):this.resetLists()),i.catch((function(t){n.sendRemoteLog(e.SecuredTouchErrorCodes.E_5001,"failed to queue or create payload",t)}))},n.prototype.sendInteractions=function(t){var n=this;return this.lastPayloadTimestamp=(new Date).getTime(),this.dataRepository.sendInteractions(e.SecuredTouchPointerConfig.instance.url,t).then((function(e){e&&e.clientDigest&&n.updateDigest(e.clientDigest),n.interactionFailuresCounter=0})).catch((function(t){e.STLogger.warn("Failed to send Interactions",t),++n.interactionFailuresCounter>=e.SecuredTouchPointerConfig.instance.failuresAmountToReport&&(n.interactionFailuresCounter=0,n.sendRemoteLog(e.SecuredTouchErrorCodes.E_5000,"missed multiple interactions",t))}))},n.prototype.enrichInteractionWithAdditionalData=function(t){try{var n=t.additionalData||{};this.addCommonAdditionalData(n),this.addWidthAndHeight(n),n.deviceCategory=this.stMetadata.deviceCategory,n.snapshotsReduceFactor=this.reduceFactorManager.snapshotsReduceFactor,n.eventsWereReduced=this.reduceFactorManager.eventsWereReduced(),t.additionalData=n}catch(t){e.STLogger.warn("Failed to enrich interactions",t)}},n.prototype.addWidthAndHeight=function(e){e.innerWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.innerHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e.outerWidth=window.outerWidth,e.outerHeight=window.outerHeight},n}(e.SecuredTouchClientBase);e.SecuredTouchClient=t}(_securedTouchEntities||(_securedTouchEntities={}));var _securedTouch=function(){function e(){}return Object.defineProperty(e,"isLogEnabled",{get:function(){return _securedTouchEntities.STLogger.isLogEnabled},set:function(e){_securedTouchEntities.STLogger.isLogEnabled=e},enumerable:!0,configurable:!0}),e.login=function(e,t){return _securedTouchEntities.SecuredTouchClientBase.instance().login(e,t)},e.logout=function(){return _securedTouchEntities.SecuredTouchClientBase.instance().logout()},e.addTag=function(e,t){return _securedTouchEntities.SecuredTouchClientBase.instance().addTag(e,t),this},e.setTag=function(e,t){return _securedTouchEntities.SecuredTouchClientBase.instance().addTag(e,t),Promise.resolve()},e.setSessionId=function(e){_securedTouchEntities.SecuredTouchClientBase.instance().setAppSessionId(e)},e.getSessionId=function(){return _securedTouchEntities.SecuredTouchSessionStorage.instance.appSessionId},e.pauseSecuredTouch=function(){_securedTouchEntities.SecuredTouchClientBase.instance().pauseSecuredTouch()},Object.defineProperty(e,"isRunning",{get:function(){return _securedTouchEntities.SecuredTouchClientBase.instance().isRunning()},enumerable:!0,configurable:!0}),e.resumeSecuredTouch=function(){_securedTouchEntities.SecuredTouchClientBase.instance().resumeSecuredTouch()},e.flush=function(){return _securedTouchEntities.SecuredTouchClientBase.instance().flush()},e.init=function(e){return _securedTouchEntities.SecuredTouchUtil.ieFix(),_securedTouchEntities.SecuredTouchClientBase.instance().startST(e)},e}();window._securedTouch=_securedTouch;var onDomReady=function(e){"complete"===document.readyState?e():window.addEventListener("load",e)};onDomReady((function(){var e=new CustomEvent("SecuredTouchReadyEvent");document.dispatchEvent(e),window._securedTouchReady=!0}))}</script><div class="ReactModalPortal"></div><iframe id="CrossStorageClient-117b9f7d-9c6e-494e-a8e0-cdaa518e005b" style="width: 0px; height: 0px; border: none; display: none; position: absolute; top: -999px; left: -999px;" src="https://hub.securedtouch.com/agoda/hub.html"></iframe><div class="ReactModalPortal"></div><div class="ReactModalPortal"></div><div class="ReactModalPortal"><div class="ReactModal__Overlay ReactModal__Overlay--after-open LoginModal__overlay" style="background: transparent;"><div class="ReactModal__Content ReactModal__Content--after-open LoginModal LoginModal--scrollable" tabindex="-1" role="dialog" aria-label="Modal" style="inset: 0px; border: 0px; border-radius: 0px; background: transparent; padding: 0px;"><div class="LoginModal__backdrop" data-selenium="LoginModal__backdrop"></div><div class="LoginModal__content"><div class="LoginModal__content--vertical-adjustment"><div class="LoginModal__content--horizontal-adjustment LoginModal__content--relative"><div class="LoginPopUp-container"><div class="LoginPopUp-content LoginPopUp-content--afterOpen"><div class="SignUpPanel" data-selenium="signup-panel"><div data-section="UniversalLoginComponent" class="sc-bdfBwQ gNRfUM" id="universal-login-app-505"><iframe src="/ru-ru/ul/login?appId=dictator&amp;rpcId=dictator-%23universal-login-app-505&amp;initialPath=signupEmail&amp;sdkVersion=4.2.0" title="Universal login" data-cy="ul-app-frame" frameborder="0" seamless="seamless" scrolling="yes" style="min-width: 500px; min-height: 400px; height: 1149px; width: 500px;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox"></iframe></div></div></div></div><div class="LoginModal__closeButton LoginModal__closeButton--onTop" data-element-name="LoginModal-closeButton" data-selenium="signup-close-icon"><span class="ficon ficon-20 ficon-x-icon ficon-line-close"></span></div></div></div></div></div></div></div><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; width: 0px; height: 0px;"><div></div></div></div><script src="https://apis.google.com/js/platform.js" id="google-jssdk" gapi_processed="true"></script><script src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/ru_RU/appleid.auth.js" id="apple-jssdk"></script></body></html>